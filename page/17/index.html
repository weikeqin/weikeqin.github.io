<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="msvalidate.01" content="CBB4A6675274A9B82BB82B104F7915A7">
  <meta name="yandex-verification" content="4fa4531dcc9e1bfd">
  <meta name="baidu-site-verification" content="1d263b839540cec80d3497b2f877c5da">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"weikeqin.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.18.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"waline","storage":true,"lazyload":false,"nav":null,"activeClass":"waline"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="不积跬步无以至千里">
<meta property="og:type" content="website">
<meta property="og:title" content="天道酬勤">
<meta property="og:url" content="http://weikeqin.com/page/17/index.html">
<meta property="og:site_name" content="天道酬勤">
<meta property="og:description" content="不积跬步无以至千里">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="WKQ">
<meta property="article:tag" content="tech,Redis,MySQL,ElasticSearch,Neo4j,Java">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://weikeqin.com/page/17/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/17/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>天道酬勤</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?d1ad0ae2a9976c44d556abc07cda1365"></script>






<link rel="dns-prefetch" href="https://fantastic-paletas-170a7a.netlify.app/.netlify/functions/comment">
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">天道酬勤</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">坚持，努力，让好事发生</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">WKQ</p>
  <div class="site-description" itemprop="description">不积跬步无以至千里</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">315</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">58</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="mailto:weikeqin.cn@gmail.com" title="E-Mail → mailto:weikeqin.cn@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

<script type="text/javascript" src="//rf.revolvermaps.com/0/0/6.js?i=5rcgvdncuwu&amp;m=7&amp;c=e63100&amp;cr1=ffffff&amp;f=arial&amp;l=0&amp;bv=90&amp;lx=-420&amp;ly=420&amp;hi=20&amp;he=7&amp;hc=a8ddff&amp;rs=80" async="async"></script>


        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://weikeqin.com/2019/09/09/mysql-index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WKQ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天道酬勤">
      <meta itemprop="description" content="不积跬步无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 天道酬勤">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/09/09/mysql-index/" class="post-title-link" itemprop="url">MySQL索引</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-09-09 08:01:29" itemprop="dateCreated datePublished" datetime="2019-09-09T08:01:29+08:00">2019-09-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-12-10 20:46:10" itemprop="dateModified" datetime="2022-12-10T20:46:10+08:00">2022-12-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/2019/09/09/mysql-index/#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/2019/09/09/mysql-index/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>8 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>  索引类似于字典的目录，目的是为了提高查询效率。</p>
<p>  如词典的目录、图书的目录等。它们的原理都是一样的，通过不断的缩小想要获得数据的范围来筛选出最终想要的结果，同时把随机的事件变成顺序的事件，也就是我们总是通过同一种查找方式来锁定数据。</p>
<h1 id="1-常见的索引模型"><a href="#1-常见的索引模型" class="headerlink" title="(1) 常见的索引模型"></a>(1) 常见的索引模型</h1><blockquote>
<p> 索引的出现是为了提高查询效率，但是实现索引的方式却有很多种，可以用于提高读写效率的数据结构很多，介绍三种常见、也比较简单的数据结构，它们分别是哈希表、有序数组和搜索树。</p>
</blockquote>
<h2 id="1-1-hash索引"><a href="#1-1-hash索引" class="headerlink" title="(1.1) hash索引"></a>(1.1) hash索引</h2><p>  哈希表是一种以键 - 值（key-value）存储数据的结构，我们只要输入待查找的键即 key，就可以找到其对应的值即 Value<br>  哈希表这种结构适用于只有等值查询的场景</p>
<p>优点：等值查询快<br>缺点：不适合范围查询</p>
<h2 id="1-2-有序数组"><a href="#1-2-有序数组" class="headerlink" title="(1.2) 有序数组"></a>(1.2) 有序数组</h2><p>  有序数组在等值查询和范围查询场景中的性能就都非常优秀</p>
<p>  在需要更新数据的时候就麻烦了，你往中间插入一个记录就必须得挪动后面所有的记录，成本太高。</p>
<p>  有序数组索引只适用于静态存储引擎 </p>
<h2 id="1-3-二叉搜索树"><a href="#1-3-二叉搜索树" class="headerlink" title="(1.3) 二叉搜索树"></a>(1.3) 二叉搜索树</h2><p>  查询的时间复杂度是 O(log(N))<br>  更新的时间复杂度是 O(log(N))</p>
<p>  一棵 100 万节点的平衡二叉树，树高 20。一次查询可能需要访问 20 个数据块。在机械硬盘时代，从磁盘随机读一个数据块需要 10 ms 左右的寻址时间。也就是说，对于一个 100 万行的表，如果使用二叉树来存储，单独访问一个行可能需要 20 个 10 ms 的时间，这个查询可真够慢的。</p>
<h2 id="1-4-N叉搜索树"><a href="#1-4-N叉搜索树" class="headerlink" title="(1.4) N叉搜索树"></a>(1.4) N叉搜索树</h2><p>  为了让一个查询尽量少地读磁盘，就必须让查询过程访问尽量少的数据块。那么，我们就不应该使用二叉树，而是要使用“N 叉”树。这里，“N 叉”树中的“N”取决于数据块的大小。</p>
<p>  以 InnoDB 的一个整数字段索引为例，这个 N 差不多是 1200。(MySQL页大小是16K，主键用bigint类型8字节 指针6字节 16000/(8+6)=1142 ≈ 1200)<br>  这棵树高是 4 的时候，就可以存 1200 的 3 次方个值，这已经 17 亿了。(假设只存一个字段bigint类型)<br>  考虑到树根的数据块总是在内存中的，一个 10 亿行的表上一个整数字段的主键索引，查找一个值最多只需要访问 3 次磁盘。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/09/09/mysql-index/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://weikeqin.com/2019/09/09/mysql-transaction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WKQ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天道酬勤">
      <meta itemprop="description" content="不积跬步无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 天道酬勤">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/09/09/mysql-transaction/" class="post-title-link" itemprop="url">MySQL 事务</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-09-09 07:25:14" itemprop="dateCreated datePublished" datetime="2019-09-09T07:25:14+08:00">2019-09-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-12-10 15:24:49" itemprop="dateModified" datetime="2022-12-10T15:24:49+08:00">2022-12-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/2019/09/09/mysql-transaction/#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/2019/09/09/mysql-transaction/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>8 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>　提到事务，肯定不陌生。最经典的例子就是转账，张三要给李四转 100 块钱。</p>
<p>　转账时要从张三的账户扣100块钱，然后给李四的账户加100块钱，<code>张三账户扣钱</code>和<code>李四账户加钱</code>必须保证是一体的。</p>
<p>　简单来说，事务就是要保证一组数据库操作，要么全部成功，要么全部失败。</p>
<p> 在 MySQL 中，事务支持是在引擎层实现的。</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/09/09/mysql-transaction/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://weikeqin.com/2019/09/08/java-bytecode-enhancement/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WKQ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天道酬勤">
      <meta itemprop="description" content="不积跬步无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 天道酬勤">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/09/08/java-bytecode-enhancement/" class="post-title-link" itemprop="url">字节码增强技术探索</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-09-08 22:56:22" itemprop="dateCreated datePublished" datetime="2019-09-08T22:56:22+08:00">2019-09-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-28 11:51:47" itemprop="dateModified" datetime="2022-05-28T11:51:47+08:00">2022-05-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/2019/09/08/java-bytecode-enhancement/#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/2019/09/08/java-bytecode-enhancement/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>  转 <a target="_blank" rel="noopener" href="https://tech.meituan.com/2019/09/05/java-bytecode-enhancement.html">字节码增强技术探索</a></p>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos java_test<span class="token punctuation">]</span><span class="token operator">$</span>  vi HelloWorld<span class="token punctuation">.</span>java
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos java_test<span class="token punctuation">]</span><span class="token operator">$</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos java_test<span class="token punctuation">]</span><span class="token operator">$</span> javac HelloWorld<span class="token punctuation">.</span>java
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos java_test<span class="token punctuation">]</span><span class="token operator">$</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos java_test<span class="token punctuation">]</span><span class="token operator">$</span> java HelloWorld
Hello<span class="token punctuation">,</span> World<span class="token operator">!</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos java_test<span class="token punctuation">]</span><span class="token operator">$</span> javap <span class="token operator">-</span>v HelloWorld<span class="token punctuation">.</span>class<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span><span class="token punctuation">&#123;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello, World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>反编译后的内容如下:</p>
<pre class="line-numbers language-log" data-language="log"><code class="language-log">Classfile <span class="token file-path string">/home/wkq/workspaces/java_test/HelloWorld.class</span>
  Last modified <span class="token date number">Jun 21</span><span class="token punctuation">,</span> <span class="token number">2020</span><span class="token operator">;</span> size <span class="token number">427</span> bytes
  MD5 checksum <span class="token hash constant">15d19d1074b862ce9cca6a8a7f6ee8fe</span>
  Compiled from <span class="token string">"HelloWorld.java"</span>
public class HelloWorld
  <span class="token property">minor version:</span> <span class="token number">0</span>
  <span class="token property">major version:</span> <span class="token number">52</span>
  <span class="token property">flags:</span> ACC_PUBLIC<span class="token punctuation">,</span> ACC_SUPER
<span class="token property">Constant pool:</span>
   <span class="token operator">#</span><span class="token number">1</span> <span class="token operator">=</span> Methodref          <span class="token operator">#</span><span class="token number">6</span><span class="token punctuation">.</span><span class="token operator">#</span><span class="token number">15</span>         <span class="token operator">/</span><span class="token operator">/</span> java<span class="token operator">/</span>lang<span class="token operator">/</span>Object<span class="token punctuation">.</span><span class="token string">"&lt;init>"</span><span class="token operator">:</span><span class="token operator">(</span><span class="token operator">)</span>V
   <span class="token operator">#</span><span class="token number">2</span> <span class="token operator">=</span> Fieldref           <span class="token operator">#</span><span class="token number">16</span><span class="token punctuation">.</span><span class="token operator">#</span><span class="token number">17</span>        <span class="token operator">/</span><span class="token operator">/</span> java<span class="token operator">/</span>lang<span class="token operator">/</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span>Ljava<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream<span class="token operator">;</span>
   <span class="token operator">#</span><span class="token number">3</span> <span class="token operator">=</span> String             <span class="token operator">#</span><span class="token number">18</span>            <span class="token operator">/</span><span class="token operator">/</span> Hello<span class="token punctuation">,</span> World<span class="token operator">!</span>
   <span class="token operator">#</span><span class="token number">4</span> <span class="token operator">=</span> Methodref          <span class="token operator">#</span><span class="token number">19</span><span class="token punctuation">.</span><span class="token operator">#</span><span class="token number">20</span>        <span class="token operator">/</span><span class="token operator">/</span> java<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream<span class="token punctuation">.</span>println<span class="token operator">:</span><span class="token operator">(</span>Ljava<span class="token operator">/</span>lang<span class="token operator">/</span>String<span class="token operator">;</span><span class="token operator">)</span>V
   <span class="token operator">#</span><span class="token number">5</span> <span class="token operator">=</span> Class              <span class="token operator">#</span><span class="token number">21</span>            <span class="token operator">/</span><span class="token operator">/</span> HelloWorld
   <span class="token operator">#</span><span class="token number">6</span> <span class="token operator">=</span> Class              <span class="token operator">#</span><span class="token number">22</span>            <span class="token operator">/</span><span class="token operator">/</span> java<span class="token operator">/</span>lang<span class="token operator">/</span>Object
   <span class="token operator">#</span><span class="token number">7</span> <span class="token operator">=</span> Utf8               <span class="token operator">&lt;</span>init<span class="token operator">></span>
   <span class="token operator">#</span><span class="token number">8</span> <span class="token operator">=</span> Utf8               <span class="token operator">(</span><span class="token operator">)</span>V
   <span class="token operator">#</span><span class="token number">9</span> <span class="token operator">=</span> Utf8               Code
  <span class="token operator">#</span><span class="token number">10</span> <span class="token operator">=</span> Utf8               LineNumberTable
  <span class="token operator">#</span><span class="token number">11</span> <span class="token operator">=</span> Utf8               main
  <span class="token operator">#</span><span class="token number">12</span> <span class="token operator">=</span> Utf8               <span class="token operator">(</span><span class="token punctuation">[</span>Ljava<span class="token operator">/</span>lang<span class="token operator">/</span>String<span class="token operator">;</span><span class="token operator">)</span>V
  <span class="token operator">#</span><span class="token number">13</span> <span class="token operator">=</span> Utf8               SourceFile
  <span class="token operator">#</span><span class="token number">14</span> <span class="token operator">=</span> Utf8               HelloWorld<span class="token punctuation">.</span>java
  <span class="token operator">#</span><span class="token number">15</span> <span class="token operator">=</span> NameAndType        <span class="token operator">#</span><span class="token number">7</span><span class="token operator">:</span><span class="token operator">#</span><span class="token number">8</span>          <span class="token operator">/</span><span class="token operator">/</span> <span class="token string">"&lt;init>"</span><span class="token operator">:</span><span class="token operator">(</span><span class="token operator">)</span>V
  <span class="token operator">#</span><span class="token number">16</span> <span class="token operator">=</span> Class              <span class="token operator">#</span><span class="token number">23</span>            <span class="token operator">/</span><span class="token operator">/</span> java<span class="token operator">/</span>lang<span class="token operator">/</span>System
  <span class="token operator">#</span><span class="token number">17</span> <span class="token operator">=</span> NameAndType        <span class="token operator">#</span><span class="token number">24</span><span class="token operator">:</span><span class="token operator">#</span><span class="token number">25</span>        <span class="token operator">/</span><span class="token operator">/</span> out<span class="token operator">:</span>Ljava<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream<span class="token operator">;</span>
  <span class="token operator">#</span><span class="token number">18</span> <span class="token operator">=</span> Utf8               Hello<span class="token punctuation">,</span> World<span class="token operator">!</span>
  <span class="token operator">#</span><span class="token number">19</span> <span class="token operator">=</span> Class              <span class="token operator">#</span><span class="token number">26</span>            <span class="token operator">/</span><span class="token operator">/</span> java<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream
  <span class="token operator">#</span><span class="token number">20</span> <span class="token operator">=</span> NameAndType        <span class="token operator">#</span><span class="token number">27</span><span class="token operator">:</span><span class="token operator">#</span><span class="token number">28</span>        <span class="token operator">/</span><span class="token operator">/</span> println<span class="token operator">:</span><span class="token operator">(</span>Ljava<span class="token operator">/</span>lang<span class="token operator">/</span>String<span class="token operator">;</span><span class="token operator">)</span>V
  <span class="token operator">#</span><span class="token number">21</span> <span class="token operator">=</span> Utf8               HelloWorld
  <span class="token operator">#</span><span class="token number">22</span> <span class="token operator">=</span> Utf8               java<span class="token operator">/</span>lang<span class="token operator">/</span>Object
  <span class="token operator">#</span><span class="token number">23</span> <span class="token operator">=</span> Utf8               java<span class="token operator">/</span>lang<span class="token operator">/</span>System
  <span class="token operator">#</span><span class="token number">24</span> <span class="token operator">=</span> Utf8               out
  <span class="token operator">#</span><span class="token number">25</span> <span class="token operator">=</span> Utf8               Ljava<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream<span class="token operator">;</span>
  <span class="token operator">#</span><span class="token number">26</span> <span class="token operator">=</span> Utf8               java<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream
  <span class="token operator">#</span><span class="token number">27</span> <span class="token operator">=</span> Utf8               println
  <span class="token operator">#</span><span class="token number">28</span> <span class="token operator">=</span> Utf8               <span class="token operator">(</span>Ljava<span class="token operator">/</span>lang<span class="token operator">/</span>String<span class="token operator">;</span><span class="token operator">)</span>V
<span class="token operator">&#123;</span>
  public HelloWorld<span class="token operator">(</span><span class="token operator">)</span><span class="token operator">;</span>
    <span class="token property">descriptor:</span> <span class="token operator">(</span><span class="token operator">)</span>V
    <span class="token property">flags:</span> ACC_PUBLIC
    <span class="token property">Code:</span>
      stack<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> locals<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> args_size<span class="token operator">=</span><span class="token number">1</span>
         <span class="token number">0</span><span class="token operator">:</span> aload_0
         <span class="token number">1</span><span class="token operator">:</span> invokespecial <span class="token operator">#</span><span class="token number">1</span>                  <span class="token operator">/</span><span class="token operator">/</span> Method java<span class="token operator">/</span>lang<span class="token operator">/</span>Object<span class="token punctuation">.</span><span class="token string">"&lt;init>"</span><span class="token operator">:</span><span class="token operator">(</span><span class="token operator">)</span>V
         <span class="token number">4</span><span class="token operator">:</span> return
      <span class="token property">LineNumberTable:</span>
        <span class="token property">line 2:</span> <span class="token number">0</span>

  public static void main<span class="token operator">(</span>java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">)</span><span class="token operator">;</span>
    <span class="token property">descriptor:</span> <span class="token operator">(</span><span class="token punctuation">[</span>Ljava<span class="token operator">/</span>lang<span class="token operator">/</span>String<span class="token operator">;</span><span class="token operator">)</span>V
    <span class="token property">flags:</span> ACC_PUBLIC<span class="token punctuation">,</span> ACC_STATIC
    <span class="token property">Code:</span>
      stack<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> locals<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> args_size<span class="token operator">=</span><span class="token number">1</span>
         <span class="token number">0</span><span class="token operator">:</span> getstatic     <span class="token operator">#</span><span class="token number">2</span>                  <span class="token operator">/</span><span class="token operator">/</span> Field java<span class="token operator">/</span>lang<span class="token operator">/</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span>Ljava<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream<span class="token operator">;</span>
         <span class="token number">3</span><span class="token operator">:</span> ldc           <span class="token operator">#</span><span class="token number">3</span>                  <span class="token operator">/</span><span class="token operator">/</span> String Hello<span class="token punctuation">,</span> World<span class="token operator">!</span>
         <span class="token number">5</span><span class="token operator">:</span> invokevirtual <span class="token operator">#</span><span class="token number">4</span>                  <span class="token operator">/</span><span class="token operator">/</span> Method java<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream<span class="token punctuation">.</span>println<span class="token operator">:</span><span class="token operator">(</span>Ljava<span class="token operator">/</span>lang<span class="token operator">/</span>String<span class="token operator">;</span><span class="token operator">)</span>V
         <span class="token number">8</span><span class="token operator">:</span> return
      <span class="token property">LineNumberTable:</span>
        <span class="token property">line 4:</span> <span class="token number">0</span>
        <span class="token property">line 5:</span> <span class="token number">8</span>
<span class="token operator">&#125;</span>
<span class="token property">SourceFile:</span> <span class="token string">"HelloWorld.java"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos java_test<span class="token punctuation">]</span><span class="token operator">$</span>  vi CountPlus<span class="token punctuation">.</span>java
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos java_test<span class="token punctuation">]</span><span class="token operator">$</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos java_test<span class="token punctuation">]</span><span class="token operator">$</span> javac CountPlus<span class="token punctuation">.</span>java
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos java_test<span class="token punctuation">]</span><span class="token operator">$</span> java CountPlus
<span class="token number">2</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos java_test<span class="token punctuation">]</span><span class="token operator">$</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos java_test<span class="token punctuation">]</span><span class="token operator">$</span> javap <span class="token operator">-</span>v CountPlus<span class="token punctuation">.</span>class<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CountPlus</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        x<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-log" data-language="log"><code class="language-log">Classfile <span class="token file-path string">/home/wkq/workspaces/java_test/CountPlus.class</span>
  Last modified <span class="token date number">Jun 21</span><span class="token punctuation">,</span> <span class="token number">2020</span><span class="token operator">;</span> size <span class="token number">401</span> bytes
  MD5 checksum <span class="token hash constant">a5d707b751fcd06e1c14854e84aafe07</span>
  Compiled from <span class="token string">"CountPlus.java"</span>
public class CountPlus
  <span class="token property">minor version:</span> <span class="token number">0</span>
  <span class="token property">major version:</span> <span class="token number">52</span>
  <span class="token property">flags:</span> ACC_PUBLIC<span class="token punctuation">,</span> ACC_SUPER
<span class="token property">Constant pool:</span>
   <span class="token operator">#</span><span class="token number">1</span> <span class="token operator">=</span> Methodref          <span class="token operator">#</span><span class="token number">5</span><span class="token punctuation">.</span><span class="token operator">#</span><span class="token number">14</span>         <span class="token operator">/</span><span class="token operator">/</span> java<span class="token operator">/</span>lang<span class="token operator">/</span>Object<span class="token punctuation">.</span><span class="token string">"&lt;init>"</span><span class="token operator">:</span><span class="token operator">(</span><span class="token operator">)</span>V
   <span class="token operator">#</span><span class="token number">2</span> <span class="token operator">=</span> Fieldref           <span class="token operator">#</span><span class="token number">15</span><span class="token punctuation">.</span><span class="token operator">#</span><span class="token number">16</span>        <span class="token operator">/</span><span class="token operator">/</span> java<span class="token operator">/</span>lang<span class="token operator">/</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span>Ljava<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream<span class="token operator">;</span>
   <span class="token operator">#</span><span class="token number">3</span> <span class="token operator">=</span> Methodref          <span class="token operator">#</span><span class="token number">17</span><span class="token punctuation">.</span><span class="token operator">#</span><span class="token number">18</span>        <span class="token operator">/</span><span class="token operator">/</span> java<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream<span class="token punctuation">.</span>println<span class="token operator">:</span><span class="token operator">(</span>I<span class="token operator">)</span>V
   <span class="token operator">#</span><span class="token number">4</span> <span class="token operator">=</span> Class              <span class="token operator">#</span><span class="token number">19</span>            <span class="token operator">/</span><span class="token operator">/</span> CountPlus
   <span class="token operator">#</span><span class="token number">5</span> <span class="token operator">=</span> Class              <span class="token operator">#</span><span class="token number">20</span>            <span class="token operator">/</span><span class="token operator">/</span> java<span class="token operator">/</span>lang<span class="token operator">/</span>Object
   <span class="token operator">#</span><span class="token number">6</span> <span class="token operator">=</span> Utf8               <span class="token operator">&lt;</span>init<span class="token operator">></span>
   <span class="token operator">#</span><span class="token number">7</span> <span class="token operator">=</span> Utf8               <span class="token operator">(</span><span class="token operator">)</span>V
   <span class="token operator">#</span><span class="token number">8</span> <span class="token operator">=</span> Utf8               Code
   <span class="token operator">#</span><span class="token number">9</span> <span class="token operator">=</span> Utf8               LineNumberTable
  <span class="token operator">#</span><span class="token number">10</span> <span class="token operator">=</span> Utf8               main
  <span class="token operator">#</span><span class="token number">11</span> <span class="token operator">=</span> Utf8               <span class="token operator">(</span><span class="token punctuation">[</span>Ljava<span class="token operator">/</span>lang<span class="token operator">/</span>String<span class="token operator">;</span><span class="token operator">)</span>V
  <span class="token operator">#</span><span class="token number">12</span> <span class="token operator">=</span> Utf8               SourceFile
  <span class="token operator">#</span><span class="token number">13</span> <span class="token operator">=</span> Utf8               CountPlus<span class="token punctuation">.</span>java
  <span class="token operator">#</span><span class="token number">14</span> <span class="token operator">=</span> NameAndType        <span class="token operator">#</span><span class="token number">6</span><span class="token operator">:</span><span class="token operator">#</span><span class="token number">7</span>          <span class="token operator">/</span><span class="token operator">/</span> <span class="token string">"&lt;init>"</span><span class="token operator">:</span><span class="token operator">(</span><span class="token operator">)</span>V
  <span class="token operator">#</span><span class="token number">15</span> <span class="token operator">=</span> Class              <span class="token operator">#</span><span class="token number">21</span>            <span class="token operator">/</span><span class="token operator">/</span> java<span class="token operator">/</span>lang<span class="token operator">/</span>System
  <span class="token operator">#</span><span class="token number">16</span> <span class="token operator">=</span> NameAndType        <span class="token operator">#</span><span class="token number">22</span><span class="token operator">:</span><span class="token operator">#</span><span class="token number">23</span>        <span class="token operator">/</span><span class="token operator">/</span> out<span class="token operator">:</span>Ljava<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream<span class="token operator">;</span>
  <span class="token operator">#</span><span class="token number">17</span> <span class="token operator">=</span> Class              <span class="token operator">#</span><span class="token number">24</span>            <span class="token operator">/</span><span class="token operator">/</span> java<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream
  <span class="token operator">#</span><span class="token number">18</span> <span class="token operator">=</span> NameAndType        <span class="token operator">#</span><span class="token number">25</span><span class="token operator">:</span><span class="token operator">#</span><span class="token number">26</span>        <span class="token operator">/</span><span class="token operator">/</span> println<span class="token operator">:</span><span class="token operator">(</span>I<span class="token operator">)</span>V
  <span class="token operator">#</span><span class="token number">19</span> <span class="token operator">=</span> Utf8               CountPlus
  <span class="token operator">#</span><span class="token number">20</span> <span class="token operator">=</span> Utf8               java<span class="token operator">/</span>lang<span class="token operator">/</span>Object
  <span class="token operator">#</span><span class="token number">21</span> <span class="token operator">=</span> Utf8               java<span class="token operator">/</span>lang<span class="token operator">/</span>System
  <span class="token operator">#</span><span class="token number">22</span> <span class="token operator">=</span> Utf8               out
  <span class="token operator">#</span><span class="token number">23</span> <span class="token operator">=</span> Utf8               Ljava<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream<span class="token operator">;</span>
  <span class="token operator">#</span><span class="token number">24</span> <span class="token operator">=</span> Utf8               java<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream
  <span class="token operator">#</span><span class="token number">25</span> <span class="token operator">=</span> Utf8               println
  <span class="token operator">#</span><span class="token number">26</span> <span class="token operator">=</span> Utf8               <span class="token operator">(</span>I<span class="token operator">)</span>V
<span class="token operator">&#123;</span>
  public CountPlus<span class="token operator">(</span><span class="token operator">)</span><span class="token operator">;</span>
    <span class="token property">descriptor:</span> <span class="token operator">(</span><span class="token operator">)</span>V
    <span class="token property">flags:</span> ACC_PUBLIC
    <span class="token property">Code:</span>
      stack<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> locals<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> args_size<span class="token operator">=</span><span class="token number">1</span>
         <span class="token number">0</span><span class="token operator">:</span> aload_0
         <span class="token number">1</span><span class="token operator">:</span> invokespecial <span class="token operator">#</span><span class="token number">1</span>                  <span class="token operator">/</span><span class="token operator">/</span> Method java<span class="token operator">/</span>lang<span class="token operator">/</span>Object<span class="token punctuation">.</span><span class="token string">"&lt;init>"</span><span class="token operator">:</span><span class="token operator">(</span><span class="token operator">)</span>V
         <span class="token number">4</span><span class="token operator">:</span> return
      <span class="token property">LineNumberTable:</span>
        <span class="token property">line 1:</span> <span class="token number">0</span>

  public static void main<span class="token operator">(</span>java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">)</span><span class="token operator">;</span>
    <span class="token property">descriptor:</span> <span class="token operator">(</span><span class="token punctuation">[</span>Ljava<span class="token operator">/</span>lang<span class="token operator">/</span>String<span class="token operator">;</span><span class="token operator">)</span>V
    <span class="token property">flags:</span> ACC_PUBLIC<span class="token punctuation">,</span> ACC_STATIC
    <span class="token property">Code:</span>
      stack<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> locals<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> args_size<span class="token operator">=</span><span class="token number">1</span>
         <span class="token number">0</span><span class="token operator">:</span> iconst_1
         <span class="token number">1</span><span class="token operator">:</span> istore_1
         <span class="token number">2</span><span class="token operator">:</span> iinc          <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span>
         <span class="token number">5</span><span class="token operator">:</span> getstatic     <span class="token operator">#</span><span class="token number">2</span>                  <span class="token operator">/</span><span class="token operator">/</span> Field java<span class="token operator">/</span>lang<span class="token operator">/</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span>Ljava<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream<span class="token operator">;</span>
         <span class="token number">8</span><span class="token operator">:</span> iload_1
         <span class="token number">9</span><span class="token operator">:</span> invokevirtual <span class="token operator">#</span><span class="token number">3</span>                  <span class="token operator">/</span><span class="token operator">/</span> Method java<span class="token operator">/</span>io<span class="token operator">/</span>PrintStream<span class="token punctuation">.</span>println<span class="token operator">:</span><span class="token operator">(</span>I<span class="token operator">)</span>V
        <span class="token number">12</span><span class="token operator">:</span> return
      <span class="token property">LineNumberTable:</span>
        <span class="token property">line 3:</span> <span class="token number">0</span>
        <span class="token property">line 4:</span> <span class="token number">2</span>
        <span class="token property">line 5:</span> <span class="token number">5</span>
        <span class="token property">line 6:</span> <span class="token number">12</span>
<span class="token operator">&#125;</span>
<span class="token property">SourceFile:</span> <span class="token string">"CountPlus.java"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><p>[1] <a target="_blank" rel="noopener" href="https://tech.meituan.com/2019/09/05/java-bytecode-enhancement.html">字节码增强技术探索</a><br><a target="_blank" rel="noopener" href="https://cyw3.github.io/YalesonChan/2016/Java-Byte-Code.html">https://cyw3.github.io/YalesonChan/2016/Java-Byte-Code.html</a><br><a target="_blank" rel="noopener" href="https://juejin.im/post/5aca2c366fb9a028c97a5609">https://juejin.im/post/5aca2c366fb9a028c97a5609</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://weikeqin.com/2019/09/08/redis-solve-what-problem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WKQ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天道酬勤">
      <meta itemprop="description" content="不积跬步无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 天道酬勤">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/09/08/redis-solve-what-problem/" class="post-title-link" itemprop="url">Redis的各项功能解决了哪些问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-09-08 16:00:03" itemprop="dateCreated datePublished" datetime="2019-09-08T16:00:03+08:00">2019-09-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-02-05 22:24:50" itemprop="dateModified" datetime="2023-02-05T22:24:50+08:00">2023-02-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/redis/" itemprop="url" rel="index"><span itemprop="name">redis</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/2019/09/08/redis-solve-what-problem/#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/2019/09/08/redis-solve-what-problem/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>567</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>  <strong>Redis的各项功能解决了哪些问题？</strong></p>
<blockquote>
<p> 先看一下Redis是一个什么东西。官方简介解释到：Redis是一个基于BSD开源的项目，是一个把结构化的数据放在内存中的一个存储系统，你可以把它作为数据库，缓存和消息中间件来使用。同时支持strings，lists，hashes，sets，sorted sets，bitmaps，hyperloglogs和geospatial indexes等数据类型。它还内建了复制，lua脚本，LRU，事务等功能，通过redis sentinel实现高可用，通过redis cluster实现了自动分片。以及事务，发布/订阅，自动故障转移等等。</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/09/08/redis-solve-what-problem/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://weikeqin.com/2019/09/05/mysql-lock-table-solution/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WKQ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天道酬勤">
      <meta itemprop="description" content="不积跬步无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 天道酬勤">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/09/05/mysql-lock-table-solution/" class="post-title-link" itemprop="url">MySQL 锁表后快速解决方法 及 MySQL中的锁</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-09-05 22:14:48" itemprop="dateCreated datePublished" datetime="2019-09-05T22:14:48+08:00">2019-09-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-07-29 07:49:08" itemprop="dateModified" datetime="2023-07-29T07:49:08+08:00">2023-07-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/2019/09/05/mysql-lock-table-solution/#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/2019/09/05/mysql-lock-table-solution/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>20k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>18 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>  前几天同事在晚上上线的时候执行sql语句造成锁表，想总结一下以避免后续发生。</p>
<h1 id="1-遇到锁表快速解决办法"><a href="#1-遇到锁表快速解决办法" class="headerlink" title="(1)  遇到锁表快速解决办法"></a>(1)  遇到锁表快速解决办法</h1><p>　　依次执行1-6步，运行第6步生成的语句即可。</p>
<p>　　如果特别着急，运行 1  2  6 步 以及第6步生成的kill语句 即可。  </p>
<p><strong>第1步　查看表是否在使用。</strong></p>
<blockquote>
<p> <code>show open tables where in_use &gt; 0 ;</code><br>如果查询结果为空。则证明表没有在使用。结束。</p>
</blockquote>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span>  <span class="token keyword">show</span> <span class="token keyword">open</span> <span class="token keyword">tables</span> <span class="token keyword">where</span> in_use <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">;</span>
Empty <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<blockquote>
<p> 如果查询结果不为空，继续后续的步骤。</p>
</blockquote>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span>  <span class="token keyword">show</span> <span class="token keyword">open</span> <span class="token keyword">tables</span> <span class="token keyword">where</span> in_use <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+-------+--------+-------------+</span>
<span class="token operator">|</span> <span class="token keyword">Database</span> <span class="token operator">|</span> <span class="token keyword">Table</span> <span class="token operator">|</span> In_use <span class="token operator">|</span> Name_locked <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+-------+--------+-------------+</span>
<span class="token operator">|</span> test     <span class="token operator">|</span> t     <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span>           <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+-------+--------+-------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>　</p>
<p><strong>第2步　查看数据库当前的进程，看一下有无正在执行的慢SQL记录线程。</strong></p>
<blockquote>
<p> <code>show  processlist;</code><br> 注意：show processlist 是显示用户正在运行的线程，需要注意的是，除了 root 用户能看到所有正在运行的线程外，其他用户都只能看到自己正在运行的线程，看不到其它用户正在运行的线程。<br> SHOW PROCESSLIST shows which threads are running. If you have the PROCESS privilege, you can see all threads. Otherwise, you can see only your own threads (that is, threads associated with the MySQL account that you are using). If you do not use the FULL keyword, only the first 100 characters of each statement are shown in the Info field.
　</p>
</blockquote>
<p><strong>第3步　当前运行的所有事务</strong></p>
<blockquote>
<p><code>SELECT * FROM information_schema.INNODB_TRX;</code>
　</p>
</blockquote>
<p><strong>第4步　当前出现的锁</strong></p>
<blockquote>
<p><code>SELECT * FROM information_schema.INNODB_LOCKs;</code>
　</p>
</blockquote>
<p><strong>第5步　锁等待的对应关系</strong></p>
<blockquote>
<p><code>SELECT * FROM information_schema.INNODB_LOCK_waits;</code><br> 看事务表INNODB_TRX，里面是否有正在锁定的事务线程，看看ID是否在show processlist里面的sleep线程中，如果是，就证明这个sleep的线程事务一直没有commit或者rollback而是卡住了，我们需要手动kill掉。<br> 搜索的结果是在事务表发现了很多任务，这时候最好都kill掉。
　</p>
</blockquote>
<p><strong>第6步　批量删除事务表中的事务</strong></p>
<blockquote>
<p> 这里用的方法是：通过information_schema.processlist表中的连接信息生成需要处理掉的MySQL连接的语句临时文件，然后执行临时文件中生成的指令。</p>
</blockquote>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> concat<span class="token punctuation">(</span><span class="token string">'KILL '</span><span class="token punctuation">,</span>id<span class="token punctuation">,</span><span class="token string">';'</span><span class="token punctuation">)</span> 
<span class="token keyword">FROM</span> information_schema<span class="token punctuation">.</span>processlist p 
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span>  information_schema<span class="token punctuation">.</span>INNODB_TRX x 
<span class="token keyword">ON</span> p<span class="token punctuation">.</span>id<span class="token operator">=</span>x<span class="token punctuation">.</span>trx_mysql_thread_id 
<span class="token keyword">WHERE</span> db<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p> 记得修改对应的数据库名。</p>
</blockquote>
<blockquote>
<p> 这个语句执行后结果如下：</p>
</blockquote>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span>  <span class="token keyword">SELECT</span> concat<span class="token punctuation">(</span><span class="token string">'KILL '</span><span class="token punctuation">,</span>id<span class="token punctuation">,</span><span class="token string">';'</span><span class="token punctuation">)</span>  <span class="token keyword">FROM</span> information_schema<span class="token punctuation">.</span>processlist p  <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span>  information_schema<span class="token punctuation">.</span>INNODB_TRX x  <span class="token keyword">ON</span> p<span class="token punctuation">.</span>id<span class="token operator">=</span>x<span class="token punctuation">.</span>trx_mysql_thread_id  <span class="token keyword">WHERE</span> db<span class="token operator">=</span><span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>
<span class="token operator">|</span> concat<span class="token punctuation">(</span><span class="token string">'KILL '</span><span class="token punctuation">,</span>id<span class="token punctuation">,</span><span class="token string">';'</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">KILL</span> <span class="token number">42</span><span class="token punctuation">;</span>               <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token keyword">KILL</span> <span class="token number">40</span><span class="token punctuation">;</span>               <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p> 执行结果里的两个kill语句即可解决锁表。
　</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/09/05/mysql-lock-table-solution/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://weikeqin.com/2019/09/01/mysql-lock/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WKQ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天道酬勤">
      <meta itemprop="description" content="不积跬步无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 天道酬勤">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/09/01/mysql-lock/" class="post-title-link" itemprop="url">MySQL中的锁</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-09-01 20:42:45" itemprop="dateCreated datePublished" datetime="2019-09-01T20:42:45+08:00">2019-09-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-12-10 23:58:24" itemprop="dateModified" datetime="2022-12-10T23:58:24+08:00">2022-12-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/2019/09/01/mysql-lock/#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/2019/09/01/mysql-lock/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>7.8k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>7 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>  数据库锁设计的初衷是处理并发问题。作为多用户共享的资源，当出现并发访问的时候，数据库需要合理地控制资源的访问规则。而锁就是用来实现这些访问规则的重要数据结构。</p>
<h1 id="1-MySQL中的锁"><a href="#1-MySQL中的锁" class="headerlink" title="(1) MySQL中的锁"></a>(1) MySQL中的锁</h1><p>  按照加锁机制(是否锁住同步资源)分为<code>乐观锁</code>、<code>悲观锁</code></p>
<p>  按照锁粒度可以分为<code>全局锁</code>、<code>表级锁</code>、<code>行锁</code>。</p>
<p>  按照多个线程是否共享分为<code>共享锁</code>、<code>排他锁</code></p>
<h2 id="1-1-两段锁协议"><a href="#1-1-两段锁协议" class="headerlink" title="(1.1) 两段锁协议"></a>(1.1) 两段锁协议</h2><p>  有大量的并发访问，为了预防死锁，一般应用中推荐使用一次封锁法，就是在方法的开始阶段，已经预先知道会用到哪些数据，然后全部锁住，在方法运行之后，再全部解锁。这种方式可以有效的避免循环死锁，但在数据库中却不适用，因为在事务开始阶段，数据库并不知道会用到哪些数据。</p>
<p>  数据库遵循的是两段锁协议，将事务分成两个阶段，加锁阶段和解锁阶段（所以叫两段锁）</p>
<blockquote>
<p>加锁阶段：在该阶段可以进行加锁操作。在对任何数据进行读操作之前要申请并获得S锁（共享锁，其它事务可以继续加共享锁，但不能加排它锁），在进行写操作之前要申请并获得X锁（排它锁，其它事务不能再获得任何锁）。加锁不成功，则事务进入等待状态，直到加锁成功才继续执行。<br>解锁阶段：当事务释放了一个封锁以后，事务进入解锁阶段，在该阶段只能进行解锁操作不能再进行加锁操作。</p>
</blockquote>
<br>


<h1 id="2-乐观锁悲观锁"><a href="#2-乐观锁悲观锁" class="headerlink" title="(2) 乐观锁悲观锁"></a>(2) 乐观锁悲观锁</h1><p>  MySQL中提供的锁都是悲观锁，需要先锁住才操作。</p>
<br>
  
<h1 id="3-MySQL中的全局锁表级锁和行锁"><a href="#3-MySQL中的全局锁表级锁和行锁" class="headerlink" title="(3) MySQL中的全局锁表级锁和行锁"></a>(3) MySQL中的全局锁表级锁和行锁</h1><p>  根据加锁的粒度/范围，MySQL 里面的锁大致可以分成<code>全局锁</code>、<code>表级锁</code>和<code>行锁</code>三类。</p>
<h2 id="3-1-全局锁"><a href="#3-1-全局锁" class="headerlink" title="(3.1) 全局锁"></a>(3.1) 全局锁</h2><blockquote>
<p>全局锁就是对整个数据库实例加锁。MySQL 提供了一个加全局读锁的方法，命令是 Flush tables with read lock (FTWRL)。当你需要让整个库处于只读状态的时候，可以使用这个命令，之后其他线程的以下语句会被阻塞：数据更新语句（数据的增删改）、数据定义语句（包括建表、修改表结构等）和更新类事务的提交语句。</p>
</blockquote>
<p>  <strong>全局锁的典型使用场景是，做全库逻辑备份。</strong></p>
<p>  风险：<br>  1.如果在主库备份，在备份期间不能更新，业务停摆<br>  2.如果在从库备份，备份期间不能执行主库同步的binlog，导致主从延迟</p>
<blockquote>
<p> 官方自带的逻辑备份工具是 mysqldump。当 mysqldump 使用参数<code>–single-transaction</code>的时候，导数据之前就会启动一个事务，来确保拿到一致性视图。而由于 MVCC 的支持，这个过程中数据是可以正常更新的。</p>
</blockquote>
<blockquote>
<p> 全局锁主要用在逻辑备份过程中。对于全部是 InnoDB 引擎的库，建议你选择使用 <code>–single-transaction</code> 参数，对应用会更友好。</p>
</blockquote>
<br>


<h2 id="3-2-表级锁"><a href="#3-2-表级锁" class="headerlink" title="(3.2) 表级锁"></a>(3.2) 表级锁</h2><blockquote>
<p> MySQL里表级别的锁有两种：一种是表锁，一种是元数据锁（meta data lock，MDL)。</p>
</blockquote>
<h3 id="3-2-1-表锁"><a href="#3-2-1-表锁" class="headerlink" title="(3.2.1) 表锁"></a>(3.2.1) 表锁</h3><blockquote>
<p> 表锁是在Server层实现的。ALTER TABLE之类的语句会使用表锁，忽略存储引擎的锁机制。</p>
</blockquote>
<blockquote>
<p> ** 表锁的语法是 <code>lock tables … read/write</code>。** 与 FTWRL 类似，可以用 unlock tables 主动释放锁，也可以在客户端断开的时候自动释放。需要注意，lock tables 语法除了会限制别的线程的读写外，也限定了本线程接下来的操作对象。<br> 举个例子, 如果在某个线程 A 中执行 <code>lock tables t1 read, t2 write</code>; 这个语句，则其他线程写 t1、读写 t2 的语句都会被阻塞。同时，线程 A 在执行 <code>unlock tables</code> 之前，也只能执行读 t1、读写 t2 的操作。连写 t1 都不允许，自然也不能访问其他表。<br> 在还没有出现更细粒度的锁的时候，表锁是最常用的处理并发的方式。而对于 InnoDB 这种支持行锁的引擎，一般不使用 lock tables 命令来控制并发，毕竟锁住整个表的影响面还是太大。</p>
</blockquote>
<br>

<h3 id="3-2-1-元数据锁-metadata-lock"><a href="#3-2-1-元数据锁-metadata-lock" class="headerlink" title="(3.2.1) 元数据锁(metadata lock)"></a>(3.2.1) 元数据锁(metadata lock)</h3><p>  ** 另一类表级的锁是 MDL（metadata lock)。 **</p>
<blockquote>
<p> MDL 不需要显式使用，在访问一个表的时候会被自动加上。<br> MDL 的作用是并发情况下维护数据的一致性，保证读写的正确性。(避免加字段删字段导致查询结果异常)</p>
</blockquote>
<blockquote>
<p> 因此，在 MySQL 5.5 版本中引入了 MDL，当对一个表做增删改查操作的时候，加 MDL 读锁；<br> 当要对表做结构变更操作的时候，加 MDL 写锁。</p>
</blockquote>
<blockquote>
<p> 读锁之间不互斥，因此你可以有多个线程同时对一张表增删改查。<br> 读写锁之间、写锁之间是互斥的，用来保证变更表结构操作的安全性。<br> 因此，如果有两个线程要同时给一个表加字段，其中一个要等另一个执行完才能开始执行。</p>
</blockquote>
<blockquote>
<p> 事务中的 MDL 锁，在语句执行开始时申请，但是语句结束后并不会马上释放，而会等到整个事务提交后再释放。</p>
</blockquote>
<p>  给一个表加字段，或者修改字段，或者加索引，需要扫描全表的数据。<br>  而实际上，即使是小表，操作不慎也会出问题。在修改表的时候会持有MDL写锁，如果这个表上的查询语句频繁，而且客户端有重试机制，也就是说超时后会再起一个新 session 再请求的话，这个库的线程很快就会爆满。</p>
<p>  MDL是并发情况下维护数据的一致性，在表上有事务的时候,不可以对元数据经行写入操作,并且这个是在server层面实现的</p>
<br>

<h2 id="3-3-行锁"><a href="#3-3-行锁" class="headerlink" title="(3.3) 行锁"></a>(3.3) 行锁</h2><blockquote>
<p> MySQL 的行锁是在引擎层由各个引擎自己实现的。<br> 但并不是所有的引擎都支持行锁，比如 MyISAM 引擎就不支持行锁。<br> InnoDB 是支持行锁的，这也是 MyISAM 被 InnoDB 替代的重要原因之一。<br> InnoDB行锁包括 <code>Record Lock</code> 、 <code>Gap Lock</code>、 <code>Next-Key Lock</code> </p>
</blockquote>
<blockquote>
<p> 在 InnoDB 事务中，行锁是在需要的时候才加上的，但并不是不需要了就立刻释放，而是要等到事务结束时才释放。这个就是两阶段锁协议。</p>
</blockquote>
<p>  知道了这个设定，对我们使用事务有什么帮助呢？那就是，如果你的事务中需要锁多个行，要把最可能造成锁冲突、最可能影响并发度的锁尽量往后放。  </p>
<p>  假设你负责实现一个电影票在线交易业务，顾客 A 要在影院 B 购买电影票。我们简化一点，这个业务需要涉及到以下操作：</p>
<ol>
<li>从顾客 A 账户余额中扣除电影票价；</li>
<li>给影院 B 的账户余额增加这张电影票价；</li>
<li>记录一条交易日志。</li>
</ol>
<p>  试想如果同时有另外一个顾客 C 要在影院 B 买票，那么这两个事务冲突的部分就是语句 2 了。因为它们要更新同一个影院账户的余额，需要修改同一行数据。<br>  根据两阶段锁协议，不论你怎样安排语句顺序，所有的操作需要的行锁都是在事务提交的时候才释放的。所以，如果你把语句 2 安排在最后，比如按照 3、1、2 这样的顺序，那么影院账户余额这一行的锁时间就最少。这就最大程度地减少了事务之间的锁等待，提升了并发度。</p>
<br>


<h1 id="4-MySQL数据库InnoDB存储引擎加锁过程"><a href="#4-MySQL数据库InnoDB存储引擎加锁过程" class="headerlink" title="(4) MySQL数据库InnoDB存储引擎加锁过程"></a>(4) MySQL数据库InnoDB存储引擎加锁过程</h1><p>Read Committed (RC)<br>Repeatable Read (RR) </p>
<blockquote>
<p>InnoDB的加锁分析前提条件<br> 前提一： 查询列是不是主键？<br> 前提二： 当前系统的隔离级别是什么？<br> 前提三： 查询列上有索引吗？<br> 前提四： 查询列是唯一索引吗？<br> 前提五： 两个SQL的执行计划是什么？索引扫描？全表扫描？</p>
</blockquote>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">update</span> t1 <span class="token keyword">set</span> update_time <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">where</span> k <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<blockquote>
<p> 组合一： k列是主键，RC隔离级别<br> 组合二： k列是二级唯一索引，RC隔离级别<br> 组合三： k列是二级非唯一索引，RC隔离级别<br> 组合四： k列上没有索引，RC隔离级别<br> 组合五： k列是主键，RR隔离级别<br> 组合六： k列是二级唯一索引，RR隔离级别<br> 组合七： k列是二级非唯一索引，RR隔离级别<br> 组合八： k列上没有索引，RR隔离级别<br> 组合九： Serializable隔离级别</p>
</blockquote>
<blockquote>
<p> 组合一: Read Committed 隔离级别，k列是主键，给定SQL：update t1 set update_time = now() where k = 10; 只需要将主键上 k = 10的记录加上X锁即可</p>
</blockquote>
<blockquote>
<p> 组合二: Read Committed 隔离级别，k列有unique索引，unique索引上的k=10一条记录加上X锁，同时，会根据读取到的列，回主键索引(聚簇索引)，然后将聚簇索引上对应的主键索引项加X锁。</p>
</blockquote>
<blockquote>
<p> 组合三: Read Committed 隔离级别，k列上有索引，那么对应的所有满足SQL查询条件的记录，都会被加锁。同时，这些记录在主键索引上的记录，然后将聚簇索引上对应的主键索引项加X锁。</p>
</blockquote>
<blockquote>
<p> 组合四: Read Committed 隔离级别，若k列上没有索引，SQL会走聚簇索引的全扫描进行过滤，由于过滤是由MySQL Server层面进行的。因此每条记录，无论是否满足条件，都会被加上X锁。但是，为了效率考量，MySQL做了优化，对于不满足条件的记录，会在判断后放锁，最终持有的，是满足条件的记录上的锁，但是不满足条件的记录上的加锁/放锁动作不会省略。同时，优化也违背了2PL的约束。</p>
</blockquote>
<blockquote>
<p> 组合五: Repeatable Read 隔离级别，k列是主键列，给定SQL update t1 set update_time = now() where k = 10; 只需要将主键上 k = 10的记录加上X锁即可。</p>
</blockquote>
<blockquote>
<p> 组合六: Repeatable Read 隔离级别，k列有unique索引，unique索引上的k=10一条记录加上X锁，同时，会根据读取到的列，回主键索引(聚簇索引)，然后将聚簇索引上对应的主键索引项加X锁。</p>
</blockquote>
<blockquote>
<p> 组合七：Repeatable Read 隔离级别，k列有索引， 通过索引定位到第一条满足查询条件的记录，加记录上的X锁，加GAP上的GAP锁，然后加主键聚簇索引上的记录X锁，然后返回；然后读取下一条，重复进行。直至进行到第一条不满足条件的记录，此时，不需要加记录X锁，但是仍旧需要加GAP锁，最后返回结束。</p>
<p> 考虑到B+树索引的有序性，满足条件的项一定是连续存放的。如果要插入一条记录，肯定会插入在相同位置，为了保证两次查询查到的值一致，MySQL选择了用GAP锁，将 查询值范围前、查询值范围、查询值范围后 三个GAP给锁起来。</p>
<p> GAP锁的目的，是为了防止同一事务的两次当前读，出现幻读的情况。</p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"> k           <span class="token operator">|</span> <span class="token number">7</span>  <span class="token operator">|</span> <span class="token number">8</span>  <span class="token operator">|</span> <span class="token number">10</span> <span class="token operator">|</span> <span class="token number">10</span> <span class="token operator">|</span> <span class="token number">40</span> <span class="token operator">|</span> <span class="token number">50</span> <span class="token operator">|</span>
primary id   <span class="token operator">|</span> <span class="token number">1</span>  <span class="token operator">|</span> <span class="token number">2</span>  <span class="token operator">|</span> <span class="token number">3</span>  <span class="token operator">|</span> <span class="token number">4</span>  <span class="token operator">|</span> <span class="token number">5</span>  <span class="token operator">|</span> <span class="token number">6</span>  <span class="token operator">|</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<blockquote>
<p> 为了保证[8,2]与[10,3]间，[10,3]与[10,4]间，[10,4]与[40,5]不会插入新的满足条件的记录，MySQL选择了用GAP锁，将这三个GAP给锁起来。</p>
</blockquote>
<blockquote>
<p> 组合八： 在Repeatable Read隔离级别下，如果进行全表扫描的当前读，那么会锁上表中的所有记录，同时会锁上聚簇索引内的所有GAP，杜绝所有的并发 更新/删除/插入 操作<br>　　聚簇索引上的所有记录，都被加上了X锁。其次，聚簇索引每条记录间的间隙(GAP)，也同时被加上了GAP锁。</p>
</blockquote>
<blockquote>
<p> 组合九：Serializable隔离级别下直接用加锁的方式来避免并行访问。</p>
<p> 在RC，RR隔离级别下，都是快照读，不加锁。<br> Serializable隔离级别，读不加锁就不再成立，所有的读操作，都是当前读。</p>
</blockquote>
<h1 id="4-死锁"><a href="#4-死锁" class="headerlink" title="(4) 死锁"></a>(4) 死锁</h1><blockquote>
<p>当并发系统中不同线程出现循环资源依赖，涉及的线程都在等待别的线程释放资源时，就会导致这几个线程都进入无限等待的状态，称为死锁。</p>
</blockquote>
<blockquote>
<p>当出现死锁以后，有两种策略：</p>
<ol>
<li>一种策略是，直接进入等待，直到超时。这个超时时间可以通过参数 <code>innodb_lock_wait_timeout</code> 来设置。 </li>
<li>另一种策略是，发起死锁检测，发现死锁后，主动回滚死锁链条中的某一个事务，让其他事务得以继续执行。将参数 <code>innodb_deadlock_detect</code> 设置为 on，表示开启这个逻辑。</li>
</ol>
</blockquote>
<blockquote>
<p> 在 InnoDB 中，innodb_lock_wait_timeout 的默认值是 50s，意味着如果采用第一个策略，当出现死锁以后，第一个被锁住的线程要过 50s 才会超时退出，然后其他线程才有可能继续执行。对于在线服务来说，这个等待时间往往是无法接受的。<br>可以考虑通过将一行改成逻辑上的多行来减少锁冲突。还是以影院账户为例，可以考虑放在多条记录上，比如 10 个记录，影院的账户总额等于这 10 个记录的值的总和。这样每次要给影院账户加金额的时候，随机选其中一条记录来加。这样每次冲突概率变成原来的 1/10，可以减少锁等待个数，也就减少了死锁检测的 CPU 消耗。</p>
</blockquote>
<blockquote>
<p> 如果你的事务中需要锁多个行，要把最可能造成锁冲突、最可能影响并发度的锁的申请时机尽量往后放。</p>
</blockquote>
<h1 id="5-可能遇到的问题"><a href="#5-可能遇到的问题" class="headerlink" title="(5) 可能遇到的问题"></a>(5) 可能遇到的问题</h1><h2 id="5-1-备份一般都会在备库上执行，你在用–single-transaction-方法做逻辑备份的过程中，如果主库上的一个小表做了一个-DDL，比如给一个表上加了一列。这时候，从备库上会看到什么现象呢？"><a href="#5-1-备份一般都会在备库上执行，你在用–single-transaction-方法做逻辑备份的过程中，如果主库上的一个小表做了一个-DDL，比如给一个表上加了一列。这时候，从备库上会看到什么现象呢？" class="headerlink" title="(5.1) 备份一般都会在备库上执行，你在用–single-transaction 方法做逻辑备份的过程中，如果主库上的一个小表做了一个 DDL，比如给一个表上加了一列。这时候，从备库上会看到什么现象呢？"></a>(5.1) 备份一般都会在备库上执行，你在用–single-transaction 方法做逻辑备份的过程中，如果主库上的一个小表做了一个 DDL，比如给一个表上加了一列。这时候，从备库上会看到什么现象呢？</h2><p>  备份一般都会在备库上执行，你在用–single-transaction 方法做逻辑备份的过程中，如果主库上的一个小表做了一个 DDL，比如给一个表上加了一列。这时候，从备库上会看到什么现象呢？</p>
<p>假设这个 DDL 是针对表 t1 的， 这里我把备份过程中几个关键的语句列出来：</p>
<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">Q1:<span class="token keyword">SET</span> <span class="token keyword">SESSION</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">ISOLATION</span> <span class="token keyword">LEVEL</span> <span class="token keyword">REPEATABLE</span> <span class="token keyword">READ</span><span class="token punctuation">;</span>
Q2:<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span>  <span class="token keyword">WITH</span> <span class="token keyword">CONSISTENT</span> <span class="token keyword">SNAPSHOT</span>；
<span class="token comment">/* other tables */</span>
Q3:<span class="token keyword">SAVEPOINT</span> sp<span class="token punctuation">;</span>
<span class="token comment">/* 时刻 1 */</span>
Q4:<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token identifier"><span class="token punctuation">`</span>t1<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token comment">/* 时刻 2 */</span>
Q5:<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>t1<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token comment">/* 时刻 3 */</span>
Q6:<span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> <span class="token keyword">SAVEPOINT</span> sp<span class="token punctuation">;</span>
<span class="token comment">/* 时刻 4 */</span>
<span class="token comment">/* other tables */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在备份开始的时候，为了确保 RR（可重复读）隔离级别，再设置一次 RR 隔离级别 (Q1);<br>启动事务，这里用 WITH CONSISTENT SNAPSHOT 确保这个语句执行完就可以得到一个一致性视图（Q2)；<br>设置一个保存点，这个很重要（Q3）；<br>show create 是为了拿到表结构 (Q4)，然后正式导数据 （Q5），回滚到 SAVEPOINT sp，在这里的作用是释放 t1 的 MDL 锁 （Q6）。当然这部分属于“超纲”，上文正文里面都没提到。<br>DDL 从主库传过来的时间按照效果不同，我打了四个时刻。题目设定为小表，我们假定到达后，如果开始执行，则很快能够执行完成。</p>
<p>参考答案如下：</p>
<ol>
<li>如果在 Q4 语句执行之前到达，现象：没有影响，备份拿到的是 DDL 后的表结构。</p></li>
<li>如果在“时刻 2”到达，则表结构被改过，Q5 执行的时候，报 Table definition has changed, please retry transaction，现象：mysqldump 终止；</p></li>
<li>如果在“时刻 2”和“时刻 3”之间到达，mysqldump 占着 t1 的 MDL 读锁，binlog 被阻塞，现象：主从延迟，直到 Q6 执行完成。</p></li>
<li>从“时刻 4”开始，mysqldump 释放了 MDL 读锁，现象：没有影响，备份拿到的是 DDL 前的表结构。</p></li>
</ol>
<h2 id="5-2-删数据问题"><a href="#5-2-删数据问题" class="headerlink" title="(5.2) 删数据问题"></a>(5.2) 删数据问题</h2><p> 如果你要删除一个表里面的前 10000 行数据，有以下三种方法可以做到：<br>  第一种，直接执行 delete from T limit 10000;<br>  第二种，在一个连接中循环执行 20 次 delete from T limit 500;<br>  第三种，在 20 个连接中同时执行 delete from T limit 500。</p>
<p>你会选择哪一种方法呢？为什么呢？</p>
<p>  方案一，事务相对较长，则占用锁的时间较长，会导致其他客户端等待资源时间较长。<br>  方案二，串行化执行，将相对长的事务分成多次相对短的事务，则每次事务占用锁的时间相对较短，其他客户端在等待相应资源的时间也较短。这样的操作，同时也意味着将资源分片使用（每次执行使用不同片段的资源），可以提高并发性。<br>  方案三，人为自己制造锁竞争，加剧并发量。  </p>
<h2 id="5-3-问题3"><a href="#5-3-问题3" class="headerlink" title="(5.3) 问题3"></a>(5.3) 问题3</h2><p>1.如何在死锁发生时,就把发生的sql语句抓出来？<br>2.在使用连接池的情况下,连接会复用.比如一个业务使用连接set sql_select_limit=1,释放掉以后.其他业务复用该连接时,这个参数也生效.请问怎么避免这种情况,或者怎么禁止业务set session？<br>3.很好奇双11的成交额,是通过redis累加的嘛？<br>4.不会改源码能成为专家嘛？ </p>
<ol>
<li>show engine innodb status 里面有信息，不过不是很全…</li>
<li>5.7的reset_connection接口可以考虑一下</li>
<li>用redis的话，为了避免超卖需要增加了很多机制来保证。修改都在数据库里执行就方便点。前提是要解决热点问题</li>
<li>我认识几位处理问题和分析问题经验非常丰富的专家，不用懂源码，但是原理还是要很清楚的</li>
</ol>
<h2 id="5-4-转义导致死锁问题"><a href="#5-4-转义导致死锁问题" class="headerlink" title="(5.4) 转义导致死锁问题"></a>(5.4) 转义导致死锁问题</h2><p>前天在开发中，还遇到过一次死锁，是在一个批处理中，要删除1000条数据，5个线程，200条数据commit一次，<br>sol：delete from 表A where id =15426169754750004759008 STORAGEDB<br>(id是主键)<br>我同事解决了，说原因是id 是char 类型，但是没有加单引号，所以没有进入id索引中，然后锁表了，所以导致死锁。</p>
<p>这个问题的出现，应该是人为只要并发导致锁冲突吧？但是为什么不加单引号会死锁，加了单引号就能正常跑呢？  </p>
<br>


<h1 id="6-思考题"><a href="#6-思考题" class="headerlink" title="(6) 思考题"></a>(6) 思考题</h1><h2 id="从并发角度看插入操作和更新操作哪个先执行"><a href="#从并发角度看插入操作和更新操作哪个先执行" class="headerlink" title="从并发角度看插入操作和更新操作哪个先执行"></a>从并发角度看插入操作和更新操作哪个先执行</h2><p>假设你负责实现一个电影票在线交易业务，顾客 A 要在影院 B 购买电影票。我们简化一点，这个业务需要涉及到以下操作：<br>1、从顾客 A 账户余额中扣除电影票价；<br>2、给影院 B 的账户余额增加这张电影票价；<br>3、记录一条交易日志。</p>
<p>  也就是说，要完成这个交易，我们需要 update 两条记录，并 insert 一条记录。当然，为了保证交易的原子性，我们要把这三个操作放在一个事务中。<br>  那么，你会怎样安排这三个语句在事务中的顺序呢？</p>
<p>根据两阶段锁协议，不论你怎样安排语句顺序，所有的操作需要的行锁都是在事务提交的时候才释放的。<br>操作2行锁冲突比较大，如果你把语句2安排在最后，比如按照 3、1、2 这样的顺序，那么操作2影院账户余额这一行的锁时间就最少。<br>这就最大程度地减少了事务之间的锁等待，提升了并发度。</p>
<p>  这么设计，影院余额这一行的行锁在一个事务中不会停留很长时间。</p>
<p>  从并发系统性能的角度考虑，你觉得在这个事务序列里，应该先插入操作记录，还是应该先更新计数表呢？</p>
<p>知识点在《行锁功过：怎么减少行锁对性能的影响？》<br>因为更新计数表涉及到行锁的竞争，先插入再更新能最大程度地减少了事务之间的锁等待，提升了并发度。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>[1] <a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/74687">19 | 为什么我只查一行的语句，也执行这么慢？MySQL实战45讲 </a><br>[2] <a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/69862">06 | 全局锁和表锁 ：给表加个字段怎么有这么多阻碍？MySQL实战45讲 </a><br>[3] <a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/70215">07 | 行锁功过：怎么减少行锁对性能的影响？MySQL实战45讲</a><br>[4] <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/lock-tables.html">mysql 5.7 lock-tables</a><br>[5] <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/innodb-locks-set.html">MySQL 5.7 Reference Manual  /  The InnoDB Storage Engine  /  Locks Set by Different SQL Statements in InnoDB</a><br>[6] <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/innodb-parameters.html">MySQL 5.7 Reference Manual  /  The InnoDB Storage Engine  /  InnoDB Startup Options and System Variables</a><br>[7] 《高性能MySQL》 O’REILLY<br>[8] <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/show-open-tables.html">mysql-show-open-tables</a><br>[9] <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/show-processlist.html">mysql-show-processlist</a><br>[10] <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/innodb-locking.html">innodb-locking</a><br>[11] <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/innodb-index-types.html">innodb-index-types</a><br>[12] <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/uoUS2NCG0Z7cmC2WkDh6MA">面试官：同学，分析一下MySQL/InnoDB的加锁过程吧</a><br>[13] <a target="_blank" rel="noopener" href="https://www.aneasystone.com/archives/2017/12/solving-dead-locks-three.html">解决死锁之路 - 常见 SQL 语句的加锁分析</a><br>[14] <a target="_blank" rel="noopener" href="https://blog.csdn.net/zhanghongzheng3213/article/details/53436240">mysql insert锁机制</a><br>[15] <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/zSTyZ-8CFalwAYSB0PN6wA">MySQL六十六问，两万字+五十图详解！</a><br>[16] <a target="_blank" rel="noopener" href="https://tech.meituan.com/2014/08/20/innodb-lock.html">Innodb中的事务隔离级别和锁的关系</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://weikeqin.com/2019/08/18/java-core-technology-36-lectures/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WKQ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天道酬勤">
      <meta itemprop="description" content="不积跬步无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 天道酬勤">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/18/java-core-technology-36-lectures/" class="post-title-link" itemprop="url">Java核心技术36讲 杨晓峰</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-18 12:31:03" itemprop="dateCreated datePublished" datetime="2019-08-18T12:31:03+08:00">2019-08-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-28 11:51:47" itemprop="dateModified" datetime="2022-05-28T11:51:47+08:00">2022-05-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/2019/08/18/java-core-technology-36-lectures/#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/2019/08/18/java-core-technology-36-lectures/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>21k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>19 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>  转自 <a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/6478">Java核心技术36讲 杨晓峰</a></p>
<h1 id="第1讲-谈谈你对Java平台的理解？"><a href="#第1讲-谈谈你对Java平台的理解？" class="headerlink" title="第1讲 | 谈谈你对Java平台的理解？"></a>第1讲 | 谈谈你对Java平台的理解？</h1><!--2019-08-20学习-->

<p>模块一 Java基础 (14讲)</p>
<p><a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/6845">第1讲 | 谈谈你对Java平台的理解？</a></p>
<p>  谈谈你对 Java 平台的理解？“Java 是解释执行”，这句话正确吗？</p>
<p>  Java 本身是一种面向对象的语言，最显著的特性有两个方面，一是所谓的“书写一次，到处运行”（Write once, run anywhere），能够非常容易地获得跨平台能力；另外就是 垃圾收集 （GC, Garbage Collection），Java 通过垃圾收集器（Garbage Collector）回收分配内存，大部分情况下，程序员不需要自己操心内存的分配和回收。  </p>
<p>  我们日常会接触到 JRE（Java Runtime Environment）或者 JDK（Java Development Kit）。 JRE，也就是 Java 运行环境，包含了 JVM 和 Java 类库，以及一些模块等。而 JDK 可以看作是 JRE 的一个超集，提供了更多工具，比如编译器、各种诊断工具等。</p>
<p>  对于“Java 是解释执行”这句话，这个说法不太准确。我们开发的 Java 的源代码，首先通过 Javac 编译成为字节码（bytecode），然后，在运行时，通过 Java 虚拟机（JVM）内嵌的解释器将字节码转换成为最终的机器码。但是常见的 JVM，比如我们大多数情况使用的 Oracle JDK 提供的 Hotspot JVM，都提供了 JIT（Just-In-Time）编译器，也就是通常所说的动态编译器，JIT 能够在运行时将热点代码编译成机器码，这种情况下部分热点代码就属于</p>
<p>  对于 Java 平台的理解，可以从很多方面简明扼要地谈一下，例如：Java 语言特性，包括泛型、Lambda 等语言特性；基础类库，包括集合、IO/NIO、网络、并发、安全等基础类库。对于我们日常工作应用较多的类库，面试前可以系统化总结一下，有助于临场发挥。</p>
<p>  或者谈谈 JVM 的一些基础概念和机制，比如 Java 的类加载机制，常用版本 JDK（如 JDK 8）内嵌的 Class-Loader，例如 Bootstrap、 Application 和 Extension Class-loader；类加载大致过程：加载、验证、链接、初始化（这里参考了周志明的《深入理解 Java 虚拟机》，非常棒的 JVM 上手书籍）；自定义 Class-Loader 等。还有垃圾收集的基本原理，最常见的垃圾收集器，如 SerialGC、Parallel GC、 CMS、 G1 等，对于适用于什么样的工作负载最好也心里有数。这些都是可以扩展开的领域，我会在后面的专栏对此进行更系统的介绍。</p>
<p>  当然还有 JDK 包含哪些工具或者 Java 领域内其他工具等，如编译器、运行时环境、安全工具、诊断和监控工具等。这些基本工具是日常工作效率的保证，对于我们工作在其他语言平台上，同样有所帮助，很多都是触类旁通的。</p>
<p>Java特性:<br>  面向对象（封装，继承，多态）<br>  平台无关性（JVM运行.class文件）<br>  语言（泛型，Lambda）<br>  类库（集合，并发，网络，IO/NIO）<br>  JRE（Java运行环境，JVM，类库）<br>  JDK（Java开发工具，包括JRE，javac，诊断工具）</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/08/18/java-core-technology-36-lectures/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://weikeqin.com/2019/08/18/orientdb-config/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WKQ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天道酬勤">
      <meta itemprop="description" content="不积跬步无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 天道酬勤">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/18/orientdb-config/" class="post-title-link" itemprop="url">orientdb-config</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-18 12:21:18" itemprop="dateCreated datePublished" datetime="2019-08-18T12:21:18+08:00">2019-08-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-29 16:28:50" itemprop="dateModified" datetime="2022-05-29T16:28:50+08:00">2022-05-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/database/" itemprop="url" rel="index"><span itemprop="name">database</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/2019/08/18/orientdb-config/#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/2019/08/18/orientdb-config/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>11k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>10 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>  orientdb配置</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/08/18/orientdb-config/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://weikeqin.com/2019/08/18/java-jdbc-prepared-statement/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WKQ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天道酬勤">
      <meta itemprop="description" content="不积跬步无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 天道酬勤">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/18/java-jdbc-prepared-statement/" class="post-title-link" itemprop="url">java-jdbc-prepared-statement</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-18 10:59:41" itemprop="dateCreated datePublished" datetime="2019-08-18T10:59:41+08:00">2019-08-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-28 11:51:47" itemprop="dateModified" datetime="2022-05-28T11:51:47+08:00">2022-05-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/2019/08/18/java-jdbc-prepared-statement/#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/2019/08/18/java-jdbc-prepared-statement/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>8 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>  在写neo4j和orientdb的通用方法时，忽然想到jdbc，然后就想试试mysql neo4j orientdb几个数据库jdbc连接方式里的 prepartdStatement一不一样。</p>
<p>  问题的来源来自以下代码</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">PreparedStatement</span> pst <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> pst<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> fields <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>fields<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">ResultSetMetaData</span> metaData <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 查询出的字段</span>
            <span class="token keyword">int</span> count <span class="token operator">=</span> metaData<span class="token punctuation">.</span><span class="token function">getColumnCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                fields<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>metaData<span class="token punctuation">.</span><span class="token function">getColumnName</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>field<span class="token punctuation">,</span> rs<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>field<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token comment">// T r =  JSONObject.parseObject(JSON.toString(map), Object.class);</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">SQLException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/08/18/java-jdbc-prepared-statement/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://weikeqin.com/2019/08/18/java-concurrent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WKQ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天道酬勤">
      <meta itemprop="description" content="不积跬步无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 天道酬勤">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/18/java-concurrent/" class="post-title-link" itemprop="url">java 并发</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-18 10:17:35" itemprop="dateCreated datePublished" datetime="2019-08-18T10:17:35+08:00">2019-08-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-28 11:51:47" itemprop="dateModified" datetime="2022-05-28T11:51:47+08:00">2022-05-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/2019/08/18/java-concurrent/#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/2019/08/18/java-concurrent/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>107</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>  Java并发</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/08/18/java-concurrent/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/16/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/18/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">WKQ</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://fantastic-paletas-170a7a.netlify.app/.netlify/functions/comment","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎评论","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":false,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/page/17/"}</script>
<link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css">
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script>

</body>
</html>
