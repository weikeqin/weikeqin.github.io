<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"weikeqin.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":true,"width":240},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="把使用neo4j时遇到的一些常见的问题、错误分享给大家  这要包括 启动问题、前端问题、导入数据问题、工程问题、部署问题，欢迎大家补充。 (1)　启动问题(1.1) Neo4j启动没反应但也不报错  在服务器上用neo4j start启动neo4j，没有任何反应，用neo4j console启动也没反应  JDK的问题，换成Oracle JDK-1.8，不要用Open JDK">
<meta property="og:type" content="article">
<meta property="og:title" content="Neo4j error 笔记">
<meta property="og:url" content="http://weikeqin.com/2017/06/01/neo4j-error-notes/index.html">
<meta property="og:site_name" content="天道酬勤">
<meta property="og:description" content="把使用neo4j时遇到的一些常见的问题、错误分享给大家  这要包括 启动问题、前端问题、导入数据问题、工程问题、部署问题，欢迎大家补充。 (1)　启动问题(1.1) Neo4j启动没反应但也不报错  在服务器上用neo4j start启动neo4j，没有任何反应，用neo4j console启动也没反应  JDK的问题，换成Oracle JDK-1.8，不要用Open JDK">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.csdn.net/zqz_zqz/article/details/52235479">
<meta property="og:image" content="https://stackoverflow.com/questions/4584904/what-causes-the-broken-pipe-error">
<meta property="article:published_time" content="2017-06-01T07:49:45.000Z">
<meta property="article:modified_time" content="2022-05-28T03:51:47.253Z">
<meta property="article:author" content="WKQ">
<meta property="article:tag" content="neo4j">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.csdn.net/zqz_zqz/article/details/52235479">

<link rel="canonical" href="http://weikeqin.com/2017/06/01/neo4j-error-notes/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Neo4j error 笔记 | 天道酬勤</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-113485469-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-113485469-1');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d1ad0ae2a9976c44d556abc07cda1365";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">天道酬勤</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">让好事发生</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://weikeqin.com/2017/06/01/neo4j-error-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WKQ">
      <meta itemprop="description" content="不积跬步无以至千里">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天道酬勤">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Neo4j error 笔记
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-06-01 15:49:45" itemprop="dateCreated datePublished" datetime="2017-06-01T15:49:45+08:00">2017-06-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-28 11:51:47" itemprop="dateModified" datetime="2022-05-28T11:51:47+08:00">2022-05-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/neo4j/" itemprop="url" rel="index"><span itemprop="name">neo4j</span></a>
                </span>
            </span>

          
            <span id="/2017/06/01/neo4j-error-notes/" class="post-meta-item leancloud_visitors" data-flag-title="Neo4j error 笔记" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-users"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="firestore-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/06/01/neo4j-error-notes/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/06/01/neo4j-error-notes/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>33k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>30 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>  把使用neo4j时遇到的一些常见的问题、错误分享给大家<br>  这要包括 启动问题、前端问题、导入数据问题、工程问题、部署问题，欢迎大家补充。</p>
<h1 id="1-启动问题"><a href="#1-启动问题" class="headerlink" title="(1)　启动问题"></a>(1)　启动问题</h1><h1 id="1-1-Neo4j启动没反应但也不报错"><a href="#1-1-Neo4j启动没反应但也不报错" class="headerlink" title="(1.1) Neo4j启动没反应但也不报错"></a>(1.1) Neo4j启动没反应但也不报错</h1><p>  在服务器上用neo4j start启动neo4j，没有任何反应，用neo4j console启动也没反应<br>  JDK的问题，换成Oracle JDK-1.8，不要用Open JDK</p>
<span id="more"></span>


<h1 id="1-2-org-neo4j-server-database-LifecycleManagingDatabase-was-successfully-initialized-but-failed-to-start"><a href="#1-2-org-neo4j-server-database-LifecycleManagingDatabase-was-successfully-initialized-but-failed-to-start" class="headerlink" title="(1.2) org.neo4j.server.database.LifecycleManagingDatabase was successfully initialized, but failed to start"></a>(1.2) org.neo4j.server.database.LifecycleManagingDatabase was successfully initialized, but failed to start</h1><pre class="line-numbers language-text" data-language="text"><code class="language-text">警告: This command does not appear to be running with administrative
rights.  Some commands may fail e.g. Start/Stop
2017-03-23 03:01:33.868+0000 INFO  Starting...
2017-03-23 03:01:34.729+0000 INFO  Bolt enabled on 0.0.0.0:7687.
2017-03-23 03:01:34.838+0000 ERROR Failed to start Neo4j: Starting Neo4j failed: Component 'org.neo4j.server.database.LifecycleManagingDatabase@5dc1b1c4' was successfully initialized, but failed to start. Please see attached cause exception. Starting Neo4j failed: Component 'org.neo4j.server.database.LifecycleManagingDatabase@5dc1b1c4' was successfully initialized, but failed to start. Please seeattached cause exception.
org.neo4j.server.ServerStartupException: Starting Neo4j failed: Component 'org.neo4j.server.database.LifecycleManagingDatabase@5dc1b1c4' was successfully initialized, but failed to start. Please see attached cause exception.

Caused by: org.neo4j.kernel.lifecycle.LifecycleException: Component 'org.neo4j.server.database.LifecycleManagingDatabase@5dc1b1c4' was successfully initialized, but failed to start. Please see attached cause exception.

Caused by: java.lang.RuntimeException: Error starting org.neo4j.kernel.impl.factory.GraphDatabaseFacadeFactory, C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\C:ProfessionSofwareNeo4j\databases\charles.graph.db

Caused by: org.neo4j.kernel.lifecycle.LifecycleException: Component 'org.neo4j.kernel.internal.StoreLockerLifecycleAdapter@3edf2098' was successfully initialized, but failed to start. Please see attached cause exception.

Caused by: org.neo4j.kernel.StoreLockException: Unable to create path for store dir: C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\C:ProfessionSofwareNeo4j\databases\charles.graph.db. Please ensureno other process is using this database, and that the directory is writable (required even for read-only access)
        at org.neo4j.kernel.internal.StoreLocker.storeLockException(StoreLocker.java:94)

Caused by: java.io.IOException: Unable to create directory path [C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\C:ProfessionSofwareNeo4j\databases\charles.graph.db] for Neo4j store.
        at org.neo4j.io.fs.DefaultFileSystemAbstraction.mkdirs(DefaultFileSystemAbstraction.java:113)
        at org.neo4j.kernel.internal.StoreLocker.checkLock(StoreLocker.java:64)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>  Unable to create path for store dir， 没有写权限<br>  遇到这个问题，一般都是和路径或者权限有关</p>
<p>最后发现原因是配置文件里dbms.directories.data路径写错了</p>
<h2 id="1-3-TLS-private-key-found-but-missing-certificate"><a href="#1-3-TLS-private-key-found-but-missing-certificate" class="headerlink" title="(1.3)　TLS private key found, but missing certificate"></a>(1.3)　TLS private key found, but missing certificate</h2><pre class="line-numbers language-text" data-language="text"><code class="language-text">C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\bin>neo4j console
警告: This command does not appear to be running with administrative rights.  Some
commands may fail e.g. Start/Stop
2017-04-24 07:06:54.426+0000 ERROR Failed to start Neo4j: TLS private key found, but missing certificate at 'C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\certificates\neo4j.cert'. Cannot start ser
ver without certificate. TLS private key found, but missing certificate at 'C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\certificates\neo4j.cert'. Cannot start server without certificate.
org.neo4j.server.ServerStartupException: TLS private key found, but missing certificate at 'C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\certificates\neo4j.cert'. Cannot start server without certi
ficate.
        at org.neo4j.server.AbstractNeoServer.createKeyStore(AbstractNeoServer.java:387)
        at org.neo4j.server.AbstractNeoServer.init(AbstractNeoServer.java:183)
        at org.neo4j.server.AbstractNeoServer.start(AbstractNeoServer.java:196)
        at org.neo4j.server.ServerBootstrapper.start(ServerBootstrapper.java:91)
        at org.neo4j.server.ServerBootstrapper.start(ServerBootstrapper.java:68)
        at org.neo4j.server.CommunityEntryPoint.main(CommunityEntryPoint.java:28)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>有neo4j.key但是没有neo4j.cert文件，刚才把neo4j.cert误删了</p>
<h1 id="1-4-browser-scripts-8eea4b31-components-js-org-eclipse-jetty-util-SharedBlockingCallback-BlockerTimeoutException"><a href="#1-4-browser-scripts-8eea4b31-components-js-org-eclipse-jetty-util-SharedBlockingCallback-BlockerTimeoutException" class="headerlink" title="(1.4)　/browser/scripts/8eea4b31.components.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException"></a>(1.4)　/browser/scripts/8eea4b31.components.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</h1><pre class="line-numbers language-text" data-language="text"><code class="language-text">[admin@user01 neo4j-community-3.1.3]$ ./bin/neo4j console
Starting Neo4j.
WARNING: Max 1024 open files allowed, minimum of 40000 recommended. See the Neo4j manual.
2017-05-03 12:00:12.496+0000 INFO  ======== Neo4j 3.1.3 ========
2017-05-03 12:00:12.880+0000 INFO  Starting...
2017-05-03 12:00:13.825+0000 INFO  Bolt enabled on 0.0.0.0:7687.
2017-05-03 12:00:19.550+0000 INFO  Started.
2017-05-03 12:00:20.975+0000 INFO  Remote interface available at http://0.0.0.0:7474/
2017-05-03 12:02:23.689+0000 WARN  /browser/scripts/8eea4b31.components.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException
java.io.IOException: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException
        at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:234)

Caused by: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException

2017-05-03 12:02:23.690+0000 WARN  /browser/scripts/8eea4b31.components.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException
java.io.IOException: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException

Caused by: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException

2017-05-03 12:03:23.538+0000 WARN  /browser/scripts/8eea4b31.components.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException

Caused by: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException

2017-05-03 12:03:23.540+0000 WARN  /browser/scripts/8eea4b31.components.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException
java.io.IOException: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException

Caused by: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException
        at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:216)
        ... 33 more
^C2017-05-03 12:10:26.531+0000 INFO  Neo4j Server shutdown initiated by request
2017-05-03 12:10:26.566+0000 INFO  Stopping...
2017-05-03 12:10:27.132+0000 INFO  Stopped.
[admin@user01 neo4j-community-3.1.3]$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h1 id="1-5-Not-possible-to-upgrade-a-store-with-version-‘v0-A-8’-to-current-store-version-v0-A-7-Neo4j-3-1-0"><a href="#1-5-Not-possible-to-upgrade-a-store-with-version-‘v0-A-8’-to-current-store-version-v0-A-7-Neo4j-3-1-0" class="headerlink" title="(1.5)　Not possible to upgrade a store with version ‘v0.A.8’ to current store version v0.A.7 (Neo4j 3.1.0)."></a>(1.5)　Not possible to upgrade a store with version ‘v0.A.8’ to current store version <code>v0.A.7</code> (Neo4j 3.1.0).</h1><pre class="line-numbers language-text" data-language="text"><code class="language-text">ERROR Failed to start Neo4j: Starting Neo4j failed: Component 'org.neo4j.server.database.LifecycleManagingDatabase@77b9886e' was successfully initialized, but failed to start. Please see attached cause exception. Starting Neo4j failed: Component 'org.neo4j.server.database.LifecycleManagingDatabase@77b9886e' was successfully initialized, but failed to start. Please see attached cause exception.
org.neo4j.server.ServerStartupException: Starting Neo4j failed: Component 'org.neo4j.server.database.LifecycleManagingDatabase@77b9886e' was successfully initialized, but failed to start. Please see attached cause exception.

Caused by: org.neo4j.kernel.lifecycle.LifecycleException: Component 'org.neo4j.server.database.LifecycleManagingDatabase@77b9886e' was successfully initialized, but failed to start. Please see attached cause exception.

Caused by: java.lang.RuntimeException: Error starting org.neo4j.kernel.impl.factory.GraphDatabaseFacadeFactory, /home/user1/neo4j_5687/neo4j-community-3.1.0/data/databases/graph.db

Caused by: org.neo4j.kernel.lifecycle.LifecycleException: Component 'org.neo4j.kernel.NeoStoreDataSource@7c18987f' was successfully initialized, but failed to start. Please see attached cause exception.

Caused by: org.neo4j.kernel.impl.storemigration.StoreUpgrader$UnexpectedUpgradingStoreVersionException: Not possible to upgrade a store with version 'v0.A.8' to current store version `v0.A.7` (Neo4j 3.1.0).
        at org.neo4j.kernel.impl.storemigration.UpgradableDatabase.checkUpgradeable(UpgradableDatabase.java:135)
        at org.neo4j.kernel.impl.storemigration.StoreUpgrader.migrateIfNeeded(StoreUpgrader.java:130)
        at org.neo4j.kernel.impl.storemigration.DatabaseMigrator.migrate(DatabaseMigrator.java:98)
        at org.neo4j.kernel.NeoStoreDataSource.upgradeStore(NeoStoreDataSource.java:571)
        at org.neo4j.kernel.NeoStoreDataSource.start(NeoStoreDataSource.java:440)
        at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:433)
        ... 14 more<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>把高版本的数据直接复制到低版本报错。<br>通过neo4j提供的数据迁移jar包迁移数据</p>
<h2 id="1-6-java-lang-IllegalArgumentException-Base-directory-‘C-ProfessionSofware-Neo4j-neo4j-community-3-3-4-certificates-default’-for-SSL-policy-with-name-‘default’-does-not-exist"><a href="#1-6-java-lang-IllegalArgumentException-Base-directory-‘C-ProfessionSofware-Neo4j-neo4j-community-3-3-4-certificates-default’-for-SSL-policy-with-name-‘default’-does-not-exist" class="headerlink" title="(1.6)  java.lang.IllegalArgumentException: Base directory ‘C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default’ for SSL policy with name ‘default’ does not exist."></a>(1.6)  java.lang.IllegalArgumentException: Base directory ‘C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default’ for SSL policy with name ‘default’ does not exist.</h2><pre class="line-numbers language-text" data-language="text"><code class="language-text">C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\bin
λ neo4j console
2018-04-10 02:29:48.937+0000 INFO  ======== Neo4j 3.3.4 ========
2018-04-10 02:29:48.981+0000 INFO  Starting...
2018-04-10 02:29:49.477+0000 ERROR Failed to start Neo4j: Starting Neo4j failed: Component 'org.neo4j.server.database.LifecycleManagingDatabase@1f2586d6' was successfully initialized, but failed to start. Please see the attached cause exception "Base directory 'C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default' for SSL policy with name 'default' does not exist.". Starting Neo4j failed: Component 'org.neo4j.server.database.LifecycleManagingDatabase@1f2586d6' was successfully initialized, but failed to start. Please see the attached cause exception "Base directory 'C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default' for SSL policy with name 'default' does not exist.".
org.neo4j.server.ServerStartupException: Starting Neo4j failed: Component 'org.neo4j.server.database.LifecycleManagingDatabase@1f2586d6' was successfully initialized, but failed to start. Please see the attached cause exception "Base directory 'C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default' for SSL policy with name 'default' does not exist.".

Caused by: org.neo4j.kernel.lifecycle.LifecycleException: Component 'org.neo4j.server.database.LifecycleManagingDatabase@1f2586d6' was successfully initialized, but failed to start. Please see the attached cause exception "Base directory 'C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default' for SSL policy with name 'default' does not exist.".

Caused by: java.lang.IllegalArgumentException: Base directory 'C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default' for SSL policy with name 'default' does not exist.
        at org.neo4j.kernel.configuration.ssl.SslPolicyLoader.load(SslPolicyLoader.java:184)
        at org.neo4j.kernel.configuration.ssl.SslPolicyLoader.create(SslPolicyLoader.java:94)
        at org.neo4j.kernel.impl.factory.CommunityEditionModule.&lt;init>(CommunityEditionModule.java:103)
        at org.neo4j.kernel.impl.factory.GraphDatabaseFacadeFactory.initFacade(GraphDatabaseFacadeFactory.java:159)
        at org.neo4j.kernel.impl.factory.GraphDatabaseFacadeFactory.newFacade(GraphDatabaseFacadeFactory.java:126)
        at org.neo4j.server.CommunityNeoServer.lambda$static$0(CommunityNeoServer.java:58)
        at org.neo4j.server.database.LifecycleManagingDatabase.start(LifecycleManagingDatabase.java:88)
        at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:445)
        ... 5 more
2018-04-10 02:29:49.483+0000 INFO  Neo4j Server shutdown initiated by request<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ssl配置问题<br>修改neo4j.conf里的配置</p>
<h1 id="2-Neo4j-DespTop-前端展示-问题"><a href="#2-Neo4j-DespTop-前端展示-问题" class="headerlink" title="(2)　Neo4j-DespTop(前端展示)问题"></a>(2)　Neo4j-DespTop(前端展示)问题</h1><h2 id="2-1-WebSocket-connection-failure"><a href="#2-1-WebSocket-connection-failure" class="headerlink" title="(2.1)　WebSocket connection failure"></a>(2.1)　WebSocket connection failure</h2><pre class="line-numbers language-text" data-language="text"><code class="language-text">WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: 3<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>分2种情况：</p>
<ol>
<li>neo4j版本在3.2.0以前<br>1.1 换浏览器<br>1.2 在右边的设置里(齿轮图标)，把Do not use Bolt勾选上</li>
<li>neo4j版本3.2.0及以上<ol>
<li>在浏览器里禁用bolt</li>
<li>在neo4j.conf里禁用bolt</li>
<li>检查JDK版本，推荐使用JDK 1.8， JDK 1.7或者1.9 可能出问题</li>
</ol>
</li>
</ol>
<h2 id="前端页面打不开"><a href="#前端页面打不开" class="headerlink" title="前端页面打不开"></a>前端页面打不开</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">37</span><span class="token operator">:</span><span class="token number">55.940</span><span class="token operator">+</span><span class="token number">0800</span> <span class="token constant">WARN</span>  <span class="token operator">/</span>browser<span class="token operator">/</span>vendor<span class="token operator">-</span>d594bc0d621572ced6b1<span class="token punctuation">.</span>js <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">BlockerTimeoutException</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>IOException</span><span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">BlockerTimeoutException</span>
        at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">Blocker</span><span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token class-name">SharedBlockingCallback</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">213</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">748</span><span class="token punctuation">)</span>
<span class="token class-name">Caused</span> by<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">BlockerTimeoutException</span>
        at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">Blocker</span><span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token class-name">SharedBlockingCallback</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">195</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">33</span> more
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">37</span><span class="token operator">:</span><span class="token number">55.941</span><span class="token operator">+</span><span class="token number">0800</span> <span class="token constant">WARN</span>  <span class="token operator">/</span>browser<span class="token operator">/</span>vendor<span class="token operator">-</span>d594bc0d621572ced6b1<span class="token punctuation">.</span>js <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">BlockerTimeoutException</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>IOException</span><span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">BlockerTimeoutException</span>
        at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">Blocker</span><span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token class-name">SharedBlockingCallback</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">213</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">748</span><span class="token punctuation">)</span>
<span class="token class-name">Caused</span> by<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">BlockerTimeoutException</span>
        at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">Blocker</span><span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token class-name">SharedBlockingCallback</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">195</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">33</span> more
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">37</span><span class="token operator">:</span><span class="token number">55.949</span><span class="token operator">+</span><span class="token number">0800</span> <span class="token constant">WARN</span>  <span class="token operator">/</span>browser<span class="token operator">/</span>app<span class="token operator">-</span>d594bc0d621572ced6b1<span class="token punctuation">.</span>js <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">BlockerTimeoutException</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>IOException</span><span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">BlockerTimeoutException</span>
        at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">Blocker</span><span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token class-name">SharedBlockingCallback</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">213</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">748</span><span class="token punctuation">)</span>
<span class="token class-name">Caused</span> by<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">BlockerTimeoutException</span>
        at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">Blocker</span><span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token class-name">SharedBlockingCallback</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">195</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">33</span> more
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">10</span><span class="token operator">:</span><span class="token number">37</span><span class="token operator">:</span><span class="token number">55.950</span><span class="token operator">+</span><span class="token number">0800</span> <span class="token constant">WARN</span>  <span class="token operator">/</span>browser<span class="token operator">/</span>app<span class="token operator">-</span>d594bc0d621572ced6b1<span class="token punctuation">.</span>js <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">BlockerTimeoutException</span>
<span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>IOException</span><span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">BlockerTimeoutException</span>
        at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">Blocker</span><span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token class-name">SharedBlockingCallback</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">213</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">748</span><span class="token punctuation">)</span>
<span class="token class-name">Caused</span> by<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">BlockerTimeoutException</span>
        at <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>eclipse<span class="token punctuation">.</span>jetty<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>SharedBlockingCallback</span>$<span class="token class-name">Blocker</span><span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token class-name">SharedBlockingCallback</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">195</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">33</span> more
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h1 id="3-导入数据问题"><a href="#3-导入数据问题" class="headerlink" title="(3)　导入数据问题"></a>(3)　导入数据问题</h1><h1 id="3-1-Expected-‘–nodes’-to-have-at-least-1-valid-item-but-had-0"><a href="#3-1-Expected-‘–nodes’-to-have-at-least-1-valid-item-but-had-0" class="headerlink" title="(3.1)　Expected ‘–nodes’ to have at least 1 valid item, but had 0 []"></a>(3.1)　Expected ‘–nodes’ to have at least 1 valid item, but had 0 []</h1><pre class="line-numbers language-text" data-language="text"><code class="language-text">C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\bin>neo4j-import  --into retail.db  --id-type string  --nodes:Customer  customers.csv  --nodes  products.csv  --nodes orders_header.csv,orders1.csv,orders2.csv  --relationships:CONTAINS order_details.csv  --relationships:ORDERED customer_orders_header.csv,orders1.csv,orders2.csv
警告: This command does not appear to be running with administrative rights.  Some commands may fail e.g. Start/Stop
WARNING: neo4j-import is deprecated and support for it will be removed in a future
version of Neo4j; please use neo4j-admin import instead.

Input error: Expected '--nodes' to have at least 1 valid item, but had 0 []
Caused by:Expected '--nodes' to have at least 1 valid item, but had 0 []
java.lang.IllegalArgumentException: Expected '--nodes' to have at least 1 valid item, but had 0 []
        at org.neo4j.kernel.impl.util.Validators.lambda$atLeast$6(Validators.java:125)
        at org.neo4j.helpers.Args.validated(Args.java:640)
        at org.neo4j.helpers.Args.interpretOptionsWithMetadata(Args.java:608)
        at org.neo4j.tooling.ImportTool.extractInputFiles(ImportTool.java:503)
        at org.neo4j.tooling.ImportTool.main(ImportTool.java:388)
        at org.neo4j.tooling.ImportTool.main(ImportTool.java:334)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h1 id="3-2-Error-in-input-data"><a href="#3-2-Error-in-input-data" class="headerlink" title="(3.2)　Error in input data"></a>(3.2)　Error in input data</h1><pre class="line-numbers language-text" data-language="text"><code class="language-text">C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\bin>neo4j-import -into test.db  --id-type string  --nodes:Test C:/User/wdb/2017-04-06_test.csv  --stacktrace truektrace true  --skip-duplicate-nodes true
警告: This command does not appear to be running with administrative rights.  Some commands may fail e.g. Start/Stop
WARNING: neo4j-import is deprecated and support for it will be removed in a future
version of Neo4j; please use neo4j-admin import instead.

Neo4j version: 3.1.2
Importing the contents of these files into test.db:
Nodes:
  :Test
  C:\User\wdb\2017-04-06_test.csv

Available resources:
  Free machine memory: 3.74 GB
  Max heap memory : 1.77 GB
  Processors: 4

Nodes
Error in input data
Caused by:ERROR in input
  data source: BufferedCharSeeker[source:C:\User\wdb\2017-04-06_test.csv, position:654, line:11]
  in field: mobile:int:6
  for header: [dep:string, uid:int, name:string, tel:int, fax:string, mobile:int, email:string, id:string]
  raw field value: 13900001111
  original error: Not supported a.t.m<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>错误原因是 用int表示电话号码，超范围了。最后换成用String保存电话号码。</p>
<h2 id="3-2-Missing-header-od-type-start-id"><a href="#3-2-Missing-header-od-type-start-id" class="headerlink" title="(3.2)　Missing header od type start_id"></a>(3.2)　Missing header od type start_id</h2><p>import date has problem , please check the data<br>数据有问题，检查csv文件里的数据格式，看少了什么东西</p>
<h1 id="4-工程问题"><a href="#4-工程问题" class="headerlink" title="(4)　工程问题"></a>(4)　工程问题</h1><h2 id="4-1-Cannot-determine-embedded-database-driver-class-for-database-type-NONE"><a href="#4-1-Cannot-determine-embedded-database-driver-class-for-database-type-NONE" class="headerlink" title="(4.1)　Cannot determine embedded database driver class for database type NONE."></a>(4.1)　Cannot determine embedded database driver class for database type NONE.</h2><pre class="line-numbers language-text" data-language="text"><code class="language-text">Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath. If you have database settings to be loaded from a particular profile you may need to active it (no profiles are currently active).
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath. If you have database settings to be loaded from a particular profile you may need to active it (no profiles are currently active).
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath. If you have database settings to be loaded from a particular profile you may need to active it (no profiles are currently active).
Caused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath. If you have database settings to be loaded from a particular profile you may need to active it (no profiles are currently active).<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>  spring-data-jpa 和 spring-data-neo4j 不兼容，只能升级版本解决了</p>
<h2 id="4-2-org-neo4j-driver-v1-exceptions-ClientException-You-cannot-begin-a-transaction-on-a-session-with-an-open-transaction"><a href="#4-2-org-neo4j-driver-v1-exceptions-ClientException-You-cannot-begin-a-transaction-on-a-session-with-an-open-transaction" class="headerlink" title="(4.2)　org.neo4j.driver.v1.exceptions.ClientException: You cannot begin a transaction on a session with an open transaction;"></a>(4.2)　org.neo4j.driver.v1.exceptions.ClientException: You cannot begin a transaction on a session with an open transaction;</h2><pre class="line-numbers language-text" data-language="text"><code class="language-text">org.neo4j.driver.v1.exceptions.ClientException: You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.
        at org.neo4j.driver.internal.InternalSession.ensureNoOpenTransactionBeforeOpeningTransaction(InternalSession.java:196)
        at org.neo4j.driver.internal.InternalSession.ensureConnectionIsValidBeforeOpeningTransaction(InternalSession.java:167)
        at org.neo4j.driver.internal.InternalSession.beginTransaction(InternalSession.java:135)
        at org.neo4j.jdbc.bolt.BoltPreparedStatement.executeInternal(BoltPreparedStatement.java:89)
        at org.neo4j.jdbc.bolt.BoltPreparedStatement.executeQuery(BoltPreparedStatement.java:54)
        at com.xxxx.xxxx.odk.neo4j.utils.CypherResult.getCypherResultList(CypherResult.java:34)
        at com.xxxx.xxxx.odk.neo4j.search.impl.JdbcSearchImpl.getRelationshipsBetweenTwoDifferentLabelNodes(JdbcSearchImpl.java:399)
        at com.xxxx.xxxx.xxxxxxxx.service.impl.OperationServiceImpl.getDetailInformation(OperationServiceImpl.java:95)
        at com.xxxx.xxxx.xxxxxxxx.controller.OperationController.getDetailInformation(OperationController.java:34)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:114)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:635)
        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>事务的问题，多看看事务的资料</p>
<h2 id="4-3-Exception-in-thread-“Thread-0”-org-neo4j-driver-v1-exceptions-ClientException-Unable-to-connect-to-‘172-23-22-27’-on-port-7687-ensure-the-database-is-running-and-that-there-is-a-working-network-connection-to-it"><a href="#4-3-Exception-in-thread-“Thread-0”-org-neo4j-driver-v1-exceptions-ClientException-Unable-to-connect-to-‘172-23-22-27’-on-port-7687-ensure-the-database-is-running-and-that-there-is-a-working-network-connection-to-it" class="headerlink" title="(4.3)　Exception in thread “Thread-0” org.neo4j.driver.v1.exceptions.ClientException: Unable to connect to ‘172.23.22.27’ on port 7687, ensure the database is running and that there is a working network connection to it."></a>(4.3)　Exception in thread “Thread-0” org.neo4j.driver.v1.exceptions.ClientException: Unable to connect to ‘172.23.22.27’ on port 7687, ensure the database is running and that there is a working network connection to it.</h2><pre class="line-numbers language-text" data-language="text"><code class="language-text">Exception in thread "Thread-0" org.neo4j.driver.v1.exceptions.ClientException: Unable to connect to '172.23.22.27' on port 7687, ensure the database is running and that there is a working network connection to it.
	at org.neo4j.driver.internal.connector.socket.SocketClient.start(SocketClient.java:82)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>使用neo4j-java-driver时，用完连接没有释放，导致连接用尽。<br>在使用完注意加上 session.close();　driver.close();</p>
<h2 id="4-4-org-neo4j-driver-v1-exceptions-clientException-General-SSLEngine-problem"><a href="#4-4-org-neo4j-driver-v1-exceptions-clientException-General-SSLEngine-problem" class="headerlink" title="(4.4)　org.neo4j.driver.v1.exceptions.clientException  General SSLEngine problem"></a>(4.4)　org.neo4j.driver.v1.exceptions.clientException  General SSLEngine problem</h2><pre class="line-numbers language-text" data-language="text"><code class="language-text">org.neo4j.driver.v1.exceptions.clientException  General SSLEngine problem<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol>
<li>在当前用户的目录下找 .neo4j/known_hosts 文件，找到后删除就可以了</li>
<li>在新版本里，SSL认证方式发生变化，需要修改配置文件neo4j.conf，修改70行，102行，103行，把前面的#去掉，重启neo4j数据库</li>
<li>dbms.connector.bolt.tls_level=DISABLED</li>
</ol>
<pre class="line-numbers language-text" data-language="text"><code class="language-text"># Bolt connector
dbms.connector.bolt.enabled=true
dbms.connector.bolt.tls_level=OPTIONAL
dbms.connector.bolt.listen_address=:5687


#*****************************************************************
# SSL system configuration
#*****************************************************************

# Names of the SSL policies to be used for the respective components.

# The legacy policy is a special policy which is not defined in
# the policy configuration section, but rather derives from
# dbms.directories.certificates and associated files
# (by default: neo4j.key and neo4j.cert). Its use will be deprecated.

# The policies to be used for connectors.
#
# N.B: Note that a connector must be configured to support/require
#      SSL/TLS for the policy to actually be utilized.
#
# see: dbms.connector.*.tls_level

bolt.ssl_policy=legacy
https.ssl_policy=legacy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p>I think you need to delete the file ~/neo/known_hosts (or at least open it and delete the line that starts with localhost:7687). When you are using trust-on-first-use the driver will accept the first certificate it sees and store it in the known_hosts-file, if the driver sees any other certificates it will reject them. However when you upgrade the server it will generate a new certificate and it will no longer match the certificate in the known_hosts-file.</p>
<h2 id="4-5-Caused-by-java-io-IOException-Broken-pipe"><a href="#4-5-Caused-by-java-io-IOException-Broken-pipe" class="headerlink" title="(4.5)　Caused by: java.io.IOException: Broken pipe"></a>(4.5)　Caused by: java.io.IOException: Broken pipe</h2><pre class="line-numbers language-text" data-language="text"><code class="language-text">org.neo4j.driver.v1.exceptions.ClientException: Unable to send messages to server: Broken pipe
org.neo4j.driver.v1.exceptions.ClientException: Unable to send messages to server: Broken pipe

Caused by: java.io.IOException: Broken pipe
	at sun.nio.ch.FileDispatcherImpl.write0(Native Method)
	at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:47)
	at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:93)
	at sun.nio.ch.IOUtil.write(IOUtil.java:51)
	at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:471)
	at org.neo4j.driver.internal.connector.socket.TLSSocketChannel.wrap(TLSSocketChannel.java:282)
	at org.neo4j.driver.internal.connector.socket.TLSSocketChannel.write(TLSSocketChannel.java:390)
	at org.neo4j.driver.internal.connector.socket.ChunkedOutput.flush(ChunkedOutput.java:62)
	at org.neo4j.driver.internal.packstream.PackStream$Packer.flush(PackStream.java:173)
	at org.neo4j.driver.internal.messaging.PackStreamMessageFormatV1$Writer.flush(PackStreamMessageFormatV1.java:329)
	at org.neo4j.driver.internal.messaging.PackStreamMessageFormatV1$Writer.flush(PackStreamMessageFormatV1.java:100)
	at org.neo4j.driver.internal.connector.socket.SocketClient.send(SocketClient.java:114)
	at org.neo4j.driver.internal.connector.socket.SocketConnection.flush(SocketConnection.java:108)
	... 113 more<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol>
<li>程序有问题，报错太多了</li>
<li>ulimit没有优化，设置ulimit</li>
</ol>
<p>这个异常是客户端读取超时关闭了连接,这时候服务器端再向客户端已经断开的连接写数据时就发生了broken pipe异常！</p>
<p><img data-src="https://blog.csdn.net/zqz_zqz/article/details/52235479" alt="java.io.IOException 断开的管道 解决方法 ClientAbortException: java.io.IOException: Broken pipe"><br><img data-src="https://stackoverflow.com/questions/4584904/what-causes-the-broken-pipe-error" alt="What causes the Broken Pipe Error?"></p>
<h2 id="4-x"><a href="#4-x" class="headerlink" title="(4.x)"></a>(4.x)</h2><pre class="line-numbers language-text" data-language="text"><code class="language-text">C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\bin
λ neo4j console
2018-04-28 01:40:12.128+0000 INFO  Starting...
2018-04-28 01:40:13.614+0000 INFO  Bolt enabled on 0.0.0.0:7687.
2018-04-28 01:40:19.501+0000 INFO  Started.
2018-04-28 01:40:20.920+0000 INFO  Remote interface available at http://localhost:7474/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<pre class="line-numbers language-text" data-language="text"><code class="language-text">WKQ@WKQ-PC MINGW64 /c/ProfessionSofware/Neo4j/neo4j-community-3.1.0/data/databases
$ rm -rf graph.db/
rm: cannot remove 'graph.db/neostore': Device or resource busy
rm: cannot remove 'graph.db/neostore.counts.db.a': Device or resource busy
rm: cannot remove 'graph.db/neostore.id': Device or resource busy
rm: cannot remove 'graph.db/neostore.labeltokenstore.db': Device or resource busy
rm: cannot remove 'graph.db/neostore.labeltokenstore.db.id': Device or resource busy
rm: cannot remove 'graph.db/neostore.labeltokenstore.db.names': Device or resource busy
rm: cannot remove 'graph.db/neostore.labeltokenstore.db.names.id': Device or resource busy
rm: cannot remove 'graph.db/neostore.nodestore.db': Device or resource busy
rm: cannot remove 'graph.db/neostore.nodestore.db.id': Device or resource busy
rm: cannot remove 'graph.db/neostore.nodestore.db.labels': Device or resource busy
rm: cannot remove 'graph.db/neostore.nodestore.db.labels.id': Device or resource busy
rm: cannot remove 'graph.db/neostore.propertystore.db': Device or resource busy
rm: cannot remove 'graph.db/neostore.propertystore.db.arrays': Device or resource busy
rm: cannot remove 'graph.db/neostore.propertystore.db.arrays.id': Device or resource busy
rm: cannot remove 'graph.db/neostore.propertystore.db.id': Device or resource busy
rm: cannot remove 'graph.db/neostore.propertystore.db.index': Device or resource busy
rm: cannot remove 'graph.db/neostore.propertystore.db.index.id': Device or resource busy
rm: cannot remove 'graph.db/neostore.propertystore.db.index.keys': Device or resource busy
rm: cannot remove 'graph.db/neostore.propertystore.db.index.keys.id': Device or resource busy
rm: cannot remove 'graph.db/neostore.propertystore.db.strings': Device or resource busy
rm: cannot remove 'graph.db/neostore.propertystore.db.strings.id': Device or resource busy
rm: cannot remove 'graph.db/neostore.relationshipgroupstore.db': Device or resource busy
rm: cannot remove 'graph.db/neostore.relationshipgroupstore.db.id': Device or resource busy
rm: cannot remove 'graph.db/neostore.relationshipstore.db': Device or resource busy
rm: cannot remove 'graph.db/neostore.relationshipstore.db.id': Device or resource busy
rm: cannot remove 'graph.db/neostore.relationshiptypestore.db': Device or resource busy
rm: cannot remove 'graph.db/neostore.relationshiptypestore.db.id': Device or resource busy
rm: cannot remove 'graph.db/neostore.relationshiptypestore.db.names': Device or resource busy
rm: cannot remove 'graph.db/neostore.relationshiptypestore.db.names.id': Device or resource busy
rm: cannot remove 'graph.db/neostore.schemastore.db': Device or resource busy
rm: cannot remove 'graph.db/neostore.schemastore.db.id': Device or resource busy
rm: cannot remove 'graph.db/neostore.transaction.db.0': Device or resource busy
rm: cannot remove 'graph.db/store_lock': Device or resource busy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-text" data-language="text"><code class="language-text">2018-04-28 01:44:15.449+0000 INFO  Neo4j Server shutdown initiated by request
2018-04-28 01:44:15.517+0000 INFO  Stopping...
终止批处理操作吗(Y/N)? Exception in thread "Thread-11" java.lang.RuntimeException: org.neo4j.kernel.lifecycle.LifecycleException: Failed to transition component 'org.ne
o4j.kernel.NeoStoreDataSource$5@58dcfcb2' from STOPPED to SHUTTING_DOWN. Please see attached cause exception

Caused by: org.neo4j.kernel.lifecycle.LifecycleException: Failed to transition component 'org.neo4j.kernel.NeoStoreDataSource$5@58dcfcb2' from STOPPED to SHUTTING_DOWN. Please see attached cause exception

        Suppressed: org.neo4j.kernel.lifecycle.LifecycleException: Failed to transition component 'org.neo4j.kernel.impl.storageengine.impl.recordstorage.RecordStorageEngine@6661b54d' from STOPPED to SHUTTING_DOWN. Please see attached cause exception

        Caused by: java.io.IOException: Exception closing multiple resources

        Caused by: java.io.IOException: Exception closing multiple resources

        Caused by: java.nio.file.NoSuchFileException: C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\schema\label\lucene\labelStore\1\write.lock

                Suppressed: java.nio.file.NoSuchFileException: C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\schema\label\lucene\labelStore\1\_1.cfe
                        at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:79)

        Suppressed: org.neo4j.kernel.lifecycle.LifecycleException: Failed to transition component 'org.neo4j.kernel.impl.pagecache.PageCacheLifecycle@6df2bf5d' from STOPPED to SHUTTING_DOWN. Please see attached cause exception

        Caused by: java.lang.IllegalStateException: Cannot close the PageCache while files are still mapped:
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore (1 mapping)
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.counts.db.a (1 mapping)
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.relationshipgroupstore.db (1 mapping)
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.schemastore.db (1 mapping)
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.labeltokenstore.db (1 mapping)
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.labeltokenstore.db.names (1 mapping)
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.relationshiptypestore.db (1 mapping)
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.relationshiptypestore.db.names (1 mapping)
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.relationshipstore.db (1 mapping)
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.propertystore.db (1 mapping)
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.propertystore.db.arrays (1 mapping)
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.propertystore.db.strings (1 mapping)
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.propertystore.db.index (1 mapping)
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.propertystore.db.index.keys (1 mapping)
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.nodestore.db (1 mapping)
        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.nodestore.db.labels (1 mapping)
                at org.neo4j.io.pagecache.impl.muninn.MuninnPageCache.close(MuninnPageCache.java:610)
                at org.neo4j.kernel.impl.pagecache.PageCacheLifecycle.shutdown(PageCacheLifecycle.java:42)
                at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.shutdown(LifeSupport.java:488)
                ... 10 more
Caused by: org.neo4j.kernel.impl.store.UnderlyingStorageException: java.nio.file.NoSuchFileException: C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\schema\label\lucene\labelStore\1\write.lock

Caused by: java.nio.file.NoSuchFileException: C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\schema\label\lucene\labelStore\1\write.lock
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h1 id="5-部署问题"><a href="#5-部署问题" class="headerlink" title="(5)　部署问题"></a>(5)　部署问题</h1><h2 id="5-1-no-suitable-driver-foune"><a href="#5-1-no-suitable-driver-foune" class="headerlink" title="(5.1)　no suitable driver foune"></a>(5.1)　no suitable driver foune</h2><p><code>no suitable driver foune for jdbc:neo4j:http:http://127.0.0.1:7474</code></p>
<ol>
<li>Class.forName(url).newInstance()</li>
<li>把jar放在$jre/lib/ext下面</li>
</ol>
<h1 id="5-2-WARNING-Max-1024-open-files-allowed-minimum-of-40000-recommended-See-the-Neo4j-manual"><a href="#5-2-WARNING-Max-1024-open-files-allowed-minimum-of-40000-recommended-See-the-Neo4j-manual" class="headerlink" title="(5.2)　WARNING: Max 1024 open files allowed, minimum of 40000 recommended. See the Neo4j manual."></a>(5.2)　WARNING: Max 1024 open files allowed, minimum of 40000 recommended. See the Neo4j manual.</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>admin@user01 neo4j-community-3.1.3<span class="token punctuation">]</span>$ ./bin/neo4j start
Starting Neo4j.
WARNING: Max <span class="token number">1024</span> <span class="token function">open</span> files allowed, minimum of <span class="token number">40000</span> recommended. See the Neo4j manual.
Started neo4j <span class="token punctuation">(</span>pid <span class="token number">8480</span><span class="token punctuation">)</span>. It is available at http://localhost:7474/
There may be a short delay <span class="token keyword">until</span> the server is ready.
See /home/admin/databases/neo4j-community-3.1.3/logs/neo4j.log <span class="token keyword">for</span> current status.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>  Linux平台对用户可能打开的并发文件的数量施加了上限。默认是1024。使用ulimit -n命令为当前用户和会话查看<br>  ulimit -n<br>  把用户可打开的并发文件数量改大点，比如改成40000。</p>
<p>  切换成root用户<br>  编辑/etc/security/limits.conf并添加以下两行：<br>  neo4j soft nofile 40000<br>  neo4j hard nofile 40000<br>  编辑/etc/pam.d/su并取消注释或添加以下行：<br>  会话需要pam_limits.so<br>  需要重新启动才能使设置生效。<br>  在上述过程之后，neo4j用户将具有40,000个同时打开文件的限制。如果您继续遇到太多打开文件或Could not stat（）目录的异常，则可能需要进一步提高限制。</p>
<h1 id="6-neo4j-community限制问题"><a href="#6-neo4j-community限制问题" class="headerlink" title="(6)　neo4j-community限制问题"></a>(6)　neo4j-community限制问题</h1><h2 id="org-springframework-dao-DataRetrievalFailureException-‘type‘-on"><a href="#org-springframework-dao-DataRetrievalFailureException-‘type‘-on" class="headerlink" title="org.springframework.dao.DataRetrievalFailureException: ‘type‘ on"></a>org.springframework.dao.DataRetrievalFailureException: ‘<strong>type</strong>‘ on</h2><p><code>org.springframework.dao.DataRetrievalFailureException: &#39;__type__&#39; on </code></p>
<p>neo4j-community 最多允许 2^35个节点，2^35个关系，2^36个属性，属性类型不能超过2^16个<br>属性类型超过65535个了 (类似于MySQL里字段超过65535个)</p>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><p>[1] <a target="_blank" rel="noopener" href="https://neo4j.com/docs/">https://neo4j.com/docs/</a><br>[2] <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/13803609/dataretrievalfailureexception-type-not-found-in-spring-data-neo4j">https://stackoverflow.com/questions/13803609/dataretrievalfailureexception-type-not-found-in-spring-data-neo4j</a><br>[3] <a target="_blank" rel="noopener" href="https://groups.google.com/forum/#!topic/neo4j/aFZCp5T3ABo">https://groups.google.com/forum/#!topic/neo4j/aFZCp5T3ABo</a><br>[4] <a target="_blank" rel="noopener" href="https://github.com/neo4j/neo4j-java-driver/issues/174">https://github.com/neo4j/neo4j-java-driver/issues/174</a><br>[5] <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/37240461/general-sslengine-error-in-neo4j">https://stackoverflow.com/questions/37240461/general-sslengine-error-in-neo4j</a></p>

    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2017/06/09/cypher/" rel="bookmark">Neo4j Cypher 笔记</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2017/05/22/neo4j-admin/" rel="bookmark">neo4j-admin 使用 笔记</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2018/04/17/neo4j-apoc-use/" rel="bookmark">Neo4j APOC 使用</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2017/04/14/neo4j-apoc/" rel="bookmark">Neo4j APOC 初识</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2017/12/25/neo4j-auto-increment-id/" rel="bookmark">Neo4j-auto-increment-id</a></div>
    </li>
  </ul>

        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/img/pay/wechatpay.png" alt="WKQ 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/img/pay/alipay.png" alt="WKQ 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/neo4j/" rel="tag"># neo4j</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2017/05/30/blog-notes/" rel="prev" title="为什么要写博客">
      <i class="fa fa-chevron-left"></i> 为什么要写博客
    </a></div>
      <div class="post-nav-item">
    <a href="/2017/06/02/wikipedia-data-downlaod/" rel="next" title="wikipedia 数据 下载 使用">
      wikipedia 数据 下载 使用 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-%E5%90%AF%E5%8A%A8%E9%97%AE%E9%A2%98"><span class="nav-text">(1)　启动问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-1-Neo4j%E5%90%AF%E5%8A%A8%E6%B2%A1%E5%8F%8D%E5%BA%94%E4%BD%86%E4%B9%9F%E4%B8%8D%E6%8A%A5%E9%94%99"><span class="nav-text">(1.1) Neo4j启动没反应但也不报错</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-2-org-neo4j-server-database-LifecycleManagingDatabase-was-successfully-initialized-but-failed-to-start"><span class="nav-text">(1.2) org.neo4j.server.database.LifecycleManagingDatabase was successfully initialized, but failed to start</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-TLS-private-key-found-but-missing-certificate"><span class="nav-text">(1.3)　TLS private key found, but missing certificate</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-4-browser-scripts-8eea4b31-components-js-org-eclipse-jetty-util-SharedBlockingCallback-BlockerTimeoutException"><span class="nav-text">(1.4)　&#x2F;browser&#x2F;scripts&#x2F;8eea4b31.components.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-5-Not-possible-to-upgrade-a-store-with-version-%E2%80%98v0-A-8%E2%80%99-to-current-store-version-v0-A-7-Neo4j-3-1-0"><span class="nav-text">(1.5)　Not possible to upgrade a store with version ‘v0.A.8’ to current store version v0.A.7 (Neo4j 3.1.0).</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-java-lang-IllegalArgumentException-Base-directory-%E2%80%98C-ProfessionSofware-Neo4j-neo4j-community-3-3-4-certificates-default%E2%80%99-for-SSL-policy-with-name-%E2%80%98default%E2%80%99-does-not-exist"><span class="nav-text">(1.6)  java.lang.IllegalArgumentException: Base directory ‘C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default’ for SSL policy with name ‘default’ does not exist.</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-Neo4j-DespTop-%E5%89%8D%E7%AB%AF%E5%B1%95%E7%A4%BA-%E9%97%AE%E9%A2%98"><span class="nav-text">(2)　Neo4j-DespTop(前端展示)问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-WebSocket-connection-failure"><span class="nav-text">(2.1)　WebSocket connection failure</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E6%89%93%E4%B8%8D%E5%BC%80"><span class="nav-text">前端页面打不开</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E9%97%AE%E9%A2%98"><span class="nav-text">(3)　导入数据问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-1-Expected-%E2%80%98%E2%80%93nodes%E2%80%99-to-have-at-least-1-valid-item-but-had-0"><span class="nav-text">(3.1)　Expected ‘–nodes’ to have at least 1 valid item, but had 0 []</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-2-Error-in-input-data"><span class="nav-text">(3.2)　Error in input data</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-Missing-header-od-type-start-id"><span class="nav-text">(3.2)　Missing header od type start_id</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E5%B7%A5%E7%A8%8B%E9%97%AE%E9%A2%98"><span class="nav-text">(4)　工程问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-Cannot-determine-embedded-database-driver-class-for-database-type-NONE"><span class="nav-text">(4.1)　Cannot determine embedded database driver class for database type NONE.</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-org-neo4j-driver-v1-exceptions-ClientException-You-cannot-begin-a-transaction-on-a-session-with-an-open-transaction"><span class="nav-text">(4.2)　org.neo4j.driver.v1.exceptions.ClientException: You cannot begin a transaction on a session with an open transaction;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-Exception-in-thread-%E2%80%9CThread-0%E2%80%9D-org-neo4j-driver-v1-exceptions-ClientException-Unable-to-connect-to-%E2%80%98172-23-22-27%E2%80%99-on-port-7687-ensure-the-database-is-running-and-that-there-is-a-working-network-connection-to-it"><span class="nav-text">(4.3)　Exception in thread “Thread-0” org.neo4j.driver.v1.exceptions.ClientException: Unable to connect to ‘172.23.22.27’ on port 7687, ensure the database is running and that there is a working network connection to it.</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4-org-neo4j-driver-v1-exceptions-clientException-General-SSLEngine-problem"><span class="nav-text">(4.4)　org.neo4j.driver.v1.exceptions.clientException  General SSLEngine problem</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-5-Caused-by-java-io-IOException-Broken-pipe"><span class="nav-text">(4.5)　Caused by: java.io.IOException: Broken pipe</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-x"><span class="nav-text">(4.x)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-%E9%83%A8%E7%BD%B2%E9%97%AE%E9%A2%98"><span class="nav-text">(5)　部署问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-no-suitable-driver-foune"><span class="nav-text">(5.1)　no suitable driver foune</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-2-WARNING-Max-1024-open-files-allowed-minimum-of-40000-recommended-See-the-Neo4j-manual"><span class="nav-text">(5.2)　WARNING: Max 1024 open files allowed, minimum of 40000 recommended. See the Neo4j manual.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-neo4j-community%E9%99%90%E5%88%B6%E9%97%AE%E9%A2%98"><span class="nav-text">(6)　neo4j-community限制问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#org-springframework-dao-DataRetrievalFailureException-%E2%80%98type%E2%80%98-on"><span class="nav-text">org.springframework.dao.DataRetrievalFailureException: ‘type‘ on</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#References"><span class="nav-text">References</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">WKQ</p>
  <div class="site-description" itemprop="description">不积跬步无以至千里</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">311</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">58</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="sidebar-button motion-element"><i class="fa fa-comment"></i>
    Chat
  </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:weikeqin.cn@gmail.com" title="E-Mail → mailto:weikeqin.cn@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



<script type="text/javascript" src="//rf.revolvermaps.com/0/0/6.js?i=5rcgvdncuwu&amp;m=7&amp;c=e63100&amp;cr1=ffffff&amp;f=arial&amp;l=0&amp;bv=90&amp;lx=-420&amp;ly=420&amp;hi=20&amp;he=7&amp;hc=a8ddff&amp;rs=80" async="async"></script>


      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WKQ</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>




  <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-firestore.js"></script>
  <script>
    firebase.initializeApp({
      apiKey   : 'AIzaSyAvOJeiZUMxRcERhV-fROleWDW_X-WnaVs',
      projectId: 'blog-928ff'
    });

    function getCount(doc, increaseCount) {
      // IncreaseCount will be false when not in article page
      return doc.get().then(d => {
        var count = 0;
        if (!d.exists) { // Has no data, initialize count
          if (increaseCount) {
            doc.set({
              count: 1
            });
            count = 1;
          }
        } else { // Has data
          count = d.data().count;
          if (increaseCount) {
            // If first view this article
            doc.set({ // Increase count
              count: count + 1
            });
            count++;
          }
        }

        return count;
      });
    }

    function appendCountTo(el) {
      return count => {
        el.innerText = count;
      }
    }
  </script>
  <script>
    (function() {
      var db = firebase.firestore();
      var articles = db.collection('articles');

      if (CONFIG.page.isPost) { // Is article page
        var title = document.querySelector('.post-title').innerText.trim();
        var doc = articles.doc(title);
        var increaseCount = CONFIG.hostname === location.hostname;
        if (localStorage.getItem(title)) {
          increaseCount = false;
        } else {
          // Mark as visited
          localStorage.setItem(title, true);
        }
        getCount(doc, increaseCount).then(appendCountTo(document.querySelector('.firestore-visitors-count')));
      } else if (CONFIG.page.isHome) { // Is index page
        var promises = [...document.querySelectorAll('.post-title')].map(element => {
          var title = element.innerText.trim();
          var doc = articles.doc(title);
          return getCount(doc);
        });
        Promise.all(promises).then(counts => {
          var metas = document.querySelectorAll('.firestore-visitors-count');
          counts.forEach((val, idx) => {
            appendCountTo(metas[idx])(val);
          });
        });
      }
    })();
  </script>




      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/valine@1.5.1/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'Ca876j76FoCQi1SShjT0qC6k-gzGzoHsz',
      appKey     : 'IeozLmM20GuvfcslfWgdNXP0',
      placeholder: "期待您的评论",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
