<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"weikeqin.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.9.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="最近测试环境总是莫名的出问题，然后部署服务的容器里除了服务打印的日志，没有其它信息，想看看是什么原因导致服务很卡，是不是有哪块代码占用内存高。 代码执行缓慢、OutOfMemoryError，内存不足、内存泄露、线程死锁、锁争用（Lock Contention）、Java进程消耗CPU过高 都可以使用JDK的命令行工具排查。     (1) JDK的命令行工具  jps、jstat、jinfo">
<meta property="og:type" content="article">
<meta property="og:title" content="JVM性能调优监控工具 jps jstat jinfo jmap jhat jstack">
<meta property="og:url" content="http://weikeqin.com/2020/03/28/jvm-performance-tuning-monitoring-tool/index.html">
<meta property="og:site_name" content="天道酬勤">
<meta property="og:description" content="最近测试环境总是莫名的出问题，然后部署服务的容器里除了服务打印的日志，没有其它信息，想看看是什么原因导致服务很卡，是不是有哪块代码占用内存高。 代码执行缓慢、OutOfMemoryError，内存不足、内存泄露、线程死锁、锁争用（Lock Contention）、Java进程消耗CPU过高 都可以使用JDK的命令行工具排查。     (1) JDK的命令行工具  jps、jstat、jinfo">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-03-28T02:16:25.000Z">
<meta property="article:modified_time" content="2022-05-28T03:51:47.244Z">
<meta property="article:author" content="WKQ">
<meta property="article:tag" content="java">
<meta property="article:tag" content="jvm">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://weikeqin.com/2020/03/28/jvm-performance-tuning-monitoring-tool/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://weikeqin.com/2020/03/28/jvm-performance-tuning-monitoring-tool/","path":"2020/03/28/jvm-performance-tuning-monitoring-tool/","title":"JVM性能调优监控工具 jps jstat jinfo jmap jhat jstack"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>JVM性能调优监控工具 jps jstat jinfo jmap jhat jstack | 天道酬勤</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-113485469-1"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-113485469-1","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?d1ad0ae2a9976c44d556abc07cda1365"></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">天道酬勤</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">天下事有难易乎？为之，则难者亦易矣；不为，则易者亦难矣。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-JDK%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7"><span class="nav-number">1.</span> <span class="nav-text">(1) JDK的命令行工具</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%BF%9B%E7%A8%8B%E7%8A%B6%E5%86%B5%E5%B7%A5%E5%85%B7-jps-JVM-Process-Status-Tool"><span class="nav-number">2.</span> <span class="nav-text">(2) 虚拟机进程状况工具 jps (JVM Process Status Tool)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-jps%E5%91%BD%E4%BB%A4"><span class="nav-number">2.1.</span> <span class="nav-text">(2.1) jps命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-1-jps-%E4%B8%8D%E5%8A%A0%E5%8F%82%E6%95%B0"><span class="nav-number">2.1.1.</span> <span class="nav-text">(2.1.1) jps 不加参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-2-jps-q"><span class="nav-number">2.1.2.</span> <span class="nav-text">(2.1.2) jps -q</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-3-jps-m"><span class="nav-number">2.1.3.</span> <span class="nav-text">(2.1.3) jps -m</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-4-jps-l"><span class="nav-number">2.1.4.</span> <span class="nav-text">(2.1.4) jps -l</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-5-jps-v"><span class="nav-number">2.1.5.</span> <span class="nav-text">(2.1.5) jps -v</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-6-jps-V"><span class="nav-number">2.1.6.</span> <span class="nav-text">(2.1.6) jps -V</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-%E5%B8%B8%E7%94%A8jps%E5%91%BD%E4%BB%A4"><span class="nav-number">2.2.</span> <span class="nav-text">(2.2) 常用jps命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-1-jps-lm"><span class="nav-number">2.2.1.</span> <span class="nav-text">(2.2.1) jps -lm</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-2-jps-lvm"><span class="nav-number">2.2.2.</span> <span class="nav-text">(2.2.2) jps -lvm</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BB%9F%E8%AE%A1%E4%BF%A1%E6%81%AF%E7%9B%91%E8%A7%86%E5%B7%A5%E5%85%B7-jstat-JVM-Statics-Monitoring-Tool"><span class="nav-number">3.</span> <span class="nav-text">(3) 虚拟机统计信息监视工具 jstat (JVM Statics Monitoring Tool)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-jstat%E5%91%BD%E4%BB%A4"><span class="nav-number">3.1.</span> <span class="nav-text">(3.1) jstat命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-1-jstat%E5%91%BD%E4%BB%A4"><span class="nav-number">3.1.1.</span> <span class="nav-text">(3.1.1) jstat命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-1-jstat-class-13050"><span class="nav-number">3.1.2.</span> <span class="nav-text">(3.1.1) jstat -class 13050</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-2-jstat-compiler-13050"><span class="nav-number">3.1.3.</span> <span class="nav-text">(3.1.2) jstat -compiler 13050</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-3-jstat-gc-13050"><span class="nav-number">3.1.4.</span> <span class="nav-text">(3.1.3) jstat -gc 13050</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-4-jstat-gccapacity-13050"><span class="nav-number">3.1.5.</span> <span class="nav-text">(3.1.4) jstat -gccapacity 13050</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-5-jstat-gccause-13050"><span class="nav-number">3.1.6.</span> <span class="nav-text">(3.1.5) jstat -gccause 13050</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-6-jstat-gcmetacapacity-13050"><span class="nav-number">3.1.7.</span> <span class="nav-text">(3.1.6) jstat -gcmetacapacity 13050</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-7-jstat-gcnew-13050"><span class="nav-number">3.1.8.</span> <span class="nav-text">(3.1.7) jstat -gcnew 13050</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-8-jstat-gcnewcapacity-13050"><span class="nav-number">3.1.9.</span> <span class="nav-text">(3.1.8) jstat -gcnewcapacity 13050</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-9-jstat-gcold-13050"><span class="nav-number">3.1.10.</span> <span class="nav-text">(3.1.9) jstat -gcold 13050</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-10-jstat-gcoldcapacity-13050"><span class="nav-number">3.1.11.</span> <span class="nav-text">(3.1.10) jstat -gcoldcapacity 13050</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-11-jstat-gcutil-13050"><span class="nav-number">3.1.12.</span> <span class="nav-text">(3.1.11) jstat -gcutil 13050</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-12-jstat-printcompilation-13050"><span class="nav-number">3.1.13.</span> <span class="nav-text">(3.1.12) jstat -printcompilation 13050</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-%E5%B8%B8%E7%94%A8jstat%E5%91%BD%E4%BB%A4"><span class="nav-number">3.2.</span> <span class="nav-text">(3.2) 常用jstat命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-1-jstat-gc-h5-t-13050-1000-10"><span class="nav-number">3.2.1.</span> <span class="nav-text">(3.2.1) jstat -gc -h5 -t 13050  1000 10</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-2-jstat-gcutil-h5-t-13050-1000-10"><span class="nav-number">3.2.2.</span> <span class="nav-text">(3.2.2) jstat -gcutil -h5 -t 13050  1000 10</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-Java%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%E5%B7%A5%E5%85%B7-jinfo-Java-Configuration-Info"><span class="nav-number">4.</span> <span class="nav-text">(4) Java配置信息工具 jinfo (Java Configuration Info )</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-jinfo%E5%91%BD%E4%BB%A4"><span class="nav-number">4.1.</span> <span class="nav-text">(4.1) jinfo命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-1-jinfo-pid"><span class="nav-number">4.1.1.</span> <span class="nav-text">(4.1.1) jinfo pid</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-2-jinfo-flag-MaxMetaspaceSize-pid"><span class="nav-number">4.1.2.</span> <span class="nav-text">(4.1.2) jinfo -flag MaxMetaspaceSize pid</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-3-jinfo-flag-ThreadStackSize-pid"><span class="nav-number">4.1.3.</span> <span class="nav-text">(4.1.3) jinfo -flag ThreadStackSize pid</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-4-jinfo-flag-MaxNewSize-pid"><span class="nav-number">4.1.4.</span> <span class="nav-text">(4.1.4) jinfo -flag MaxNewSize pid</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-5-jinfo-flag-CMSInitiatingOccupancyFraction-pid"><span class="nav-number">4.1.5.</span> <span class="nav-text">(4.1.5) jinfo -flag CMSInitiatingOccupancyFraction pid</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-6-%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89JVM%E5%8F%82%E6%95%B0-java-XX-PrintFlagsInitial"><span class="nav-number">4.1.6.</span> <span class="nav-text">(4.1.6) 查看所有JVM参数 java -XX:+PrintFlagsInitial</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-7-%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E6%94%AF%E6%8C%81%E5%8A%A8%E6%80%81%E4%BF%AE%E6%94%B9%E7%9A%84JVM%E5%8F%82%E6%95%B0-java-XX-PrintFlagsInitial-grep-manageable"><span class="nav-number">4.1.7.</span> <span class="nav-text">(4.1.7) 查看所有支持动态修改的JVM参数 java -XX:+PrintFlagsInitial | grep manageable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-7-%E8%B0%83%E6%95%B4JVM%E5%8F%82%E6%95%B0-%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.1.8.</span> <span class="nav-text">(4.1.7) 调整JVM参数-布尔类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-8-%E8%B0%83%E6%95%B4JVM%E5%8F%82%E6%95%B0-%E6%95%B0%E5%AD%97-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.1.9.</span> <span class="nav-text">(4.1.8) 调整JVM参数-数字&#x2F;字符串类型</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-Java%E5%86%85%E5%AD%98%E6%98%A0%E5%83%8F%E5%B7%A5%E5%85%B7-jmap"><span class="nav-number">5.</span> <span class="nav-text">(5) Java内存映像工具 jmap</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-jmap%E5%91%BD%E4%BB%A4"><span class="nav-number">5.1.</span> <span class="nav-text">(5.1) jmap命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-1-jmap-pid"><span class="nav-number">5.1.1.</span> <span class="nav-text">(5.1.1) jmap pid</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-2-jmap-dump-live-format-b-file-file-path"><span class="nav-number">5.1.2.</span> <span class="nav-text">(5.1.2) jmap -dump:[live,] format&#x3D;b, file&#x3D;file_path</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-3-jmap-finalizerinfo-pid"><span class="nav-number">5.1.3.</span> <span class="nav-text">(5.1.3) jmap -finalizerinfo pid</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-4-jmap-heap-pid"><span class="nav-number">5.1.4.</span> <span class="nav-text">(5.1.4) jmap -heap pid</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-5-jmap-histo-pid"><span class="nav-number">5.1.5.</span> <span class="nav-text">(5.1.5) jmap -histo pid</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-6-jmap-clstats-pid"><span class="nav-number">5.1.6.</span> <span class="nav-text">(5.1.6) jmap -clstats pid</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%A0%86%E8%BD%AC%E5%82%A8%E5%BF%AB%E7%85%A7%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7-jhat"><span class="nav-number">6.</span> <span class="nav-text">(6) 虚拟机堆转储快照分析工具 jhat</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-Java%E5%A0%86%E6%A0%88%E8%B7%9F%E8%B8%AA%E5%B7%A5%E5%85%B7-jstack-Java-Stack-Trace"><span class="nav-number">7.</span> <span class="nav-text">(7) Java堆栈跟踪工具 jstack (Java Stack Trace)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1-jstack%E5%91%BD%E4%BB%A4"><span class="nav-number">7.1.</span> <span class="nav-text">(7.1) jstack命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-1-jstack-pid"><span class="nav-number">7.1.1.</span> <span class="nav-text">(7.1.1) jstack pid</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-2-jstack-l-pid"><span class="nav-number">7.1.2.</span> <span class="nav-text">(7.1.2) jstack -l pid</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-Java%E7%9B%91%E8%A7%86%E4%B8%8E%E7%AE%A1%E7%90%86%E6%8E%A7%E5%88%B6%E5%8F%B0-JConsole-Java-Monitoring-and-Managerment-Console"><span class="nav-number">8.</span> <span class="nav-text">(8) Java监视与管理控制台 JConsole (Java Monitoring and Managerment Console)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-%E5%A4%9A%E5%90%88%E4%B8%80%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7-VisuaIVM-All-in-One-Java-Troubleshooting-Tool"><span class="nav-number">9.</span> <span class="nav-text">(9) 多合一故障处理工具 VisuaIVM (All-in-One Java Troubleshooting Tool)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#References"><span class="nav-number">10.</span> <span class="nav-text">References</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">WKQ</p>
  <div class="site-description" itemprop="description">不积跬步无以至千里</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">258</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">52</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/yourname" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yourname" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:weikeqincn@gmail.com" title="E-Mail → mailto:weikeqincn@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://plus.google.com/u/0/107737814703120725006" title="Google → https:&#x2F;&#x2F;plus.google.com&#x2F;u&#x2F;0&#x2F;107737814703120725006" rel="noopener" target="_blank"><i class="fab fa-google fa-fw"></i>Google</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/wkq278276130" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;wkq278276130" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/keqin.wei.5" title="FB Page → https:&#x2F;&#x2F;www.facebook.com&#x2F;keqin.wei.5" rel="noopener" target="_blank"><i class="fab fa-facebook fa-fw"></i>FB Page</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://stackoverflow.com/users/8054088/wkq" title="StackOverflow → https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;8054088&#x2F;wkq" rel="noopener" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>StackOverflow</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://weikeqin.com/2020/03/28/jvm-performance-tuning-monitoring-tool/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="WKQ">
      <meta itemprop="description" content="不积跬步无以至千里">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天道酬勤">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          JVM性能调优监控工具 jps jstat jinfo jmap jhat jstack
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-28 10:16:25" itemprop="dateCreated datePublished" datetime="2020-03-28T10:16:25+08:00">2020-03-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-28 11:51:47" itemprop="dateModified" datetime="2022-05-28T11:51:47+08:00">2022-05-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/jvm/" itemprop="url" rel="index"><span itemprop="name">jvm</span></a>
        </span>
    </span>

  
    <span id="/2020/03/28/jvm-performance-tuning-monitoring-tool/" class="post-meta-item leancloud_visitors" data-flag-title="JVM性能调优监控工具 jps jstat jinfo jmap jhat jstack" title="阅读次数">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span class="leancloud-visitors-count"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <blockquote>
<p> 最近测试环境总是莫名的出问题，然后部署服务的容器里除了服务打印的日志，没有其它信息，想看看是什么原因导致服务很卡，是不是有哪块代码占用内存高。<br> 代码执行缓慢、OutOfMemoryError，内存不足、内存泄露、线程死锁、锁争用（Lock Contention）、Java进程消耗CPU过高 都可以使用JDK的命令行工具排查。</p>
</blockquote>
<br>


<h1 id="1-JDK的命令行工具"><a href="#1-JDK的命令行工具" class="headerlink" title="(1) JDK的命令行工具"></a>(1) JDK的命令行工具</h1><blockquote>
<p> jps、jstat、jinfo、jmap、jhat、jstack、hprof<br>jps : 虚拟机进程状况工具<br>jstat : 虚拟机统计信息监视工具<br>jinfo : Java 配置信息工具<br>jmap : Java 内存映像工具<br>jhat : 虚拟机堆转储快照分析工具<br>jstack : Java 堆栈跟踪工具</p>
</blockquote>
<blockquote>
<p> jps将打印所有正在运行的 Java 进程。<br> jstat允许用户查看目标 Java 进程的类加载、即时编译以及垃圾回收相关的信息。它常用于检测垃圾回收问题以及内存泄漏问题。<br> jmap允许用户统计目标 Java 进程的堆中存放的 Java 对象，并将它们导出成二进制文件。<br> jinfo将打印目标 Java 进程的配置参数，并能够改动其中 manageabe 的参数。<br> jstack将打印目标 Java 进程中各个线程的栈轨迹、线程状态、锁状况等信息。它还将自动检测死锁。<br> jcmd则是一把瑞士军刀，可以用来实现前面除了jstat之外所有命令的功能。</p>
</blockquote>
<p>Java虚拟机的监控及诊断工具-GUI</p>
<blockquote>
<p>JConsole : Java 监视与管理控制台<br>VisualVM : 多合一故障处理工具<br>eclipse MAT<br>JMC<br>JITWatch</p>
</blockquote>
<br>



<h1 id="2-虚拟机进程状况工具-jps-JVM-Process-Status-Tool"><a href="#2-虚拟机进程状况工具-jps-JVM-Process-Status-Tool" class="headerlink" title="(2) 虚拟机进程状况工具 jps (JVM Process Status Tool)"></a>(2) 虚拟机进程状况工具 jps (JVM Process Status Tool)</h1><blockquote>
<p> jps主要用来输出JVM中运行的进程状态信息。<br> jps命令使用Java启动器来查找传递给main方法的类名和参数。</p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jps <span class="token operator">-</span>help
<span class="token property">usage:</span> jps <span class="token punctuation">[</span><span class="token operator">-</span>help<span class="token punctuation">]</span>
       jps <span class="token punctuation">[</span><span class="token operator">-</span>q<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>mlvV<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>hostid<span class="token operator">></span><span class="token punctuation">]</span>

<span class="token property">Definitions:</span>
    <span class="token operator">&lt;</span>hostid<span class="token operator">></span><span class="token operator">:</span>      <span class="token operator">&lt;</span>hostname<span class="token operator">></span><span class="token punctuation">[</span><span class="token operator">:</span><span class="token operator">&lt;</span>port<span class="token operator">></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="2-1-jps命令"><a href="#2-1-jps命令" class="headerlink" title="(2.1) jps命令"></a>(2.1) jps命令</h2><blockquote>
<p>jps命令用于输出JVM中运行的进程状态信息。可以获取到进程的pid、全限定名、传入main方法的参数、传入JVM的参数 等。</p>
</blockquote>
<blockquote>
<p>语法格式</p>
</blockquote>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">jps [ options ] [ hostid ]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>  如果不指定hostid就默认为当前主机或服务器。</p>
<p>  详细信息见 <code>man jps</code></p>
<h3 id="2-1-1-jps-不加参数"><a href="#2-1-1-jps-不加参数" class="headerlink" title="(2.1.1) jps 不加参数"></a>(2.1.1) jps 不加参数</h3><blockquote>
<p> 在本地主机上搜索检测到的JVM。</p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jps
<span class="token number">14916</span> Jps
<span class="token number">13050</span> Elasticsearch
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<span id="more"></span>

<h3 id="2-1-2-jps-q"><a href="#2-1-2-jps-q" class="headerlink" title="(2.1.2) jps -q"></a>(2.1.2) jps -q</h3><blockquote>
<p>不输出类名、Jar名和传入main方法的参数</p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jps <span class="token operator">-</span>q
<span class="token number">15059</span>
<span class="token number">13050</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="2-1-3-jps-m"><a href="#2-1-3-jps-m" class="headerlink" title="(2.1.3) jps -m"></a>(2.1.3) jps -m</h3><blockquote>
<p>显示传递给main方法的参数。对于嵌入式JVM，输出可能为null。</p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jps <span class="token operator">-</span>m
<span class="token number">15092</span> Jps <span class="token operator">-</span>m
<span class="token number">13050</span> Elasticsearch <span class="token operator">-</span>d
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="2-1-4-jps-l"><a href="#2-1-4-jps-l" class="headerlink" title="(2.1.4) jps -l"></a>(2.1.4) jps -l</h3><blockquote>
<p>输出main类或Jar的全限定名</p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jps <span class="token operator">-</span>l
<span class="token number">15139</span> sun<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>jps<span class="token punctuation">.</span>Jps
<span class="token number">13050</span> org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>bootstrap<span class="token punctuation">.</span>Elasticsearch
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="2-1-5-jps-v"><a href="#2-1-5-jps-v" class="headerlink" title="(2.1.5) jps -v"></a>(2.1.5) jps -v</h3><blockquote>
<p>显示传递给JVM的参数。</p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jps <span class="token operator">-</span>v
<span class="token number">15157</span> Jps <span class="token operator">-</span>Denv<span class="token punctuation">.</span>class<span class="token punctuation">.</span>path<span class="token operator">=</span><span class="token punctuation">.</span><span class="token operator">:</span><span class="token file-path string">/home/wkq/software/jdk1.8.0_172/lib/dt.jar</span><span class="token operator">:</span><span class="token file-path string">/home/wkq/software/jdk1.8.0_172/lib/tools.jar</span> <span class="token operator">-</span>Dapplication<span class="token punctuation">.</span>home<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>wkq<span class="token operator">/</span>software<span class="token operator">/</span>jdk1<span class="token punctuation">.</span>8<span class="token punctuation">.</span>0_172 <span class="token operator">-</span>Xms8m
<span class="token number">13050</span> Elasticsearch <span class="token operator">-</span>Xms1g <span class="token operator">-</span>Xmx1g <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseConcMarkSweepGC <span class="token operator">-</span>XX<span class="token operator">:</span>CMSInitiatingOccupancyFraction<span class="token operator">=</span><span class="token number">75</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseCMSInitiatingOccupancyOnly <span class="token operator">-</span>Des<span class="token punctuation">.</span>networkaddress<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>ttl<span class="token operator">=</span><span class="token number">60</span> <span class="token operator">-</span>Des<span class="token punctuation">.</span>networkaddress<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>negative<span class="token punctuation">.</span>ttl<span class="token operator">=</span><span class="token number">10</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>AlwaysPreTouch <span class="token operator">-</span>Xss1m <span class="token operator">-</span>Djava<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>headless<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Dfile<span class="token punctuation">.</span>encoding<span class="token operator">=</span>UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>Djna<span class="token punctuation">.</span>nosys<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">-</span>OmitStackTraceInFastThrow <span class="token operator">-</span>Dio<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>noUnsafe<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Dio<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>noKeySetOptimization<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Dio<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>recycler<span class="token punctuation">.</span>maxCapacityPerThread<span class="token operator">=</span><span class="token number">0</span> <span class="token operator">-</span>Dlog4j<span class="token punctuation">.</span>shutdownHookEnabled<span class="token operator">=</span><span class="token boolean">false</span> <span class="token operator">-</span>Dlog4j2<span class="token punctuation">.</span>disable<span class="token punctuation">.</span>jmx<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Djava<span class="token punctuation">.</span>io<span class="token punctuation">.</span>tmpdir<span class="token operator">=</span><span class="token operator">/</span>tmp<span class="token operator">/</span>elasticsearch<span class="token operator">-</span><span class="token number">5035355569386013893</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>HeapDumpOnOutOfMemoryError <span class="token operator">-</span>XX<span class="token operator">:</span>HeapDumpPath<span class="token operator">=</span>data <span class="token operator">-</span>XX<span class="token operator">:</span>ErrorFile<span class="token operator">=</span>logs<span class="token operator">/</span>hs_err_pid<span class="token operator">%</span>p<span class="token punctuation">.</span>log <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCDetails <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCDateStamps <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintTenuringDistribution <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCApplicationStoppedTime <span class="token operator">-</span>Xloggc<span class="token operator">:</span>logs<span class="token operator">/</span>gc<span class="token punctuation">.</span>log <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseGCLogFileRotation <span class="token operator">-</span>XX<span class="token operator">:</span>NumberOfGCLogFiles<span class="token operator">=</span><span class="token number">32</span> <span class="token operator">-</span>XX<span class="token operator">:</span>GCLogFileSize<span class="token operator">=</span><span class="token number">64m</span> <span class="token operator">-</span>Des<span class="token punctuation">.</span>path<span class="token punctuation">.</span>home<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>wkq<span class="token operator">/</span>software<span class="token operator">/</span>elasticsearch<span class="token operator">-</span><span class="token number">6.6.2</span> <span class="token operator">-</span>Des<span class="token punctuation">.</span>path<span class="token punctuation">.</span>conf<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>wkq<span class="token operator">/</span>software<span class="token operator">/</span>elasticsearch<span class="token operator">-</span><span class="token number">6.6.2</span><span class="token operator">/</span>config <span class="token operator">-</span>Des<span class="token punctuation">.</span>distribution<span class="token punctuation">.</span>flavor<span class="token operator">=</span>default <span class="token operator">-</span>Des<span class="token punctuation">.</span>distribution<span class="token punctuation">.</span>type<span class="token operator">=</span>tar
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="2-1-6-jps-V"><a href="#2-1-6-jps-V" class="headerlink" title="(2.1.6) jps -V"></a>(2.1.6) jps -V</h3><blockquote>
<p>禁止输出类名，JAR全限定名和传递给main方法的参数的输出，从而产生仅本地JVM标识符的列表。</p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jps <span class="token operator">-</span>V
<span class="token number">15204</span> Jps
<span class="token number">13050</span> Elasticsearch
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="2-2-常用jps命令"><a href="#2-2-常用jps命令" class="headerlink" title="(2.2) 常用jps命令"></a>(2.2) 常用jps命令</h2><h3 id="2-2-1-jps-lm"><a href="#2-2-1-jps-lm" class="headerlink" title="(2.2.1) jps -lm"></a>(2.2.1) jps -lm</h3><blockquote>
<p>显示 pid、全限定名、传递给main方法的参数</p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jps <span class="token operator">-</span>lm
<span class="token number">17539</span> sun<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>jps<span class="token punctuation">.</span>Jps <span class="token operator">-</span>lm
<span class="token number">13050</span> org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>bootstrap<span class="token punctuation">.</span>Elasticsearch <span class="token operator">-</span>d
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="2-2-2-jps-lvm"><a href="#2-2-2-jps-lvm" class="headerlink" title="(2.2.2) jps -lvm"></a>(2.2.2) jps -lvm</h3><blockquote>
<p>显示 pid、全限定名、传递给main方法的参数、传递给JVM的参数</p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jps <span class="token operator">-</span>lvm
<span class="token number">13050</span> org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>bootstrap<span class="token punctuation">.</span>Elasticsearch <span class="token operator">-</span>d <span class="token operator">-</span>Xms1g <span class="token operator">-</span>Xmx1g <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseConcMarkSweepGC <span class="token operator">-</span>XX<span class="token operator">:</span>CMSInitiatingOccupancyFraction<span class="token operator">=</span><span class="token number">75</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseCMSInitiatingOccupancyOnly <span class="token operator">-</span>Des<span class="token punctuation">.</span>networkaddress<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>ttl<span class="token operator">=</span><span class="token number">60</span> <span class="token operator">-</span>Des<span class="token punctuation">.</span>networkaddress<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>negative<span class="token punctuation">.</span>ttl<span class="token operator">=</span><span class="token number">10</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>AlwaysPreTouch <span class="token operator">-</span>Xss1m <span class="token operator">-</span>Djava<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>headless<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Dfile<span class="token punctuation">.</span>encoding<span class="token operator">=</span>UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>Djna<span class="token punctuation">.</span>nosys<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">-</span>OmitStackTraceInFastThrow <span class="token operator">-</span>Dio<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>noUnsafe<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Dio<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>noKeySetOptimization<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Dio<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>recycler<span class="token punctuation">.</span>maxCapacityPerThread<span class="token operator">=</span><span class="token number">0</span> <span class="token operator">-</span>Dlog4j<span class="token punctuation">.</span>shutdownHookEnabled<span class="token operator">=</span><span class="token boolean">false</span> <span class="token operator">-</span>Dlog4j2<span class="token punctuation">.</span>disable<span class="token punctuation">.</span>jmx<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Djava<span class="token punctuation">.</span>io<span class="token punctuation">.</span>tmpdir<span class="token operator">=</span><span class="token operator">/</span>tmp<span class="token operator">/</span>elasticsearch<span class="token operator">-</span><span class="token number">5035355569386013893</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>HeapDumpOnOutOfMemoryError <span class="token operator">-</span>XX<span class="token operator">:</span>HeapDumpPath<span class="token operator">=</span>data <span class="token operator">-</span>XX<span class="token operator">:</span>ErrorFile<span class="token operator">=</span>logs<span class="token operator">/</span>hs_err_pid<span class="token operator">%</span>p<span class="token punctuation">.</span>log <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCDetails <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCDateStamps <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintTenuringDistribution <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCApplicationStoppedTime <span class="token operator">-</span>Xloggc<span class="token operator">:</span>logs<span class="token operator">/</span>gc<span class="token punctuation">.</span>log <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseGCLogFileRotation <span class="token operator">-</span>XX<span class="token operator">:</span>NumberOfGCLogFiles<span class="token operator">=</span><span class="token number">32</span> <span class="token operator">-</span>XX<span class="token operator">:</span>GCLogFileSize<span class="token operator">=</span><span class="token number">64m</span> <span class="token operator">-</span>Des<span class="token punctuation">.</span>path<span class="token punctuation">.</span>home<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>wkq<span class="token operator">/</span>software<span class="token operator">/</span>elasticsearch<span class="token operator">-</span><span class="token number">6.6.2</span> <span class="token operator">-</span>Des<span class="token punctuation">.</span>path<span class="token punctuation">.</span>conf<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>wkq<span class="token operator">/</span>software<span class="token operator">/</span>elasticsearch<span class="token operator">-</span><span class="token number">6.6.2</span><span class="token operator">/</span>config <span class="token operator">-</span>Des<span class="token punctuation">.</span>distribution<span class="token punctuation">.</span>flavor<span class="token operator">=</span>default <span class="token operator">-</span>Des<span class="token punctuation">.</span>distribution<span class="token punctuation">.</span>type<span class="token operator">=</span>tar
<span class="token number">17567</span> sun<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>jps<span class="token punctuation">.</span>Jps <span class="token operator">-</span>lvm <span class="token operator">-</span>Denv<span class="token punctuation">.</span>class<span class="token punctuation">.</span>path<span class="token operator">=</span><span class="token punctuation">.</span><span class="token operator">:</span><span class="token file-path string">/home/wkq/software/jdk1.8.0_172/lib/dt.jar</span><span class="token operator">:</span><span class="token file-path string">/home/wkq/software/jdk1.8.0_172/lib/tools.jar</span> <span class="token operator">-</span>Dapplication<span class="token punctuation">.</span>home<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>wkq<span class="token operator">/</span>software<span class="token operator">/</span>jdk1<span class="token punctuation">.</span>8<span class="token punctuation">.</span>0_172 <span class="token operator">-</span>Xms8m
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<br>




<h1 id="3-虚拟机统计信息监视工具-jstat-JVM-Statics-Monitoring-Tool"><a href="#3-虚拟机统计信息监视工具-jstat-JVM-Statics-Monitoring-Tool" class="headerlink" title="(3) 虚拟机统计信息监视工具 jstat (JVM Statics Monitoring Tool)"></a>(3) 虚拟机统计信息监视工具 jstat (JVM Statics Monitoring Tool)</h1><blockquote>
<p> jstat是用于监视虚拟机各种运行状态信息的命令行工具。</p>
</blockquote>
<h2 id="3-1-jstat命令"><a href="#3-1-jstat命令" class="headerlink" title="(3.1) jstat命令"></a>(3.1) jstat命令</h2><blockquote>
<p> 语法格式</p>
</blockquote>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">jstat [ generalOption | outputOptions vmid [ interval[s|ms] [ count ] ]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>  详细信息见 <code>man jstat</code></p>
<h3 id="3-1-1-jstat命令"><a href="#3-1-1-jstat命令" class="headerlink" title="(3.1.1) jstat命令"></a>(3.1.1) jstat命令</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstat <span class="token operator">-</span>help
<span class="token property">Usage:</span> jstat <span class="token operator">-</span>help<span class="token operator">|</span><span class="token operator">-</span>options
       jstat <span class="token operator">-</span><span class="token operator">&lt;</span>option<span class="token operator">></span> <span class="token punctuation">[</span><span class="token operator">-</span>t<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>h<span class="token operator">&lt;</span>lines<span class="token operator">></span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>vmid<span class="token operator">></span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>interval<span class="token operator">></span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>count<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">]</span>

<span class="token property">Definitions:</span>
  <span class="token operator">&lt;</span>option<span class="token operator">></span>      An option reported by the <span class="token operator">-</span>options option
  <span class="token operator">&lt;</span>vmid<span class="token operator">></span>        Virtual Machine Identifier<span class="token punctuation">.</span> A vmid takes the following form<span class="token operator">:</span>
                     <span class="token operator">&lt;</span>lvmid<span class="token operator">></span><span class="token punctuation">[</span><span class="token operator">@</span><span class="token operator">&lt;</span>hostname<span class="token operator">></span><span class="token punctuation">[</span><span class="token operator">:</span><span class="token operator">&lt;</span>port<span class="token operator">></span><span class="token punctuation">]</span><span class="token punctuation">]</span>
                Where <span class="token operator">&lt;</span>lvmid<span class="token operator">></span> is the local vm identifier for the target
                Java virtual machine<span class="token punctuation">,</span> typically a process id<span class="token operator">;</span> <span class="token operator">&lt;</span>hostname<span class="token operator">></span> is
                the name of the host running the target Java virtual machine<span class="token operator">;</span>
                and <span class="token operator">&lt;</span>port<span class="token operator">></span> is the port number for the rmiregistry on the
                target host<span class="token punctuation">.</span> See the jvmstat documentation for a more complete
                description of the Virtual Machine Identifier<span class="token punctuation">.</span>
  <span class="token operator">&lt;</span>lines<span class="token operator">></span>       Number of samples between header lines<span class="token punctuation">.</span>
  <span class="token operator">&lt;</span>interval<span class="token operator">></span>    Sampling interval<span class="token punctuation">.</span> The following forms are allowed<span class="token operator">:</span>
                    <span class="token operator">&lt;</span>n<span class="token operator">></span><span class="token punctuation">[</span><span class="token string">"ms"</span><span class="token operator">|</span><span class="token string">"s"</span><span class="token punctuation">]</span>
                Where <span class="token operator">&lt;</span>n<span class="token operator">></span> is an integer and the suffix specifies the units as
                milliseconds<span class="token operator">(</span><span class="token string">"ms"</span><span class="token operator">)</span> or seconds<span class="token operator">(</span><span class="token string">"s"</span><span class="token operator">)</span><span class="token punctuation">.</span> The default units are <span class="token string">"ms"</span><span class="token punctuation">.</span>
  <span class="token operator">&lt;</span>count<span class="token operator">></span>       Number of samples to take before terminating<span class="token punctuation">.</span>
  <span class="token operator">-</span>J<span class="token operator">&lt;</span>flag<span class="token operator">></span>      Pass <span class="token operator">&lt;</span>flag<span class="token operator">></span> directly to the runtime system<span class="token punctuation">.</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span>  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstat <span class="token operator">-</span>options
<span class="token operator">-</span>class
<span class="token operator">-</span>compiler
<span class="token operator">-</span>gc
<span class="token operator">-</span>gccapacity
<span class="token operator">-</span>gccause
<span class="token operator">-</span>gcmetacapacity
<span class="token operator">-</span>gcnew
<span class="token operator">-</span>gcnewcapacity
<span class="token operator">-</span>gcold
<span class="token operator">-</span>gcoldcapacity
<span class="token operator">-</span>gcutil
<span class="token operator">-</span>printcompilation
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<br>


<h3 id="3-1-1-jstat-class-13050"><a href="#3-1-1-jstat-class-13050" class="headerlink" title="(3.1.1) jstat -class 13050"></a>(3.1.1) jstat -class 13050</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstat <span class="token operator">-</span>class <span class="token number">13050</span>
Loaded  Bytes  Unloaded  Bytes     Time
 <span class="token number">15177</span> <span class="token number">27005.8</span>       <span class="token number">41</span>    <span class="token number">49.7</span>      <span class="token number">24.44</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-1-2-jstat-compiler-13050"><a href="#3-1-2-jstat-compiler-13050" class="headerlink" title="(3.1.2) jstat -compiler 13050"></a>(3.1.2) jstat -compiler 13050</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span>  jstat <span class="token operator">-</span>compiler <span class="token number">13050</span>
Compiled Failed Invalid   Time   FailedType FailedMethod
    <span class="token number">7469</span>      <span class="token number">0</span>       <span class="token number">0</span>    <span class="token number">43.18</span>          <span class="token number">0</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-1-3-jstat-gc-13050"><a href="#3-1-3-jstat-gc-13050" class="headerlink" title="(3.1.3) jstat -gc 13050"></a>(3.1.3) jstat -gc 13050</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstat <span class="token operator">-</span>gc <span class="token number">13050</span>
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT
<span class="token number">8512.0</span> <span class="token number">8512.0</span>  <span class="token number">0.0</span>    <span class="token number">24.5</span>  <span class="token number">68160.0</span>   <span class="token number">6380.0</span>   <span class="token number">963392.0</span>   <span class="token number">61694.4</span>   <span class="token number">77732.0</span> <span class="token number">71385.7</span> <span class="token number">11984.0</span> <span class="token number">9862.8</span>     <span class="token number">69</span>    <span class="token number">2.112</span>   <span class="token number">6</span>      <span class="token number">0.286</span>    <span class="token number">2.397</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
<th>原文</th>
</tr>
</thead>
<tbody><tr>
<td>S0C</td>
<td>年轻代中第一个survivor 的容量  (kB)</td>
<td>Current survivor space 0 capacity (kB).</td>
</tr>
<tr>
<td>S1C</td>
<td>年轻代中第二个survivor 的容量  (kB)</td>
<td>Current survivor space 1 capacity (kB).</td>
</tr>
<tr>
<td>S0U</td>
<td>年轻代中第一个survivor 已使用空间   (kB)</td>
<td>Survivor space 0 utilization (kB).</td>
</tr>
<tr>
<td>S1U</td>
<td>年轻代中第二个survivor已使用空间   (kB)</td>
<td>Survivor space 1 utilization (kB).</td>
</tr>
<tr>
<td>EC</td>
<td>年轻代中 Eden space 的容量  (kB)</td>
<td>Current eden space capacity (kB).</td>
</tr>
<tr>
<td>EU</td>
<td>年轻代中Eden space 目前已使用空间  (kB)</td>
<td>Eden space utilization (kB).</td>
</tr>
<tr>
<td>OC</td>
<td>Old space的容量  (kB)</td>
<td>Current old space capacity (kB).</td>
</tr>
<tr>
<td>OU</td>
<td>Old space 已使用空间  (kB)</td>
<td>Old space utilization (kB).</td>
</tr>
<tr>
<td>MC</td>
<td>Metaspace 的容量  (kB)</td>
<td>Metaspace capacity (kB).</td>
</tr>
<tr>
<td>MU</td>
<td>Metaspace 已使用空间  (kB)</td>
<td>Metacspace utilization (kB).</td>
</tr>
<tr>
<td>CCSC</td>
<td>Compressed class spcage 容量 (kB)</td>
<td>Compressed class space capacity (kB).</td>
</tr>
<tr>
<td>CCSU</td>
<td>Compressed class spcage 已使用空间 (kB)</td>
<td>Compressed class space used (kB).</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时年轻代中gc次数</td>
<td>Number of young generation garbage collection events.</td>
</tr>
<tr>
<td>YGCT</td>
<td>从应用程序启动到采样时年轻代中gc所用时间 (s)</td>
<td>Young generation garbage collection time.</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时old代 (全gc) gc次数</td>
<td>Number of full GC events.</td>
</tr>
<tr>
<td>FGCT</td>
<td>从应用程序启动到采样时old代 (全gc) gc所用时间 (s)</td>
<td>Full garbage collection time.</td>
</tr>
<tr>
<td>GCT</td>
<td>从应用程序启动到采样时gc用的总时间 (s)</td>
<td>Total garbage collection time.</td>
</tr>
</tbody></table>
<h3 id="3-1-4-jstat-gccapacity-13050"><a href="#3-1-4-jstat-gccapacity-13050" class="headerlink" title="(3.1.4) jstat -gccapacity 13050"></a>(3.1.4) jstat -gccapacity 13050</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstat <span class="token operator">-</span>gccapacity <span class="token number">13050</span>
 NGCMN    NGCMX     NGC     S0C   S1C       EC      OGCMN      OGCMX       OGC         OC       MCMN     MCMX      MC     CCSMN    CCSMX     CCSC    YGC    FGC
 <span class="token number">85184.0</span>  <span class="token number">85184.0</span>  <span class="token number">85184.0</span> <span class="token number">8512.0</span> <span class="token number">8512.0</span>  <span class="token number">68160.0</span>   <span class="token number">963392.0</span>   <span class="token number">963392.0</span>   <span class="token number">963392.0</span>   <span class="token number">963392.0</span>      <span class="token number">0.0</span> <span class="token number">1116160.0</span>  <span class="token number">77732.0</span>      <span class="token number">0.0</span> <span class="token number">1048576.0</span>  <span class="token number">11984.0</span>     <span class="token number">69</span>     <span class="token number">6</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-1-5-jstat-gccause-13050"><a href="#3-1-5-jstat-gccause-13050" class="headerlink" title="(3.1.5) jstat -gccause 13050"></a>(3.1.5) jstat -gccause 13050</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstat <span class="token operator">-</span>gccause <span class="token number">13050</span>
  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT    LGCC                 GCC
  <span class="token number">0.00</span>   <span class="token number">0.29</span>  <span class="token number">11.90</span>   <span class="token number">6.40</span>  <span class="token number">91.84</span>  <span class="token number">82.30</span>     <span class="token number">69</span>    <span class="token number">2.112</span>     <span class="token number">6</span>    <span class="token number">0.286</span>    <span class="token number">2.397</span> Allocation Failure   No GC
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-1-6-jstat-gcmetacapacity-13050"><a href="#3-1-6-jstat-gcmetacapacity-13050" class="headerlink" title="(3.1.6) jstat -gcmetacapacity 13050"></a>(3.1.6) jstat -gcmetacapacity 13050</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstat <span class="token operator">-</span>gcmetacapacity <span class="token number">13050</span>
   MCMN       MCMX        MC       CCSMN      CCSMX       CCSC     YGC   FGC    FGCT     GCT
       <span class="token number">0.0</span>  <span class="token number">1116160.0</span>    <span class="token number">77732.0</span>        <span class="token number">0.0</span>  <span class="token number">1048576.0</span>    <span class="token number">11984.0</span>    <span class="token number">69</span>     <span class="token number">6</span>    <span class="token number">0.286</span>    <span class="token number">2.397</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-1-7-jstat-gcnew-13050"><a href="#3-1-7-jstat-gcnew-13050" class="headerlink" title="(3.1.7) jstat -gcnew 13050"></a>(3.1.7) jstat -gcnew 13050</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstat <span class="token operator">-</span>gcnew <span class="token number">13050</span>
 S0C    S1C    S0U    S1U   TT MTT  DSS      EC       EU     YGC     YGCT
<span class="token number">8512.0</span> <span class="token number">8512.0</span>    <span class="token number">0.0</span>   <span class="token number">24.5</span>  <span class="token number">6</span>   <span class="token number">6</span> <span class="token number">4256.0</span>  <span class="token number">68160.0</span>  <span class="token number">13229.3</span>     <span class="token number">69</span>    <span class="token number">2.112</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-1-8-jstat-gcnewcapacity-13050"><a href="#3-1-8-jstat-gcnewcapacity-13050" class="headerlink" title="(3.1.8) jstat -gcnewcapacity 13050"></a>(3.1.8) jstat -gcnewcapacity 13050</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstat <span class="token operator">-</span>gcnewcapacity <span class="token number">13050</span>
  NGCMN      NGCMX       NGC      S0CMX     S0C     S1CMX     S1C       ECMX        EC      YGC   FGC
   <span class="token number">85184.0</span>    <span class="token number">85184.0</span>    <span class="token number">85184.0</span>   <span class="token number">8512.0</span>   <span class="token number">8512.0</span>   <span class="token number">8512.0</span>   <span class="token number">8512.0</span>    <span class="token number">68160.0</span>    <span class="token number">68160.0</span>    <span class="token number">69</span>     <span class="token number">6</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-1-9-jstat-gcold-13050"><a href="#3-1-9-jstat-gcold-13050" class="headerlink" title="(3.1.9) jstat -gcold 13050"></a>(3.1.9) jstat -gcold 13050</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstat <span class="token operator">-</span>gcold <span class="token number">13050</span>
   MC       MU      CCSC     CCSU       OC          OU       YGC    FGC    FGCT     GCT
 <span class="token number">77732.0</span>  <span class="token number">71385.7</span>  <span class="token number">11984.0</span>   <span class="token number">9862.8</span>    <span class="token number">963392.0</span>     <span class="token number">61694.4</span>     <span class="token number">69</span>     <span class="token number">6</span>    <span class="token number">0.286</span>    <span class="token number">2.397</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="3-1-10-jstat-gcoldcapacity-13050"><a href="#3-1-10-jstat-gcoldcapacity-13050" class="headerlink" title="(3.1.10) jstat -gcoldcapacity 13050"></a>(3.1.10) jstat -gcoldcapacity 13050</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstat <span class="token operator">-</span>gcoldcapacity <span class="token number">13050</span>
   OGCMN       OGCMX        OGC         OC       YGC   FGC    FGCT     GCT
   <span class="token number">963392.0</span>    <span class="token number">963392.0</span>    <span class="token number">963392.0</span>    <span class="token number">963392.0</span>    <span class="token number">69</span>     <span class="token number">6</span>    <span class="token number">0.286</span>    <span class="token number">2.397</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="3-1-11-jstat-gcutil-13050"><a href="#3-1-11-jstat-gcutil-13050" class="headerlink" title="(3.1.11) jstat -gcutil 13050"></a>(3.1.11) jstat -gcutil 13050</h3><blockquote>
<p>垃圾回收状态摘要</p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstat <span class="token operator">-</span>gcutil <span class="token number">13050</span>
  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT
  <span class="token number">0.00</span>   <span class="token number">0.29</span>  <span class="token number">24.37</span>   <span class="token number">6.40</span>  <span class="token number">91.84</span>  <span class="token number">82.30</span>     <span class="token number">69</span>    <span class="token number">2.112</span>     <span class="token number">6</span>    <span class="token number">0.286</span>    <span class="token number">2.397</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
<th>原文</th>
</tr>
</thead>
<tbody><tr>
<td>S0</td>
<td>年轻代中第一个survivor 已使用的占当前容量百分比</td>
<td>Survivor space 0 utilization as a percentage of the space’s current capacity.</td>
</tr>
<tr>
<td>S1</td>
<td>年轻代中第二个survivor 已使用的占当前容量百分比</td>
<td>Survivor space 1 utilization as a percentage of the space’s current capacity.</td>
</tr>
<tr>
<td>E</td>
<td>Eden space 中Eden 已使用的占当前容量百分比</td>
<td>Eden space utilization as a percentage of the space’s current capacity.</td>
</tr>
<tr>
<td>O</td>
<td>Old space  已使用的占当前容量百分比</td>
<td>Old space utilization as a percentage of the space’s current capacity.</td>
</tr>
<tr>
<td>M</td>
<td>Metaspace 已使用的占当前容量百分比</td>
<td>Metaspace utilization as a percentage of the space’s current capacity.</td>
</tr>
<tr>
<td>CCS</td>
<td>Compressed class  空间利用率</td>
<td>Compressed class space utilization as a percentage.</td>
</tr>
<tr>
<td>YGC</td>
<td>从应用程序启动到采样时 young generation gc次数</td>
<td>Number of young generation GC events.</td>
</tr>
<tr>
<td>YGCT</td>
<td>从应用程序启动到采样时Young gc所用时间(s)</td>
<td>Young generation garbage collection time.</td>
</tr>
<tr>
<td>FGC</td>
<td>从应用程序启动到采样时Full gc次数</td>
<td>Number of full GC events.</td>
</tr>
<tr>
<td>FGCT</td>
<td>从应用程序启动到采样时Full gc所用时间(s)</td>
<td>Full garbage collection time.</td>
</tr>
<tr>
<td>GCT</td>
<td>从应用程序启动到采样时gc用的总时间(s)</td>
<td>Total garbage collection time.</td>
</tr>
</tbody></table>
<h3 id="3-1-12-jstat-printcompilation-13050"><a href="#3-1-12-jstat-printcompilation-13050" class="headerlink" title="(3.1.12) jstat -printcompilation 13050"></a>(3.1.12) jstat -printcompilation 13050</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstat <span class="token operator">-</span>printcompilation <span class="token number">13050</span>
Compiled  Size  Type Method
    <span class="token number">7469</span>     <span class="token number">63</span>    <span class="token number">1</span> org<span class="token operator">/</span>apache<span class="token operator">/</span>logging<span class="token operator">/</span>log4j<span class="token operator">/</span>spi<span class="token operator">/</span>AbstractLogger trace
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<br>



<h2 id="3-2-常用jstat命令"><a href="#3-2-常用jstat命令" class="headerlink" title="(3.2) 常用jstat命令"></a>(3.2) 常用jstat命令</h2><h3 id="3-2-1-jstat-gc-h5-t-13050-1000-10"><a href="#3-2-1-jstat-gc-h5-t-13050-1000-10" class="headerlink" title="(3.2.1) jstat -gc -h5 -t 13050  1000 10"></a>(3.2.1) jstat -gc -h5 -t 13050  1000 10</h3><blockquote>
<p>分析进程id为13050的gc情况，每隔1000ms打印一次记录，打印10次停止，每5行后打印指标头部<br>-gc 查看gc情况<br>-h5 每5行后打印指标头部<br>-t 进程启动时间<br>13050 进程id 也就是linux的pid<br>1000 每隔1000ms打印一次<br>10 共打印10行</p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstat <span class="token operator">-</span>gc <span class="token operator">-</span>h5 <span class="token operator">-</span>t <span class="token number">13050</span>  <span class="token number">1000</span> <span class="token number">10</span>
Timestamp        S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT
       <span class="token number">217492.5</span> <span class="token number">8512.0</span> <span class="token number">8512.0</span>  <span class="token number">0.0</span>    <span class="token number">77.3</span>  <span class="token number">68160.0</span>  <span class="token number">13154.8</span>   <span class="token number">963392.0</span>   <span class="token number">60728.2</span>   <span class="token number">77732.0</span> <span class="token number">71386.5</span> <span class="token number">11984.0</span> <span class="token number">9862.9</span>    <span class="token number">133</span>    <span class="token number">2.921</span>   <span class="token number">8</span>      <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217493.7</span> <span class="token number">8512.0</span> <span class="token number">8512.0</span>  <span class="token number">0.0</span>    <span class="token number">77.3</span>  <span class="token number">68160.0</span>  <span class="token number">13154.8</span>   <span class="token number">963392.0</span>   <span class="token number">60728.2</span>   <span class="token number">77732.0</span> <span class="token number">71386.5</span> <span class="token number">11984.0</span> <span class="token number">9862.9</span>    <span class="token number">133</span>    <span class="token number">2.921</span>   <span class="token number">8</span>      <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217494.7</span> <span class="token number">8512.0</span> <span class="token number">8512.0</span>  <span class="token number">0.0</span>    <span class="token number">77.3</span>  <span class="token number">68160.0</span>  <span class="token number">14055.9</span>   <span class="token number">963392.0</span>   <span class="token number">60728.2</span>   <span class="token number">77732.0</span> <span class="token number">71386.5</span> <span class="token number">11984.0</span> <span class="token number">9862.9</span>    <span class="token number">133</span>    <span class="token number">2.921</span>   <span class="token number">8</span>      <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217495.7</span> <span class="token number">8512.0</span> <span class="token number">8512.0</span>  <span class="token number">0.0</span>    <span class="token number">77.3</span>  <span class="token number">68160.0</span>  <span class="token number">14055.9</span>   <span class="token number">963392.0</span>   <span class="token number">60728.2</span>   <span class="token number">77732.0</span> <span class="token number">71386.5</span> <span class="token number">11984.0</span> <span class="token number">9862.9</span>    <span class="token number">133</span>    <span class="token number">2.921</span>   <span class="token number">8</span>      <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217496.7</span> <span class="token number">8512.0</span> <span class="token number">8512.0</span>  <span class="token number">0.0</span>    <span class="token number">77.3</span>  <span class="token number">68160.0</span>  <span class="token number">14055.9</span>   <span class="token number">963392.0</span>   <span class="token number">60728.2</span>   <span class="token number">77732.0</span> <span class="token number">71386.5</span> <span class="token number">11984.0</span> <span class="token number">9862.9</span>    <span class="token number">133</span>    <span class="token number">2.921</span>   <span class="token number">8</span>      <span class="token number">0.947</span>    <span class="token number">3.868</span>
Timestamp        S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT
       <span class="token number">217497.7</span> <span class="token number">8512.0</span> <span class="token number">8512.0</span>  <span class="token number">0.0</span>    <span class="token number">77.3</span>  <span class="token number">68160.0</span>  <span class="token number">14055.9</span>   <span class="token number">963392.0</span>   <span class="token number">60728.2</span>   <span class="token number">77732.0</span> <span class="token number">71386.5</span> <span class="token number">11984.0</span> <span class="token number">9862.9</span>    <span class="token number">133</span>    <span class="token number">2.921</span>   <span class="token number">8</span>      <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217498.7</span> <span class="token number">8512.0</span> <span class="token number">8512.0</span>  <span class="token number">0.0</span>    <span class="token number">77.3</span>  <span class="token number">68160.0</span>  <span class="token number">14055.9</span>   <span class="token number">963392.0</span>   <span class="token number">60728.2</span>   <span class="token number">77732.0</span> <span class="token number">71386.5</span> <span class="token number">11984.0</span> <span class="token number">9862.9</span>    <span class="token number">133</span>    <span class="token number">2.921</span>   <span class="token number">8</span>      <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217499.7</span> <span class="token number">8512.0</span> <span class="token number">8512.0</span>  <span class="token number">0.0</span>    <span class="token number">77.3</span>  <span class="token number">68160.0</span>  <span class="token number">14055.9</span>   <span class="token number">963392.0</span>   <span class="token number">60728.2</span>   <span class="token number">77732.0</span> <span class="token number">71386.5</span> <span class="token number">11984.0</span> <span class="token number">9862.9</span>    <span class="token number">133</span>    <span class="token number">2.921</span>   <span class="token number">8</span>      <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217500.7</span> <span class="token number">8512.0</span> <span class="token number">8512.0</span>  <span class="token number">0.0</span>    <span class="token number">77.3</span>  <span class="token number">68160.0</span>  <span class="token number">14055.9</span>   <span class="token number">963392.0</span>   <span class="token number">60728.2</span>   <span class="token number">77732.0</span> <span class="token number">71386.5</span> <span class="token number">11984.0</span> <span class="token number">9862.9</span>    <span class="token number">133</span>    <span class="token number">2.921</span>   <span class="token number">8</span>      <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217501.7</span> <span class="token number">8512.0</span> <span class="token number">8512.0</span>  <span class="token number">0.0</span>    <span class="token number">77.3</span>  <span class="token number">68160.0</span>  <span class="token number">14068.0</span>   <span class="token number">963392.0</span>   <span class="token number">60728.2</span>   <span class="token number">77732.0</span> <span class="token number">71386.5</span> <span class="token number">11984.0</span> <span class="token number">9862.9</span>    <span class="token number">133</span>    <span class="token number">2.921</span>   <span class="token number">8</span>      <span class="token number">0.947</span>    <span class="token number">3.868</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p> 我们可以比较 Java 进程的启动时间以及总 GC 时间（GCT 列），或者两次测量的间隔时间以及总 GC 时间的增量，来得出 GC 时间占运行时间的比例。如果该比例超过 20%，则说明目前堆的压力较大；如果该比例超过 90%，则说明堆里几乎没有可用空间，随时都可能抛出 OOM 异常。</p>
</blockquote>
<h3 id="3-2-2-jstat-gcutil-h5-t-13050-1000-10"><a href="#3-2-2-jstat-gcutil-h5-t-13050-1000-10" class="headerlink" title="(3.2.2) jstat -gcutil -h5 -t 13050  1000 10"></a>(3.2.2) jstat -gcutil -h5 -t 13050  1000 10</h3><blockquote>
<p>分析进程id为13050的gcutil情况，每隔1000ms打印一次记录，打印15次停止，每5行后打印指标头部<br>-gcutil 查看gcutil情况<br>-h5 每5行后打印指标头部<br>-t 进程启动时间<br>13050 进程id 也就是linux的pid<br>1000 每隔1000ms打印一次<br>10 共打印10行</p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstat <span class="token operator">-</span>gcutil <span class="token operator">-</span>h5 <span class="token operator">-</span>t <span class="token number">13050</span>  <span class="token number">1000</span> <span class="token number">10</span>
Timestamp         S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT
       <span class="token number">217569.9</span>   <span class="token number">0.00</span>   <span class="token number">0.91</span>  <span class="token number">23.55</span>   <span class="token number">6.30</span>  <span class="token number">91.84</span>  <span class="token number">82.30</span>    <span class="token number">133</span>    <span class="token number">2.921</span>     <span class="token number">8</span>    <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217570.9</span>   <span class="token number">0.00</span>   <span class="token number">0.91</span>  <span class="token number">23.55</span>   <span class="token number">6.30</span>  <span class="token number">91.84</span>  <span class="token number">82.30</span>    <span class="token number">133</span>    <span class="token number">2.921</span>     <span class="token number">8</span>    <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217571.9</span>   <span class="token number">0.00</span>   <span class="token number">0.91</span>  <span class="token number">23.55</span>   <span class="token number">6.30</span>  <span class="token number">91.84</span>  <span class="token number">82.30</span>    <span class="token number">133</span>    <span class="token number">2.921</span>     <span class="token number">8</span>    <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217572.9</span>   <span class="token number">0.00</span>   <span class="token number">0.91</span>  <span class="token number">23.55</span>   <span class="token number">6.30</span>  <span class="token number">91.84</span>  <span class="token number">82.30</span>    <span class="token number">133</span>    <span class="token number">2.921</span>     <span class="token number">8</span>    <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217573.9</span>   <span class="token number">0.00</span>   <span class="token number">0.91</span>  <span class="token number">23.55</span>   <span class="token number">6.30</span>  <span class="token number">91.84</span>  <span class="token number">82.30</span>    <span class="token number">133</span>    <span class="token number">2.921</span>     <span class="token number">8</span>    <span class="token number">0.947</span>    <span class="token number">3.868</span>
Timestamp         S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT
       <span class="token number">217574.9</span>   <span class="token number">0.00</span>   <span class="token number">0.91</span>  <span class="token number">23.55</span>   <span class="token number">6.30</span>  <span class="token number">91.84</span>  <span class="token number">82.30</span>    <span class="token number">133</span>    <span class="token number">2.921</span>     <span class="token number">8</span>    <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217575.9</span>   <span class="token number">0.00</span>   <span class="token number">0.91</span>  <span class="token number">23.55</span>   <span class="token number">6.30</span>  <span class="token number">91.84</span>  <span class="token number">82.30</span>    <span class="token number">133</span>    <span class="token number">2.921</span>     <span class="token number">8</span>    <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217576.9</span>   <span class="token number">0.00</span>   <span class="token number">0.91</span>  <span class="token number">23.55</span>   <span class="token number">6.30</span>  <span class="token number">91.84</span>  <span class="token number">82.30</span>    <span class="token number">133</span>    <span class="token number">2.921</span>     <span class="token number">8</span>    <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217577.9</span>   <span class="token number">0.00</span>   <span class="token number">0.91</span>  <span class="token number">23.55</span>   <span class="token number">6.30</span>  <span class="token number">91.84</span>  <span class="token number">82.30</span>    <span class="token number">133</span>    <span class="token number">2.921</span>     <span class="token number">8</span>    <span class="token number">0.947</span>    <span class="token number">3.868</span>
       <span class="token number">217578.9</span>   <span class="token number">0.00</span>   <span class="token number">0.91</span>  <span class="token number">23.55</span>   <span class="token number">6.30</span>  <span class="token number">91.84</span>  <span class="token number">82.30</span>    <span class="token number">133</span>    <span class="token number">2.921</span>     <span class="token number">8</span>    <span class="token number">0.947</span>    <span class="token number">3.868</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<br>
<br>

<h1 id="4-Java配置信息工具-jinfo-Java-Configuration-Info"><a href="#4-Java配置信息工具-jinfo-Java-Configuration-Info" class="headerlink" title="(4) Java配置信息工具 jinfo (Java Configuration Info )"></a>(4) Java配置信息工具 jinfo (Java Configuration Info )</h1><blockquote>
<p>jinfo是实时查看和调整虚拟机各项参数的工具</p>
</blockquote>
<h2 id="4-1-jinfo命令"><a href="#4-1-jinfo命令" class="headerlink" title="(4.1) jinfo命令"></a>(4.1) jinfo命令</h2><p>语法格式</p>
<pre class="line-numbers language-none"><code class="language-none">jinfo [ option ] pid<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jinfo <span class="token operator">-</span>help
<span class="token property">Usage:</span>
    jinfo <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token operator">&lt;</span>pid<span class="token operator">></span>
        <span class="token operator">(</span>to connect to running process<span class="token operator">)</span>
    jinfo <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token operator">&lt;</span>executable <span class="token operator">&lt;</span>core<span class="token operator">></span>
        <span class="token operator">(</span>to connect to a core file<span class="token operator">)</span>
    jinfo <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token punctuation">[</span>server_id<span class="token operator">@</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>remote server IP or hostname<span class="token operator">></span>
        <span class="token operator">(</span>to connect to remote debug server<span class="token operator">)</span>

where <span class="token operator">&lt;</span>option<span class="token operator">></span> is one of<span class="token operator">:</span>
    <span class="token operator">-</span>flag <span class="token operator">&lt;</span>name<span class="token operator">></span>         to print the value of the named VM flag
    <span class="token operator">-</span>flag <span class="token punctuation">[</span><span class="token operator">+</span><span class="token operator">|</span><span class="token operator">-</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>name<span class="token operator">></span>    to enable or disable the named VM flag
    <span class="token operator">-</span>flag <span class="token operator">&lt;</span>name<span class="token operator">></span><span class="token operator">=</span><span class="token operator">&lt;</span>value<span class="token operator">></span> to set the named VM flag to the given value
    <span class="token operator">-</span>flags               to print VM flags
    <span class="token operator">-</span>sysprops            to print Java system properties
    <span class="token operator">&lt;</span>no option<span class="token operator">></span>          to print both of the above
    <span class="token operator">-</span>h <span class="token operator">|</span> <span class="token operator">-</span>help           to print this help message
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jinfo <span class="token operator">-</span>option
<span class="token property">Usage:</span>
    jinfo <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token operator">&lt;</span>pid<span class="token operator">></span>
        <span class="token operator">(</span>to connect to running process<span class="token operator">)</span>
    jinfo <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token operator">&lt;</span>executable <span class="token operator">&lt;</span>core<span class="token operator">></span>
        <span class="token operator">(</span>to connect to a core file<span class="token operator">)</span>
    jinfo <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token punctuation">[</span>server_id<span class="token operator">@</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>remote server IP or hostname<span class="token operator">></span>
        <span class="token operator">(</span>to connect to remote debug server<span class="token operator">)</span>

where <span class="token operator">&lt;</span>option<span class="token operator">></span> is one of<span class="token operator">:</span>
    <span class="token operator">-</span>flag <span class="token operator">&lt;</span>name<span class="token operator">></span>         to print the value of the named VM flag
    <span class="token operator">-</span>flag <span class="token punctuation">[</span><span class="token operator">+</span><span class="token operator">|</span><span class="token operator">-</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>name<span class="token operator">></span>    to enable or disable the named VM flag
    <span class="token operator">-</span>flag <span class="token operator">&lt;</span>name<span class="token operator">></span><span class="token operator">=</span><span class="token operator">&lt;</span>value<span class="token operator">></span> to set the named VM flag to the given value
    <span class="token operator">-</span>flags               to print VM flags
    <span class="token operator">-</span>sysprops            to print Java system properties
    <span class="token operator">&lt;</span>no option<span class="token operator">></span>          to print both of the above
    <span class="token operator">-</span>h <span class="token operator">|</span> <span class="token operator">-</span>help           to print this help message
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>  如果遇到 <code>Error attaching to process: sun.jvm.hotspot.debugger.DebuggerException: Can&#39;t attach to the process: ptrace(PTRACE_ATTACH, ..) failed for : Operation not permitted</code>，执行 <code>echo 0 | sudo tee /proc/sys/kernel/yama/ptrace_scope</code>命令即可</p>
<h3 id="4-1-1-jinfo-pid"><a href="#4-1-1-jinfo-pid" class="headerlink" title="(4.1.1) jinfo pid"></a>(4.1.1) jinfo pid</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jinfo <span class="token number">13050</span>
Attaching to process ID <span class="token number">13050</span><span class="token punctuation">,</span> please wait<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Debugger attached successfully<span class="token punctuation">.</span>
Server compiler detected<span class="token punctuation">.</span>
JVM version is <span class="token number">25.172</span><span class="token operator">-</span>b11
<span class="token property">Java System Properties:</span>

<span class="token domain constant">jna.platform.library.path</span> <span class="token operator">=</span> <span class="token file-path string">/usr/lib64</span><span class="token operator">:</span><span class="token file-path string">/lib64</span><span class="token operator">:</span><span class="token file-path string">/usr/lib</span><span class="token operator">:</span><span class="token file-path string">/lib</span><span class="token operator">:</span><span class="token file-path string">/usr/lib64/dyninst</span><span class="token operator">:</span><span class="token file-path string">/usr/lib64/mysql</span>
<span class="token domain constant">java.runtime.name</span> <span class="token operator">=</span> Java<span class="token operator">(</span>TM<span class="token operator">)</span> SE Runtime Environment
<span class="token domain constant">sun.boot.library.path</span> <span class="token operator">=</span> <span class="token file-path string">/home/wkq/software/jdk1.8.0_172/jre/lib/amd64</span>
<span class="token domain constant">java.vm.version</span> <span class="token operator">=</span> <span class="token number">25.172</span><span class="token operator">-</span>b11
<span class="token domain constant">es.path.home</span> <span class="token operator">=</span> <span class="token file-path string">/home/wkq/software/elasticsearch-6.6.2</span>
log4j<span class="token punctuation">.</span>shutdownHookEnabled <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token domain constant">java.vendor.url</span> <span class="token operator">=</span> <span class="token url">http://java.oracle.com/</span>
<span class="token domain constant">java.vm.vendor</span> <span class="token operator">=</span> Oracle Corporation
<span class="token domain constant">path.separator</span> <span class="token operator">=</span> <span class="token operator">:</span>
<span class="token domain constant">file.encoding.pkg</span> <span class="token operator">=</span> <span class="token domain constant">sun.io</span>
<span class="token domain constant">java.vm.name</span> <span class="token operator">=</span> Java HotSpot<span class="token operator">(</span>TM<span class="token operator">)</span> <span class="token number">64</span><span class="token operator">-</span>Bit Server VM
<span class="token domain constant">jna.loaded</span> <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token domain constant">sun.os.patch.level</span> <span class="token operator">=</span> unknown
<span class="token domain constant">user.country</span> <span class="token operator">=</span> US
<span class="token domain constant">sun.java.launcher</span> <span class="token operator">=</span> SUN_STANDARD
<span class="token domain constant">es.networkaddress.cache.negative.ttl</span> <span class="token operator">=</span> <span class="token number">10</span>
<span class="token domain constant">jna.nosys</span> <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token domain constant">java.vm.specification.name</span> <span class="token operator">=</span> Java Virtual Machine Specification
<span class="token domain constant">user.dir</span> <span class="token operator">=</span> <span class="token file-path string">/home/wkq/software/elasticsearch-6.6.2</span>
<span class="token domain constant">java.runtime.version</span> <span class="token operator">=</span> 1<span class="token punctuation">.</span>8<span class="token punctuation">.</span>0_172<span class="token operator">-</span>b11
<span class="token domain constant">java.awt.graphicsenv</span> <span class="token operator">=</span> sun<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>X11GraphicsEnvironment
<span class="token domain constant">java.endorsed.dirs</span> <span class="token operator">=</span> <span class="token file-path string">/home/wkq/software/jdk1.8.0_172/jre/lib/endorsed</span>
<span class="token domain constant">os.arch</span> <span class="token operator">=</span> amd64
<span class="token domain constant">java.io.tmpdir</span> <span class="token operator">=</span> <span class="token file-path string">/tmp/elasticsearch-5035355569386013893</span>
<span class="token domain constant">line.separator</span> <span class="token operator">=</span>

<span class="token domain constant">es.networkaddress.cache.ttl</span> <span class="token operator">=</span> <span class="token number">60</span>
es<span class="token punctuation">.</span>logs<span class="token punctuation">.</span>node_name <span class="token operator">=</span> elasticsearch_001_data
<span class="token domain constant">java.vm.specification.vendor</span> <span class="token operator">=</span> Oracle Corporation
<span class="token domain constant">os.name</span> <span class="token operator">=</span> Linux
io<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>noKeySetOptimization <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token domain constant">sun.jnu.encoding</span> <span class="token operator">=</span> ANSI_X3<span class="token punctuation">.</span>4<span class="token operator">-</span><span class="token number">1968</span>
<span class="token domain constant">jnidispatch.path</span> <span class="token operator">=</span> <span class="token file-path string">/tmp/elasticsearch-5035355569386013893/jna-117789/jna8829728915470247279.tmp</span>
<span class="token domain constant">java.library.path</span> <span class="token operator">=</span> <span class="token file-path string">/usr/java/packages/lib/amd64</span><span class="token operator">:</span><span class="token file-path string">/usr/lib64</span><span class="token operator">:</span><span class="token file-path string">/lib64</span><span class="token operator">:</span><span class="token file-path string">/lib</span><span class="token operator">:</span><span class="token file-path string">/usr/lib</span>
sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>ch<span class="token punctuation">.</span>bugLevel <span class="token operator">=</span>
es<span class="token punctuation">.</span>logs<span class="token punctuation">.</span>cluster_name <span class="token operator">=</span> elasticsearch_test
<span class="token domain constant">java.specification.name</span> <span class="token operator">=</span> Java Platform API Specification
<span class="token domain constant">java.class.version</span> <span class="token operator">=</span> <span class="token number">52.0</span>
<span class="token domain constant">sun.management.compiler</span> <span class="token operator">=</span> HotSpot <span class="token number">64</span><span class="token operator">-</span>Bit Tiered Compilers
<span class="token domain constant">os.version</span> <span class="token operator">=</span> <span class="token number">3.10.0</span><span class="token operator">-</span>957<span class="token punctuation">.</span>21<span class="token punctuation">.</span>3<span class="token punctuation">.</span>el7<span class="token punctuation">.</span>x86_64
<span class="token domain constant">user.home</span> <span class="token operator">=</span> <span class="token file-path string">/home/wkq</span>
<span class="token domain constant">user.timezone</span> <span class="token operator">=</span> Asia<span class="token operator">/</span>Shanghai
<span class="token domain constant">java.awt.printerjob</span> <span class="token operator">=</span> sun<span class="token punctuation">.</span>print<span class="token punctuation">.</span>PSPrinterJob
<span class="token domain constant">file.encoding</span> <span class="token operator">=</span> UTF<span class="token operator">-</span><span class="token number">8</span>
<span class="token domain constant">java.specification.version</span> <span class="token operator">=</span> <span class="token number">1.8</span>
<span class="token domain constant">es.distribution.type</span> <span class="token operator">=</span> tar
io<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>recycler<span class="token punctuation">.</span>maxCapacityPerThread <span class="token operator">=</span> <span class="token number">0</span>
<span class="token domain constant">user.name</span> <span class="token operator">=</span> wkq
es<span class="token punctuation">.</span>logs<span class="token punctuation">.</span>base_path <span class="token operator">=</span> <span class="token file-path string">/home/wkq/software/elasticsearch-6.6.2/logs</span>
<span class="token domain constant">java.class.path</span> <span class="token operator">=</span>  
<span class="token domain constant">es.path.conf</span> <span class="token operator">=</span> <span class="token file-path string">/home/wkq/software/elasticsearch-6.6.2/config</span>
<span class="token domain constant">java.vm.specification.version</span> <span class="token operator">=</span> <span class="token number">1.8</span>
<span class="token domain constant">java.home</span> <span class="token operator">=</span> <span class="token file-path string">/home/wkq/software/jdk1.8.0_172/jre</span>
<span class="token domain constant">sun.java.command</span> <span class="token operator">=</span> org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>bootstrap<span class="token punctuation">.</span>Elasticsearch <span class="token operator">-</span>d
<span class="token domain constant">sun.arch.data.model</span> <span class="token operator">=</span> <span class="token number">64</span>
io<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>noUnsafe <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token domain constant">user.language</span> <span class="token operator">=</span> en
<span class="token domain constant">java.specification.vendor</span> <span class="token operator">=</span> Oracle Corporation
<span class="token domain constant">awt.toolkit</span> <span class="token operator">=</span> sun<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>X11<span class="token punctuation">.</span>XToolkit
<span class="token domain constant">java.vm.info</span> <span class="token operator">=</span> mixed mode
<span class="token domain constant">java.version</span> <span class="token operator">=</span> 1<span class="token punctuation">.</span>8<span class="token punctuation">.</span>0_172
<span class="token domain constant">java.ext.dirs</span> <span class="token operator">=</span> <span class="token file-path string">/home/wkq/software/jdk1.8.0_172/jre/lib/ext</span><span class="token operator">:</span><span class="token file-path string">/usr/java/packages/lib/ext</span>
<span class="token domain constant">sun.boot.class.path</span> <span class="token operator">=</span>  
<span class="token domain constant">java.awt.headless</span> <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token domain constant">java.vendor</span> <span class="token operator">=</span> Oracle Corporation
<span class="token domain constant">file.separator</span> <span class="token operator">=</span> <span class="token operator">/</span>
<span class="token domain constant">java.vendor.url.bug</span> <span class="token operator">=</span> <span class="token url">http://bugreport.sun.com/bugreport/</span>
<span class="token domain constant">es.distribution.flavor</span> <span class="token operator">=</span> default
<span class="token domain constant">sun.io.unicode.encoding</span> <span class="token operator">=</span> UnicodeLittle
<span class="token domain constant">sun.cpu.endian</span> <span class="token operator">=</span> little
<span class="token domain constant">log4j2.disable.jmx</span> <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token domain constant">sun.cpu.isalist</span> <span class="token operator">=</span>

<span class="token property">VM Flags:</span>
<span class="token property">Non-default VM flags:</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>AlwaysPreTouch <span class="token operator">-</span>XX<span class="token operator">:</span>CICompilerCount<span class="token operator">=</span><span class="token number">2</span> <span class="token operator">-</span>XX<span class="token operator">:</span>CMSInitiatingOccupancyFraction<span class="token operator">=</span><span class="token number">75</span> <span class="token operator">-</span>XX<span class="token operator">:</span>ErrorFile<span class="token operator">=</span><span class="token boolean">null</span> <span class="token operator">-</span>XX<span class="token operator">:</span>GCLogFileSize<span class="token operator">=</span><span class="token number">67108864</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>HeapDumpOnOutOfMemoryError <span class="token operator">-</span>XX<span class="token operator">:</span>HeapDumpPath<span class="token operator">=</span><span class="token boolean">null</span> <span class="token operator">-</span>XX<span class="token operator">:</span>InitialHeapSize<span class="token operator">=</span><span class="token number">1073741824</span> <span class="token operator">-</span>XX<span class="token operator">:</span>MaxHeapSize<span class="token operator">=</span><span class="token number">1073741824</span> <span class="token operator">-</span>XX<span class="token operator">:</span>MaxNewSize<span class="token operator">=</span><span class="token number">87228416</span> <span class="token operator">-</span>XX<span class="token operator">:</span>MaxTenuringThreshold<span class="token operator">=</span><span class="token number">6</span> <span class="token operator">-</span>XX<span class="token operator">:</span>MinHeapDeltaBytes<span class="token operator">=</span><span class="token number">196608</span> <span class="token operator">-</span>XX<span class="token operator">:</span>NewSize<span class="token operator">=</span><span class="token number">87228416</span> <span class="token operator">-</span>XX<span class="token operator">:</span>NumberOfGCLogFiles<span class="token operator">=</span><span class="token number">32</span> <span class="token operator">-</span>XX<span class="token operator">:</span>OldPLABSize<span class="token operator">=</span><span class="token number">16</span> <span class="token operator">-</span>XX<span class="token operator">:</span>OldSize<span class="token operator">=</span><span class="token number">986513408</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">-</span>OmitStackTraceInFastThrow <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGC <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCApplicationStoppedTime <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCDateStamps <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCDetails <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCTimeStamps <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintTenuringDistribution <span class="token operator">-</span>XX<span class="token operator">:</span>ThreadStackSize<span class="token operator">=</span><span class="token number">1024</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseCMSInitiatingOccupancyOnly <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseCompressedClassPointers <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseCompressedOops <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseConcMarkSweepGC <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseGCLogFileRotation <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseParNewGC
<span class="token property">Command line:</span>  <span class="token operator">-</span>Xms1g <span class="token operator">-</span>Xmx1g <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseConcMarkSweepGC <span class="token operator">-</span>XX<span class="token operator">:</span>CMSInitiatingOccupancyFraction<span class="token operator">=</span><span class="token number">75</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseCMSInitiatingOccupancyOnly <span class="token operator">-</span>Des<span class="token punctuation">.</span>networkaddress<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>ttl<span class="token operator">=</span><span class="token number">60</span> <span class="token operator">-</span>Des<span class="token punctuation">.</span>networkaddress<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>negative<span class="token punctuation">.</span>ttl<span class="token operator">=</span><span class="token number">10</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>AlwaysPreTouch <span class="token operator">-</span>Xss1m <span class="token operator">-</span>Djava<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>headless<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Dfile<span class="token punctuation">.</span>encoding<span class="token operator">=</span>UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>Djna<span class="token punctuation">.</span>nosys<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">-</span>OmitStackTraceInFastThrow <span class="token operator">-</span>Dio<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>noUnsafe<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Dio<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>noKeySetOptimization<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Dio<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>recycler<span class="token punctuation">.</span>maxCapacityPerThread<span class="token operator">=</span><span class="token number">0</span> <span class="token operator">-</span>Dlog4j<span class="token punctuation">.</span>shutdownHookEnabled<span class="token operator">=</span><span class="token boolean">false</span> <span class="token operator">-</span>Dlog4j2<span class="token punctuation">.</span>disable<span class="token punctuation">.</span>jmx<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Djava<span class="token punctuation">.</span>io<span class="token punctuation">.</span>tmpdir<span class="token operator">=</span><span class="token operator">/</span>tmp<span class="token operator">/</span>elasticsearch<span class="token operator">-</span><span class="token number">5035355569386013893</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>HeapDumpOnOutOfMemoryError <span class="token operator">-</span>XX<span class="token operator">:</span>HeapDumpPath<span class="token operator">=</span>data <span class="token operator">-</span>XX<span class="token operator">:</span>ErrorFile<span class="token operator">=</span>logs<span class="token operator">/</span>hs_err_pid<span class="token operator">%</span>p<span class="token punctuation">.</span>log <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCDetails <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCDateStamps <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintTenuringDistribution <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCApplicationStoppedTime <span class="token operator">-</span>Xloggc<span class="token operator">:</span>logs<span class="token operator">/</span>gc<span class="token punctuation">.</span>log <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseGCLogFileRotation <span class="token operator">-</span>XX<span class="token operator">:</span>NumberOfGCLogFiles<span class="token operator">=</span><span class="token number">32</span> <span class="token operator">-</span>XX<span class="token operator">:</span>GCLogFileSize<span class="token operator">=</span><span class="token number">64m</span> <span class="token operator">-</span>Des<span class="token punctuation">.</span>path<span class="token punctuation">.</span>home<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>wkq<span class="token operator">/</span>software<span class="token operator">/</span>elasticsearch<span class="token operator">-</span><span class="token number">6.6.2</span> <span class="token operator">-</span>Des<span class="token punctuation">.</span>path<span class="token punctuation">.</span>conf<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>wkq<span class="token operator">/</span>software<span class="token operator">/</span>elasticsearch<span class="token operator">-</span><span class="token number">6.6.2</span><span class="token operator">/</span>config <span class="token operator">-</span>Des<span class="token punctuation">.</span>distribution<span class="token punctuation">.</span>flavor<span class="token operator">=</span>default <span class="token operator">-</span>Des<span class="token punctuation">.</span>distribution<span class="token punctuation">.</span>type<span class="token operator">=</span>tar

<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="4-1-2-jinfo-flag-MaxMetaspaceSize-pid"><a href="#4-1-2-jinfo-flag-MaxMetaspaceSize-pid" class="headerlink" title="(4.1.2) jinfo -flag MaxMetaspaceSize pid"></a>(4.1.2) jinfo -flag MaxMetaspaceSize pid</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jinfo <span class="token operator">-</span>flag MaxMetaspaceSize <span class="token number">13050</span>
<span class="token operator">-</span>XX<span class="token operator">:</span>MaxMetaspaceSize<span class="token operator">=</span><span class="token number">18446744073709547520</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="4-1-3-jinfo-flag-ThreadStackSize-pid"><a href="#4-1-3-jinfo-flag-ThreadStackSize-pid" class="headerlink" title="(4.1.3) jinfo -flag ThreadStackSize pid"></a>(4.1.3) jinfo -flag ThreadStackSize pid</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jinfo <span class="token operator">-</span>flag ThreadStackSize <span class="token number">13050</span>
<span class="token operator">-</span>XX<span class="token operator">:</span>ThreadStackSize<span class="token operator">=</span><span class="token number">1024</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="4-1-4-jinfo-flag-MaxNewSize-pid"><a href="#4-1-4-jinfo-flag-MaxNewSize-pid" class="headerlink" title="(4.1.4) jinfo -flag MaxNewSize pid"></a>(4.1.4) jinfo -flag MaxNewSize pid</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jinfo <span class="token operator">-</span>flag MaxNewSize <span class="token number">13050</span>
<span class="token operator">-</span>XX<span class="token operator">:</span>MaxNewSize<span class="token operator">=</span><span class="token number">87228416</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="4-1-5-jinfo-flag-CMSInitiatingOccupancyFraction-pid"><a href="#4-1-5-jinfo-flag-CMSInitiatingOccupancyFraction-pid" class="headerlink" title="(4.1.5) jinfo -flag CMSInitiatingOccupancyFraction pid"></a>(4.1.5) jinfo -flag CMSInitiatingOccupancyFraction pid</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jinfo <span class="token operator">-</span>flag CMSInitiatingOccupancyFraction <span class="token number">13050</span>
<span class="token operator">-</span>XX<span class="token operator">:</span>CMSInitiatingOccupancyFraction<span class="token operator">=</span><span class="token number">75</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<h3 id="4-1-6-查看所有JVM参数-java-XX-PrintFlagsInitial"><a href="#4-1-6-查看所有JVM参数-java-XX-PrintFlagsInitial" class="headerlink" title="(4.1.6) 查看所有JVM参数 java -XX:+PrintFlagsInitial"></a>(4.1.6) 查看所有JVM参数 java -XX:+PrintFlagsInitial</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> java <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintFlagsInitial
<span class="token punctuation">[</span>Global flags<span class="token punctuation">]</span>
    uintx AdaptiveSizeDecrementScaleFactor          <span class="token operator">=</span> <span class="token number">4</span>                                   <span class="token operator">&#123;</span>product<span class="token operator">&#125;</span>
    uintx AdaptiveSizeMajorGCDecayTimeScale         <span class="token operator">=</span> <span class="token number">10</span>                                  <span class="token operator">&#123;</span>product<span class="token operator">&#125;</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

     intx WorkAroundNPTLTimedWaitHang               <span class="token operator">=</span> <span class="token number">1</span>                                   <span class="token operator">&#123;</span>product<span class="token operator">&#125;</span>
    uintx YoungGenerationSizeIncrement              <span class="token operator">=</span> <span class="token number">20</span>                                  <span class="token operator">&#123;</span>product<span class="token operator">&#125;</span>
    uintx YoungGenerationSizeSupplement             <span class="token operator">=</span> <span class="token number">80</span>                                  <span class="token operator">&#123;</span>product<span class="token operator">&#125;</span>
    uintx YoungGenerationSizeSupplementDecay        <span class="token operator">=</span> <span class="token number">8</span>                                   <span class="token operator">&#123;</span>product<span class="token operator">&#125;</span>
    uintx YoungPLABSize                             <span class="token operator">=</span> <span class="token number">4096</span>                                <span class="token operator">&#123;</span>product<span class="token operator">&#125;</span>
     bool ZeroTLAB                                  <span class="token operator">=</span> <span class="token boolean">false</span>                               <span class="token operator">&#123;</span>product<span class="token operator">&#125;</span>
     intx hashCode                                  <span class="token operator">=</span> <span class="token number">5</span>                                   <span class="token operator">&#123;</span>product<span class="token operator">&#125;</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="4-1-7-查看所有支持动态修改的JVM参数-java-XX-PrintFlagsInitial-grep-manageable"><a href="#4-1-7-查看所有支持动态修改的JVM参数-java-XX-PrintFlagsInitial-grep-manageable" class="headerlink" title="(4.1.7) 查看所有支持动态修改的JVM参数 java -XX:+PrintFlagsInitial | grep manageable"></a>(4.1.7) 查看所有支持动态修改的JVM参数 java -XX:+PrintFlagsInitial | grep manageable</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> java <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintFlagsInitial <span class="token operator">|</span> grep manageable
     intx CMSAbortablePrecleanWaitMillis            <span class="token operator">=</span> <span class="token number">100</span>                                 <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
     intx CMSTriggerInterval                        <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>                                  <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
     intx CMSWaitDuration                           <span class="token operator">=</span> <span class="token number">2000</span>                                <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
     bool HeapDumpAfterFullGC                       <span class="token operator">=</span> <span class="token boolean">false</span>                               <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
     bool HeapDumpBeforeFullGC                      <span class="token operator">=</span> <span class="token boolean">false</span>                               <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
     bool HeapDumpOnOutOfMemoryError                <span class="token operator">=</span> <span class="token boolean">false</span>                               <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
    ccstr HeapDumpPath                              <span class="token operator">=</span>                                     <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
    uintx MaxHeapFreeRatio                          <span class="token operator">=</span> <span class="token number">70</span>                                  <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
    uintx MinHeapFreeRatio                          <span class="token operator">=</span> <span class="token number">40</span>                                  <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
     bool PrintClassHistogram                       <span class="token operator">=</span> <span class="token boolean">false</span>                               <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
     bool PrintClassHistogramAfterFullGC            <span class="token operator">=</span> <span class="token boolean">false</span>                               <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
     bool PrintClassHistogramBeforeFullGC           <span class="token operator">=</span> <span class="token boolean">false</span>                               <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
     bool PrintConcurrentLocks                      <span class="token operator">=</span> <span class="token boolean">false</span>                               <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
     bool PrintGC                                   <span class="token operator">=</span> <span class="token boolean">false</span>                               <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
     bool PrintGCDateStamps                         <span class="token operator">=</span> <span class="token boolean">false</span>                               <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
     bool PrintGCDetails                            <span class="token operator">=</span> <span class="token boolean">false</span>                               <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
     bool PrintGCID                                 <span class="token operator">=</span> <span class="token boolean">false</span>                               <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
     bool PrintGCTimeStamps                         <span class="token operator">=</span> <span class="token boolean">false</span>                               <span class="token operator">&#123;</span>manageable<span class="token operator">&#125;</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="4-1-7-调整JVM参数-布尔类型"><a href="#4-1-7-调整JVM参数-布尔类型" class="headerlink" title="(4.1.7) 调整JVM参数-布尔类型"></a>(4.1.7) 调整JVM参数-布尔类型</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log">jinfo <span class="token operator">-</span>flag <span class="token punctuation">[</span><span class="token operator">+</span><span class="token operator">|</span><span class="token operator">-</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>name<span class="token operator">></span> PID<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jinfo <span class="token operator">-</span>flag <span class="token operator">+</span>PrintGC <span class="token number">13050</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jinfo <span class="token operator">-</span>flag <span class="token operator">+</span>PrintGCDetails <span class="token number">13050</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>如果没报错则代表生效，加完以后可以通过 <code>jinfo -flags 13050</code> 验证</p>
</blockquote>
<h3 id="4-1-8-调整JVM参数-数字-字符串类型"><a href="#4-1-8-调整JVM参数-数字-字符串类型" class="headerlink" title="(4.1.8) 调整JVM参数-数字/字符串类型"></a>(4.1.8) 调整JVM参数-数字/字符串类型</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log">jinfo <span class="token operator">-</span>flag <span class="token operator">&lt;</span>name<span class="token operator">></span><span class="token operator">=</span><span class="token operator">&lt;</span>value<span class="token operator">></span> PID<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jinfo <span class="token operator">-</span>flag MaxHeapFreeRatio<span class="token operator">=</span><span class="token number">65</span> <span class="token number">13050</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<blockquote>
<p>没报错相当于修改成功，但是怎么验证是否生效，可以通过 <code>jinfo -flags 13050</code> 验证  </p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jinfo <span class="token operator">-</span>flags <span class="token number">13050</span>
Attaching to process ID <span class="token number">13050</span><span class="token punctuation">,</span> please wait<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Debugger attached successfully<span class="token punctuation">.</span>
Server compiler detected<span class="token punctuation">.</span>
JVM version is <span class="token number">25.172</span><span class="token operator">-</span>b11
<span class="token property">Non-default VM flags:</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>AlwaysPreTouch <span class="token operator">-</span>XX<span class="token operator">:</span>CICompilerCount<span class="token operator">=</span><span class="token number">2</span> <span class="token operator">-</span>XX<span class="token operator">:</span>CMSInitiatingOccupancyFraction<span class="token operator">=</span><span class="token number">75</span> <span class="token operator">-</span>XX<span class="token operator">:</span>ErrorFile<span class="token operator">=</span><span class="token boolean">null</span> <span class="token operator">-</span>XX<span class="token operator">:</span>GCLogFileSize<span class="token operator">=</span><span class="token number">67108864</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>HeapDumpOnOutOfMemoryError <span class="token operator">-</span>XX<span class="token operator">:</span>HeapDumpPath<span class="token operator">=</span><span class="token boolean">null</span> <span class="token operator">-</span>XX<span class="token operator">:</span>InitialHeapSize<span class="token operator">=</span><span class="token number">1073741824</span> <span class="token operator">-</span>XX<span class="token operator">:</span>MaxHeapFreeRatio<span class="token operator">=</span><span class="token number">65</span> <span class="token operator">-</span>XX<span class="token operator">:</span>MaxHeapSize<span class="token operator">=</span><span class="token number">1073741824</span> <span class="token operator">-</span>XX<span class="token operator">:</span>MaxNewSize<span class="token operator">=</span><span class="token number">87228416</span> <span class="token operator">-</span>XX<span class="token operator">:</span>MaxTenuringThreshold<span class="token operator">=</span><span class="token number">6</span> <span class="token operator">-</span>XX<span class="token operator">:</span>MinHeapDeltaBytes<span class="token operator">=</span><span class="token number">196608</span> <span class="token operator">-</span>XX<span class="token operator">:</span>NewSize<span class="token operator">=</span><span class="token number">87228416</span> <span class="token operator">-</span>XX<span class="token operator">:</span>NumberOfGCLogFiles<span class="token operator">=</span><span class="token number">32</span> <span class="token operator">-</span>XX<span class="token operator">:</span>OldPLABSize<span class="token operator">=</span><span class="token number">16</span> <span class="token operator">-</span>XX<span class="token operator">:</span>OldSize<span class="token operator">=</span><span class="token number">986513408</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">-</span>OmitStackTraceInFastThrow <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGC <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCApplicationStoppedTime <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCDateStamps <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCDetails <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCTimeStamps <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintTenuringDistribution <span class="token operator">-</span>XX<span class="token operator">:</span>ThreadStackSize<span class="token operator">=</span><span class="token number">1024</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseCMSInitiatingOccupancyOnly <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseCompressedClassPointers <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseCompressedOops <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseConcMarkSweepGC <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseGCLogFileRotation <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseParNewGC
<span class="token property">Command line:</span>  <span class="token operator">-</span>Xms1g <span class="token operator">-</span>Xmx1g <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseConcMarkSweepGC <span class="token operator">-</span>XX<span class="token operator">:</span>CMSInitiatingOccupancyFraction<span class="token operator">=</span><span class="token number">75</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseCMSInitiatingOccupancyOnly <span class="token operator">-</span>Des<span class="token punctuation">.</span>networkaddress<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>ttl<span class="token operator">=</span><span class="token number">60</span> <span class="token operator">-</span>Des<span class="token punctuation">.</span>networkaddress<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>negative<span class="token punctuation">.</span>ttl<span class="token operator">=</span><span class="token number">10</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>AlwaysPreTouch <span class="token operator">-</span>Xss1m <span class="token operator">-</span>Djava<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>headless<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Dfile<span class="token punctuation">.</span>encoding<span class="token operator">=</span>UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>Djna<span class="token punctuation">.</span>nosys<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">-</span>OmitStackTraceInFastThrow <span class="token operator">-</span>Dio<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>noUnsafe<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Dio<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>noKeySetOptimization<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Dio<span class="token punctuation">.</span>netty<span class="token punctuation">.</span>recycler<span class="token punctuation">.</span>maxCapacityPerThread<span class="token operator">=</span><span class="token number">0</span> <span class="token operator">-</span>Dlog4j<span class="token punctuation">.</span>shutdownHookEnabled<span class="token operator">=</span><span class="token boolean">false</span> <span class="token operator">-</span>Dlog4j2<span class="token punctuation">.</span>disable<span class="token punctuation">.</span>jmx<span class="token operator">=</span><span class="token boolean">true</span> <span class="token operator">-</span>Djava<span class="token punctuation">.</span>io<span class="token punctuation">.</span>tmpdir<span class="token operator">=</span><span class="token operator">/</span>tmp<span class="token operator">/</span>elasticsearch<span class="token operator">-</span><span class="token number">5035355569386013893</span> <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>HeapDumpOnOutOfMemoryError <span class="token operator">-</span>XX<span class="token operator">:</span>HeapDumpPath<span class="token operator">=</span>data <span class="token operator">-</span>XX<span class="token operator">:</span>ErrorFile<span class="token operator">=</span>logs<span class="token operator">/</span>hs_err_pid<span class="token operator">%</span>p<span class="token punctuation">.</span>log <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCDetails <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCDateStamps <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintTenuringDistribution <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>PrintGCApplicationStoppedTime <span class="token operator">-</span>Xloggc<span class="token operator">:</span>logs<span class="token operator">/</span>gc<span class="token punctuation">.</span>log <span class="token operator">-</span>XX<span class="token operator">:</span><span class="token operator">+</span>UseGCLogFileRotation <span class="token operator">-</span>XX<span class="token operator">:</span>NumberOfGCLogFiles<span class="token operator">=</span><span class="token number">32</span> <span class="token operator">-</span>XX<span class="token operator">:</span>GCLogFileSize<span class="token operator">=</span><span class="token number">64m</span> <span class="token operator">-</span>Des<span class="token punctuation">.</span>path<span class="token punctuation">.</span>home<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>wkq<span class="token operator">/</span>software<span class="token operator">/</span>elasticsearch<span class="token operator">-</span><span class="token number">6.6.2</span> <span class="token operator">-</span>Des<span class="token punctuation">.</span>path<span class="token punctuation">.</span>conf<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>wkq<span class="token operator">/</span>software<span class="token operator">/</span>elasticsearch<span class="token operator">-</span><span class="token number">6.6.2</span><span class="token operator">/</span>config <span class="token operator">-</span>Des<span class="token punctuation">.</span>distribution<span class="token punctuation">.</span>flavor<span class="token operator">=</span>default <span class="token operator">-</span>Des<span class="token punctuation">.</span>distribution<span class="token punctuation">.</span>type<span class="token operator">=</span>tar
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>  通过 <code>jinfo -flags 13050</code> 获取的结果可以看到 </p>
<blockquote>
<p>出现 Command failed in target VM 则表示这个flag参数不支持</p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jinfo <span class="token operator">-</span>flag ErrorFile<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>wkq<span class="token operator">/</span>es_error_file <span class="token number">13050</span>
Exception in thread <span class="token string">"main"</span> <span class="token property">com.sun.tools.attach.AttachOperationFailedException:</span> flag <span class="token string">'ErrorFile'</span> cannot be changed

	at sun<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>attach<span class="token punctuation">.</span>LinuxVirtualMachine<span class="token punctuation">.</span>execute<span class="token operator">(</span>LinuxVirtualMachine<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">229</span><span class="token operator">)</span>
	at sun<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>attach<span class="token punctuation">.</span>HotSpotVirtualMachine<span class="token punctuation">.</span>executeCommand<span class="token operator">(</span>HotSpotVirtualMachine<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">261</span><span class="token operator">)</span>
	at sun<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>attach<span class="token punctuation">.</span>HotSpotVirtualMachine<span class="token punctuation">.</span>setFlag<span class="token operator">(</span>HotSpotVirtualMachine<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">234</span><span class="token operator">)</span>
	at sun<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>jinfo<span class="token punctuation">.</span>JInfo<span class="token punctuation">.</span>flag<span class="token operator">(</span>JInfo<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">134</span><span class="token operator">)</span>
	at sun<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>jinfo<span class="token punctuation">.</span>JInfo<span class="token punctuation">.</span>main<span class="token operator">(</span>JInfo<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">81</span><span class="token operator">)</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>




<br>
<br>

<h1 id="5-Java内存映像工具-jmap"><a href="#5-Java内存映像工具-jmap" class="headerlink" title="(5) Java内存映像工具 jmap"></a>(5) Java内存映像工具 jmap</h1><blockquote>
<p> Jmap是一个可以输出所有内存中对象的工具，甚至可以将VM 中的heap，以二进制输出成文本。打印出某个java进程（使用pid）内存内的，所有‘对象’的情况（如：产生那些对象，及其数量）。</p>
</blockquote>
<h2 id="5-1-jmap命令"><a href="#5-1-jmap命令" class="headerlink" title="(5.1) jmap命令"></a>(5.1) jmap命令</h2><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jmap <span class="token operator">-</span>help
<span class="token property">Usage:</span>
    jmap <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token operator">&lt;</span>pid<span class="token operator">></span>
        <span class="token operator">(</span>to connect to running process<span class="token operator">)</span>
    jmap <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token operator">&lt;</span>executable <span class="token operator">&lt;</span>core<span class="token operator">></span>
        <span class="token operator">(</span>to connect to a core file<span class="token operator">)</span>
    jmap <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token punctuation">[</span>server_id<span class="token operator">@</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>remote server IP or hostname<span class="token operator">></span>
        <span class="token operator">(</span>to connect to remote debug server<span class="token operator">)</span>

where <span class="token operator">&lt;</span>option<span class="token operator">></span> is one of<span class="token operator">:</span>
    <span class="token operator">&lt;</span>none<span class="token operator">></span>               to print same info as Solaris pmap
    <span class="token operator">-</span>heap                to print java heap summary
    <span class="token operator">-</span>histo<span class="token punctuation">[</span><span class="token operator">:</span>live<span class="token punctuation">]</span>        to print histogram of java object heap<span class="token operator">;</span> if the <span class="token string">"live"</span>
                         suboption is specified<span class="token punctuation">,</span> only count live objects
    <span class="token operator">-</span>clstats             to print class loader statistics
    <span class="token operator">-</span>finalizerinfo       to print information on objects awaiting finalization
    <span class="token operator">-</span>dump<span class="token operator">:</span><span class="token operator">&lt;</span>dump<span class="token operator">-</span>options<span class="token operator">></span> to dump java heap in hprof binary format
                         <span class="token property">dump-options:</span>
                           live         dump only live objects<span class="token operator">;</span> if not specified<span class="token punctuation">,</span>
                                        all objects in the heap are dumped<span class="token punctuation">.</span>
                           format<span class="token operator">=</span>b     binary format
                           file<span class="token operator">=</span><span class="token operator">&lt;</span>file<span class="token operator">></span>  dump heap to <span class="token operator">&lt;</span>file<span class="token operator">></span>
                         <span class="token property">Example:</span> jmap <span class="token operator">-</span>dump<span class="token operator">:</span>live<span class="token punctuation">,</span>format<span class="token operator">=</span>b<span class="token punctuation">,</span>file<span class="token operator">=</span>heap<span class="token punctuation">.</span>bin <span class="token operator">&lt;</span>pid<span class="token operator">></span>
    <span class="token operator">-</span>F                   force<span class="token punctuation">.</span> Use with <span class="token operator">-</span>dump<span class="token operator">:</span><span class="token operator">&lt;</span>dump<span class="token operator">-</span>options<span class="token operator">></span> <span class="token operator">&lt;</span>pid<span class="token operator">></span> or <span class="token operator">-</span>histo
                         to force a heap dump or histogram when <span class="token operator">&lt;</span>pid<span class="token operator">></span> does not
                         respond<span class="token punctuation">.</span> The <span class="token string">"live"</span> suboption is not supported
                         in this mode<span class="token punctuation">.</span>
    <span class="token operator">-</span>h <span class="token operator">|</span> <span class="token operator">-</span>help           to print this help message
    <span class="token operator">-</span>J<span class="token operator">&lt;</span>flag<span class="token operator">></span>             to pass <span class="token operator">&lt;</span>flag<span class="token operator">></span> directly to the runtime system
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jmap <span class="token operator">-</span>options
<span class="token property">Usage:</span>
    jmap <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token operator">&lt;</span>pid<span class="token operator">></span>
        <span class="token operator">(</span>to connect to running process<span class="token operator">)</span>
    jmap <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token operator">&lt;</span>executable <span class="token operator">&lt;</span>core<span class="token operator">></span>
        <span class="token operator">(</span>to connect to a core file<span class="token operator">)</span>
    jmap <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token punctuation">[</span>server_id<span class="token operator">@</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>remote server IP or hostname<span class="token operator">></span>
        <span class="token operator">(</span>to connect to remote debug server<span class="token operator">)</span>

where <span class="token operator">&lt;</span>option<span class="token operator">></span> is one of<span class="token operator">:</span>
    <span class="token operator">&lt;</span>none<span class="token operator">></span>               to print same info as Solaris pmap
    <span class="token operator">-</span>heap                to print java heap summary
    <span class="token operator">-</span>histo<span class="token punctuation">[</span><span class="token operator">:</span>live<span class="token punctuation">]</span>        to print histogram of java object heap<span class="token operator">;</span> if the <span class="token string">"live"</span>
                         suboption is specified<span class="token punctuation">,</span> only count live objects
    <span class="token operator">-</span>clstats             to print class loader statistics
    <span class="token operator">-</span>finalizerinfo       to print information on objects awaiting finalization
    <span class="token operator">-</span>dump<span class="token operator">:</span><span class="token operator">&lt;</span>dump<span class="token operator">-</span>options<span class="token operator">></span> to dump java heap in hprof binary format
                         <span class="token property">dump-options:</span>
                           live         dump only live objects<span class="token operator">;</span> if not specified<span class="token punctuation">,</span>
                                        all objects in the heap are dumped<span class="token punctuation">.</span>
                           format<span class="token operator">=</span>b     binary format
                           file<span class="token operator">=</span><span class="token operator">&lt;</span>file<span class="token operator">></span>  dump heap to <span class="token operator">&lt;</span>file<span class="token operator">></span>
                         <span class="token property">Example:</span> jmap <span class="token operator">-</span>dump<span class="token operator">:</span>live<span class="token punctuation">,</span>format<span class="token operator">=</span>b<span class="token punctuation">,</span>file<span class="token operator">=</span>heap<span class="token punctuation">.</span>bin <span class="token operator">&lt;</span>pid<span class="token operator">></span>
    <span class="token operator">-</span>F                   force<span class="token punctuation">.</span> Use with <span class="token operator">-</span>dump<span class="token operator">:</span><span class="token operator">&lt;</span>dump<span class="token operator">-</span>options<span class="token operator">></span> <span class="token operator">&lt;</span>pid<span class="token operator">></span> or <span class="token operator">-</span>histo
                         to force a heap dump or histogram when <span class="token operator">&lt;</span>pid<span class="token operator">></span> does not
                         respond<span class="token punctuation">.</span> The <span class="token string">"live"</span> suboption is not supported
                         in this mode<span class="token punctuation">.</span>
    <span class="token operator">-</span>h <span class="token operator">|</span> <span class="token operator">-</span>help           to print this help message
    <span class="token operator">-</span>J<span class="token operator">&lt;</span>flag<span class="token operator">></span>             to pass <span class="token operator">&lt;</span>flag<span class="token operator">></span> directly to the runtime system
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p> 更多详细信息参考 <code>man jmap</code></p>
</blockquote>
<h3 id="5-1-1-jmap-pid"><a href="#5-1-1-jmap-pid" class="headerlink" title="(5.1.1) jmap pid"></a>(5.1.1) jmap pid</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jmap <span class="token number">13050</span>
Attaching to process ID <span class="token number">13050</span><span class="token punctuation">,</span> please wait<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Debugger attached successfully<span class="token punctuation">.</span>
Server compiler detected<span class="token punctuation">.</span>
JVM version is <span class="token number">25.172</span><span class="token operator">-</span>b11
<span class="token number">0x0000000000400000</span>	<span class="token number">7K</span>	<span class="token file-path string">/home/wkq/software/jdk1.8.0_172/bin/java</span>
<span class="token number">0x00007fb911271000</span>	<span class="token number">49K</span>	<span class="token file-path string">/home/wkq/software/jdk1.8.0_172/jre/lib/amd64/libmanagement.so</span>
<span class="token number">0x00007fb91167a000</span>	<span class="token number">86K</span>	<span class="token file-path string">/usr/lib64/libgcc_s-4.8.5-20150702.so.1</span>
<span class="token number">0x00007fb911890000</span>	<span class="token number">251K</span>	<span class="token file-path string">/home/wkq/software/jdk1.8.0_172/jre/lib/amd64/libsunec.so</span>
<span class="token number">0x00007fb9242c2000</span>	<span class="token number">112K</span>	<span class="token file-path string">/home/wkq/software/jdk1.8.0_172/jre/lib/amd64/libnet.so</span>
<span class="token number">0x00007fb9244d9000</span>	<span class="token number">91K</span>	<span class="token file-path string">/home/wkq/software/jdk1.8.0_172/jre/lib/amd64/libnio.so</span>
<span class="token number">0x00007fb94065d000</span>	<span class="token number">125K</span>	<span class="token file-path string">/home/wkq/software/jdk1.8.0_172/jre/lib/amd64/libzip.so</span>
<span class="token number">0x00007fb940879000</span>	<span class="token number">60K</span>	<span class="token file-path string">/usr/lib64/libnss_files-2.17.so</span>
<span class="token number">0x00007fb940a8c000</span>	<span class="token number">221K</span>	<span class="token file-path string">/home/wkq/software/jdk1.8.0_172/jre/lib/amd64/libjava.so</span>
<span class="token number">0x00007fb940cb8000</span>	<span class="token number">64K</span>	<span class="token file-path string">/home/wkq/software/jdk1.8.0_172/jre/lib/amd64/libverify.so</span>
<span class="token number">0x00007fb940ec7000</span>	<span class="token number">43K</span>	<span class="token file-path string">/usr/lib64/librt-2.17.so</span>
<span class="token number">0x00007fb9410cf000</span>	<span class="token number">1115K</span>	<span class="token file-path string">/usr/lib64/libm-2.17.so</span>
<span class="token number">0x00007fb9413d1000</span>	<span class="token number">16667K</span>	<span class="token file-path string">/home/wkq/software/jdk1.8.0_172/jre/lib/amd64/server/libjvm.so</span>
<span class="token number">0x00007fb9423d2000</span>	<span class="token number">2068K</span>	<span class="token file-path string">/usr/lib64/libc-2.17.so</span>
<span class="token number">0x00007fb942793000</span>	<span class="token number">19K</span>	<span class="token file-path string">/usr/lib64/libdl-2.17.so</span>
<span class="token number">0x00007fb942997000</span>	<span class="token number">101K</span>	<span class="token file-path string">/home/wkq/software/jdk1.8.0_172/lib/amd64/jli/libjli.so</span>
<span class="token number">0x00007fb942bad000</span>	<span class="token number">140K</span>	<span class="token file-path string">/usr/lib64/libpthread-2.17.so</span>
<span class="token number">0x00007fb942dc9000</span>	<span class="token number">155K</span>	<span class="token file-path string">/usr/lib64/ld-2.17.so</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="5-1-2-jmap-dump-live-format-b-file-file-path"><a href="#5-1-2-jmap-dump-live-format-b-file-file-path" class="headerlink" title="(5.1.2) jmap -dump:[live,] format=b, file=file_path"></a>(5.1.2) jmap -dump:[live,] format=b, file=file_path</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jmap <span class="token operator">-</span>dump<span class="token operator">:</span>live<span class="token punctuation">,</span>format<span class="token operator">=</span>b<span class="token punctuation">,</span>file<span class="token operator">=</span>13050<span class="token punctuation">.</span>log <span class="token number">13050</span>
Dumping heap to <span class="token file-path string">/home/wkq/13050.log</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Heap dump file created
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="5-1-3-jmap-finalizerinfo-pid"><a href="#5-1-3-jmap-finalizerinfo-pid" class="headerlink" title="(5.1.3) jmap -finalizerinfo pid"></a>(5.1.3) jmap -finalizerinfo pid</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jmap <span class="token operator">-</span>finalizerinfo <span class="token number">13050</span>
Attaching to process ID <span class="token number">13050</span><span class="token punctuation">,</span> please wait<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Debugger attached successfully<span class="token punctuation">.</span>
Server compiler detected<span class="token punctuation">.</span>
JVM version is <span class="token number">25.172</span><span class="token operator">-</span>b11
<span class="token property">Number of objects pending for finalization:</span> <span class="token number">0</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="5-1-4-jmap-heap-pid"><a href="#5-1-4-jmap-heap-pid" class="headerlink" title="(5.1.4) jmap -heap pid"></a>(5.1.4) jmap -heap pid</h3><blockquote>
<p> jmap -heap pid<br> jmap-J-d64 -heap pid</p>
</blockquote>
<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jmap <span class="token operator">-</span>heap <span class="token number">13050</span>
Attaching to process ID <span class="token number">13050</span><span class="token punctuation">,</span> please wait<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Debugger attached successfully<span class="token punctuation">.</span>
Server compiler detected<span class="token punctuation">.</span>
JVM version is <span class="token number">25.172</span><span class="token operator">-</span>b11

using parallel threads in the new generation<span class="token punctuation">.</span>
using thread<span class="token operator">-</span>local object allocation<span class="token punctuation">.</span>
Concurrent Mark<span class="token operator">-</span>Sweep GC

<span class="token property">Heap Configuration:</span>
   MinHeapFreeRatio         <span class="token operator">=</span> <span class="token number">40</span>
   MaxHeapFreeRatio         <span class="token operator">=</span> <span class="token number">70</span>
   MaxHeapSize              <span class="token operator">=</span> <span class="token number">1073741824</span> <span class="token operator">(</span><span class="token number">1024.0MB</span><span class="token operator">)</span>
   NewSize                  <span class="token operator">=</span> <span class="token number">87228416</span> <span class="token operator">(</span><span class="token number">83.1875MB</span><span class="token operator">)</span>
   MaxNewSize               <span class="token operator">=</span> <span class="token number">87228416</span> <span class="token operator">(</span><span class="token number">83.1875MB</span><span class="token operator">)</span>
   OldSize                  <span class="token operator">=</span> <span class="token number">986513408</span> <span class="token operator">(</span><span class="token number">940.8125MB</span><span class="token operator">)</span>
   NewRatio                 <span class="token operator">=</span> <span class="token number">2</span>
   SurvivorRatio            <span class="token operator">=</span> <span class="token number">8</span>
   MetaspaceSize            <span class="token operator">=</span> <span class="token number">21807104</span> <span class="token operator">(</span><span class="token number">20.796875MB</span><span class="token operator">)</span>
   CompressedClassSpaceSize <span class="token operator">=</span> <span class="token number">1073741824</span> <span class="token operator">(</span><span class="token number">1024.0MB</span><span class="token operator">)</span>
   MaxMetaspaceSize         <span class="token operator">=</span> <span class="token number">17592186044415</span> MB
   G1HeapRegionSize         <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">(</span><span class="token number">0.0MB</span><span class="token operator">)</span>

<span class="token property">Heap Usage:</span>
New Generation <span class="token operator">(</span>Eden <span class="token operator">+</span> <span class="token number">1</span> Survivor Space<span class="token operator">)</span><span class="token operator">:</span>
   capacity <span class="token operator">=</span> <span class="token number">78512128</span> <span class="token operator">(</span><span class="token number">74.875MB</span><span class="token operator">)</span>
   used     <span class="token operator">=</span> <span class="token number">7022576</span> <span class="token operator">(</span><span class="token number">6.6972503662109375MB</span><span class="token operator">)</span>
   free     <span class="token operator">=</span> <span class="token number">71489552</span> <span class="token operator">(</span><span class="token number">68.17774963378906MB</span><span class="token operator">)</span>
   <span class="token number">8.94457477958055</span><span class="token operator">%</span> used
<span class="token property">Eden Space:</span>
   capacity <span class="token operator">=</span> <span class="token number">69795840</span> <span class="token operator">(</span><span class="token number">66.5625MB</span><span class="token operator">)</span>
   used     <span class="token operator">=</span> <span class="token number">7022576</span> <span class="token operator">(</span><span class="token number">6.6972503662109375MB</span><span class="token operator">)</span>
   free     <span class="token operator">=</span> <span class="token number">62773264</span> <span class="token operator">(</span><span class="token number">59.86524963378906MB</span><span class="token operator">)</span>
   <span class="token number">10.061596794307512</span><span class="token operator">%</span> used
<span class="token property">From Space:</span>
   capacity <span class="token operator">=</span> <span class="token number">8716288</span> <span class="token operator">(</span><span class="token number">8.3125MB</span><span class="token operator">)</span>
   used     <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">(</span><span class="token number">0.0MB</span><span class="token operator">)</span>
   free     <span class="token operator">=</span> <span class="token number">8716288</span> <span class="token operator">(</span><span class="token number">8.3125MB</span><span class="token operator">)</span>
   <span class="token number">0.0</span><span class="token operator">%</span> used
<span class="token property">To Space:</span>
   capacity <span class="token operator">=</span> <span class="token number">8716288</span> <span class="token operator">(</span><span class="token number">8.3125MB</span><span class="token operator">)</span>
   used     <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">(</span><span class="token number">0.0MB</span><span class="token operator">)</span>
   free     <span class="token operator">=</span> <span class="token number">8716288</span> <span class="token operator">(</span><span class="token number">8.3125MB</span><span class="token operator">)</span>
   <span class="token number">0.0</span><span class="token operator">%</span> used
<span class="token property">concurrent mark-sweep generation:</span>
   capacity <span class="token operator">=</span> <span class="token number">986513408</span> <span class="token operator">(</span><span class="token number">940.8125MB</span><span class="token operator">)</span>
   used     <span class="token operator">=</span> <span class="token number">62168384</span> <span class="token operator">(</span><span class="token number">59.28839111328125MB</span><span class="token operator">)</span>
   free     <span class="token operator">=</span> <span class="token number">924345024</span> <span class="token operator">(</span><span class="token number">881.5241088867188MB</span><span class="token operator">)</span>
   <span class="token number">6.301828591061582</span><span class="token operator">%</span> used

<span class="token number">22982</span> interned Strings occupying <span class="token number">3212304</span> bytes<span class="token punctuation">.</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="5-1-5-jmap-histo-pid"><a href="#5-1-5-jmap-histo-pid" class="headerlink" title="(5.1.5) jmap -histo pid"></a>(5.1.5) jmap -histo pid</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jmap <span class="token operator">-</span>histo <span class="token number">13050</span> <span class="token operator">|</span> more

 num     <span class="token operator">#</span>instances         <span class="token operator">#</span>bytes  class name
<span class="token separator comment">----------------------------------------------</span>
   <span class="token number">1</span><span class="token operator">:</span>        <span class="token number">258021</span>       <span class="token number">20550728</span>  <span class="token punctuation">[</span>C
   <span class="token number">2</span><span class="token operator">:</span>        <span class="token number">432469</span>       <span class="token number">13839008</span>  java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>HashMap<span class="token operator">$</span>Node
   <span class="token number">3</span><span class="token operator">:</span>        <span class="token number">228108</span>        <span class="token number">5474592</span>  java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String
   <span class="token number">4</span><span class="token operator">:</span>         <span class="token number">38596</span>        <span class="token number">4839800</span>  <span class="token punctuation">[</span>Ljava<span class="token punctuation">.</span>util<span class="token punctuation">.</span>HashMap<span class="token operator">$</span>Node<span class="token operator">;</span>
   <span class="token number">5</span><span class="token operator">:</span>         <span class="token number">86202</span>        <span class="token number">4137696</span>  java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>HashMap
   <span class="token number">6</span><span class="token operator">:</span>         <span class="token number">21464</span>        <span class="token number">2574920</span>  <span class="token punctuation">[</span>B
   <span class="token number">7</span><span class="token operator">:</span>         <span class="token number">74456</span>        <span class="token number">2382592</span>  java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Collections<span class="token operator">$</span>UnmodifiableMap
   <span class="token number">8</span><span class="token operator">:</span>         <span class="token number">12306</span>        <span class="token number">2118456</span>  <span class="token punctuation">[</span>I
   <span class="token number">9</span><span class="token operator">:</span>         <span class="token number">30839</span>        <span class="token number">1957320</span>  <span class="token punctuation">[</span>Ljava<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Object<span class="token operator">;</span>
  <span class="token number">10</span><span class="token operator">:</span>         <span class="token number">15798</span>        <span class="token number">1730136</span>  java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Class
  <span class="token number">11</span><span class="token operator">:</span>         <span class="token number">52294</span>        <span class="token number">1673408</span>  java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>ConcurrentHashMap<span class="token operator">$</span>Node
  <span class="token number">12</span><span class="token operator">:</span>         <span class="token number">24594</span>         <span class="token number">787008</span>  java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>AbstractList<span class="token operator">$</span>Itr
  <span class="token number">13</span><span class="token operator">:</span>         <span class="token number">49038</span>         <span class="token number">784608</span>  org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>common<span class="token punctuation">.</span>lucene<span class="token punctuation">.</span>LoggerInfoStream<span class="token operator">$</span><span class="token operator">$</span>Lambda<span class="token operator">$</span><span class="token number">3048</span><span class="token operator">/</span><span class="token number">931367447</span>
  <span class="token number">14</span><span class="token operator">:</span>         <span class="token number">24519</span>         <span class="token number">784608</span>  org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>index<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>Engine<span class="token operator">$</span><span class="token operator">$</span>Lambda<span class="token operator">$</span><span class="token number">3100</span><span class="token operator">/</span><span class="token number">1060530393</span>
  <span class="token number">15</span><span class="token operator">:</span>         <span class="token number">23576</span>         <span class="token number">754432</span>  java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>ref<span class="token punctuation">.</span>WeakReference
  <span class="token number">16</span><span class="token operator">:</span>         <span class="token number">30639</span>         <span class="token number">735336</span>  java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays<span class="token operator">$</span>ArrayList
  <span class="token number">17</span><span class="token operator">:</span>         <span class="token number">24519</span>         <span class="token number">588456</span>  <span class="token punctuation">[</span>Lorg<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>common<span class="token punctuation">.</span>lease<span class="token punctuation">.</span>Releasable<span class="token operator">;</span>
  <span class="token number">18</span><span class="token operator">:</span>         <span class="token number">24519</span>         <span class="token number">588456</span>  org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>index<span class="token punctuation">.</span>engine<span class="token punctuation">.</span>Engine<span class="token operator">$</span>Searcher
  <span class="token number">19</span><span class="token operator">:</span>          <span class="token number">8132</span>         <span class="token number">585504</span>  java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>ScheduledThreadPoolExecutor<span class="token operator">$</span>ScheduledFutureTask
  <span class="token number">20</span><span class="token operator">:</span>          <span class="token number">9564</span>         <span class="token number">535584</span>  java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>invoke<span class="token punctuation">.</span>MemberName
  <span class="token number">21</span><span class="token operator">:</span>          <span class="token number">6052</span>         <span class="token number">532576</span>  java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Method
  <span class="token number">22</span><span class="token operator">:</span>         <span class="token number">33099</span>         <span class="token number">529584</span>  java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Object<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="5-1-6-jmap-clstats-pid"><a href="#5-1-6-jmap-clstats-pid" class="headerlink" title="(5.1.6) jmap -clstats pid"></a>(5.1.6) jmap -clstats pid</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jmap <span class="token operator">-</span>clstats <span class="token number">13050</span>
Attaching to process ID <span class="token number">13050</span><span class="token punctuation">,</span> please wait<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Debugger attached successfully<span class="token punctuation">.</span>
Server compiler detected<span class="token punctuation">.</span>
JVM version is <span class="token number">25.172</span><span class="token operator">-</span>b11
finding class loader instances <span class="token punctuation">.</span><span class="token punctuation">.</span>
done<span class="token punctuation">.</span>
computing per loader stat <span class="token punctuation">.</span><span class="token punctuation">.</span>done<span class="token punctuation">.</span>
please wait<span class="token punctuation">.</span><span class="token punctuation">.</span> computing <span class="token domain constant">liveness.liveness</span> analysis may be inaccurate <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
class_loader	classes	bytes	parent_loader	alive<span class="token operator">?</span>	type

<span class="token operator">&lt;</span>bootstrap<span class="token operator">></span>	<span class="token number">2353</span>	<span class="token number">4122324</span>	  <span class="token boolean">null</span>  	live	<span class="token operator">&lt;</span>internal<span class="token operator">></span>
<span class="token number">0x00000000c5fa9378</span>	<span class="token number">1</span>	<span class="token number">714</span>	  <span class="token boolean">null</span>  	dead	org<span class="token operator">/</span>elasticsearch<span class="token operator">/</span>painless<span class="token operator">/</span>lookup<span class="token operator">/</span>PainlessLookupBuilder<span class="token operator">$</span>BridgeLoader<span class="token operator">@</span><span class="token number">0x00000001003f45d0</span>
<span class="token number">0x00000000c5fa9878</span>	<span class="token number">1</span>	<span class="token number">714</span>	  <span class="token boolean">null</span>  	dead	org<span class="token operator">/</span>elasticsearch<span class="token operator">/</span>painless<span class="token operator">/</span>lookup<span class="token operator">/</span>PainlessLookupBuilder<span class="token operator">$</span>BridgeLoader<span class="token operator">@</span><span class="token number">0x00000001003f45d0</span>
<span class="token number">0x00000000c58b8708</span>	<span class="token number">0</span>	<span class="token number">0</span>	<span class="token number">0x00000000c544a3d0</span>	dead	org<span class="token operator">/</span>elasticsearch<span class="token operator">/</span>plugins<span class="token operator">/</span>ExtendedPluginsClassLoader<span class="token operator">@</span><span class="token number">0x0000000100263e90</span>
<span class="token number">0x00000000c5ab86a8</span>	<span class="token number">1</span>	<span class="token number">1471</span>	<span class="token number">0x00000000c544a3d0</span>	dead	sun<span class="token operator">/</span>reflect<span class="token operator">/</span>DelegatingClassLoader<span class="token operator">@</span><span class="token number">0x000000010000a028</span>
<span class="token number">0x00000000c5ac4b28</span>	<span class="token number">11</span>	<span class="token number">20182</span>	<span class="token number">0x00000000c5c12600</span>	dead	java<span class="token operator">/</span>net<span class="token operator">/</span>FactoryURLClassLoader<span class="token operator">@</span><span class="token number">0x0000000100259738</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

total <span class="token operator">=</span> <span class="token number">86</span>	<span class="token number">11582</span>	<span class="token number">19740221</span>	    N<span class="token operator">/</span>A    	alive<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> dead<span class="token operator">=</span><span class="token number">85</span>	    N<span class="token operator">/</span>A
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p> 省略部分详细信息</p>
</blockquote>
<br>
<br>


<h1 id="6-虚拟机堆转储快照分析工具-jhat"><a href="#6-虚拟机堆转储快照分析工具-jhat" class="headerlink" title="(6) 虚拟机堆转储快照分析工具 jhat"></a>(6) 虚拟机堆转储快照分析工具 jhat</h1><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>weikeqin<span class="token operator">@</span>macbook <span class="token operator">~</span> <span class="token punctuation">]</span><span class="token operator">$</span>jhat jmap_dump_live_20191210<span class="token punctuation">.</span>hprof
Reading from jmap_dump_live_202191210<span class="token punctuation">.</span>hprof<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Dump file created <span class="token date number">Thu Dec 10</span> <span class="token time number">00:32:29</span> CST <span class="token number">2019</span>
Snapshot read<span class="token punctuation">,</span> resolving<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Resolving <span class="token number">2589261</span> objects<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Chasing references<span class="token punctuation">,</span> expect <span class="token number">517</span> dots<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Eliminating duplicate references<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Snapshot resolved<span class="token punctuation">.</span>
Started HTTP server on port <span class="token number">7000</span>
Server is ready<span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<br>
<br>


<h1 id="7-Java堆栈跟踪工具-jstack-Java-Stack-Trace"><a href="#7-Java堆栈跟踪工具-jstack-Java-Stack-Trace" class="headerlink" title="(7) Java堆栈跟踪工具 jstack (Java Stack Trace)"></a>(7) Java堆栈跟踪工具 jstack (Java Stack Trace)</h1><blockquote>
<p> jstack主要用来查看某个Java进程内的线程堆栈信息。<br>在实际运行中，往往一次 dump的信息，还不足以确认问题。建议产生三次 dump信息，如果每次 dump都指向同一个问题，我们才确定问题的典型性。 </p>
</blockquote>
<h2 id="7-1-jstack命令"><a href="#7-1-jstack命令" class="headerlink" title="(7.1) jstack命令"></a>(7.1) jstack命令</h2><pre class="line-numbers language-[wkq@VM_77_25_centos" data-language="[wkq@VM_77_25_centos"><div class="caption"><span>~]$ jstack -help</span></div><code class="language-[wkq@VM_77_25_centos">Usage:
    jstack [-l] &lt;pid&gt;
        (to connect to running process)
    jstack -F [-m] [-l] &lt;pid&gt;
        (to connect to a hung process)
    jstack [-m] [-l] &lt;executable&gt; &lt;core&gt;
        (to connect to a core file)
    jstack [-m] [-l] [server_id@]&lt;remote server IP or hostname&gt;
        (to connect to a remote debug server)

Options:
    -F  to force a thread dump. Use when jstack &lt;pid&gt; does not respond (process is hung)
    -m  to print both java and native frames (mixed mode)
    -l  long listing. Prints additional information about locks
    -h or -help to print this help message
[wkq@VM_77_25_centos ~]$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstack <span class="token operator">-</span>options
<span class="token property">Usage:</span>
    jstack <span class="token punctuation">[</span><span class="token operator">-</span>l<span class="token punctuation">]</span> <span class="token operator">&lt;</span>pid<span class="token operator">></span>
        <span class="token operator">(</span>to connect to running process<span class="token operator">)</span>
    jstack <span class="token operator">-</span>F <span class="token punctuation">[</span><span class="token operator">-</span>m<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>l<span class="token punctuation">]</span> <span class="token operator">&lt;</span>pid<span class="token operator">></span>
        <span class="token operator">(</span>to connect to a hung process<span class="token operator">)</span>
    jstack <span class="token punctuation">[</span><span class="token operator">-</span>m<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>l<span class="token punctuation">]</span> <span class="token operator">&lt;</span>executable<span class="token operator">></span> <span class="token operator">&lt;</span>core<span class="token operator">></span>
        <span class="token operator">(</span>to connect to a core file<span class="token operator">)</span>
    jstack <span class="token punctuation">[</span><span class="token operator">-</span>m<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">-</span>l<span class="token punctuation">]</span> <span class="token punctuation">[</span>server_id<span class="token operator">@</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>remote server IP or hostname<span class="token operator">></span>
        <span class="token operator">(</span>to connect to a remote debug server<span class="token operator">)</span>

<span class="token property">Options:</span>
    <span class="token operator">-</span>F  to force a thread dump<span class="token punctuation">.</span> Use when jstack <span class="token operator">&lt;</span>pid<span class="token operator">></span> does not respond <span class="token operator">(</span>process is hung<span class="token operator">)</span>
    <span class="token operator">-</span>m  to print both java and native frames <span class="token operator">(</span>mixed mode<span class="token operator">)</span>
    <span class="token operator">-</span>l  long listing<span class="token punctuation">.</span> Prints additional information about locks
    <span class="token operator">-</span>h or <span class="token operator">-</span>help to print this help message
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="7-1-1-jstack-pid"><a href="#7-1-1-jstack-pid" class="headerlink" title="(7.1.1) jstack pid"></a>(7.1.1) jstack pid</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstack  <span class="token number">13050</span>
<span class="token date number">2020-03-29</span> <span class="token time number">08:55:30</span>
Full thread dump Java HotSpot<span class="token operator">(</span>TM<span class="token operator">)</span> <span class="token number">64</span><span class="token operator">-</span>Bit Server VM <span class="token operator">(</span><span class="token number">25.172</span><span class="token operator">-</span>b11 mixed mode<span class="token operator">)</span><span class="token operator">:</span>

<span class="token string">"Attach Listener"</span> <span class="token operator">#</span><span class="token number">48</span> daemon prio<span class="token operator">=</span><span class="token number">9</span> os_prio<span class="token operator">=</span><span class="token number">0</span> tid<span class="token operator">=</span><span class="token number">0x00007fb90805b800</span> nid<span class="token operator">=</span><span class="token number">0x1c9f</span> waiting on condition <span class="token punctuation">[</span><span class="token number">0x0000000000000000</span><span class="token punctuation">]</span>
   <span class="token property">java.lang.Thread.State:</span> RUNNABLE

<span class="token string">"elasticsearch[elasticsearch_001_data][flush][T#1]"</span> <span class="token operator">#</span><span class="token number">47</span> daemon prio<span class="token operator">=</span><span class="token number">5</span> os_prio<span class="token operator">=</span><span class="token number">0</span> tid<span class="token operator">=</span><span class="token number">0x00007fb93c693800</span> nid<span class="token operator">=</span><span class="token number">0x376c</span> waiting on condition <span class="token punctuation">[</span><span class="token number">0x00007fb8fd520000</span><span class="token punctuation">]</span>
   <span class="token property">java.lang.Thread.State:</span> WAITING <span class="token operator">(</span>parking<span class="token operator">)</span>
	at sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span>Unsafe<span class="token punctuation">.</span>park<span class="token operator">(</span>Native Method<span class="token operator">)</span>
	<span class="token operator">-</span> parking to wait for  <span class="token operator">&lt;</span><span class="token number">0x00000000c600d388</span><span class="token operator">></span> <span class="token operator">(</span>a org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>common<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>EsExecutors<span class="token operator">$</span>ExecutorScalingQueue<span class="token operator">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h3 id="7-1-2-jstack-l-pid"><a href="#7-1-2-jstack-l-pid" class="headerlink" title="(7.1.2) jstack -l pid"></a>(7.1.2) jstack -l pid</h3><pre class="line-numbers language-log" data-language="log"><code class="language-log"><span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span> jstack <span class="token operator">-</span>l <span class="token number">13050</span>
<span class="token date number">2020-03-29</span> <span class="token time number">23:09:50</span>
Full thread dump Java HotSpot<span class="token operator">(</span>TM<span class="token operator">)</span> <span class="token number">64</span><span class="token operator">-</span>Bit Server VM <span class="token operator">(</span><span class="token number">25.172</span><span class="token operator">-</span>b11 mixed mode<span class="token operator">)</span><span class="token operator">:</span>

<span class="token string">"elasticsearch[elasticsearch_001_data][generic][T#8]"</span> <span class="token operator">#</span><span class="token number">51</span> daemon prio<span class="token operator">=</span><span class="token number">5</span> os_prio<span class="token operator">=</span><span class="token number">0</span> tid<span class="token operator">=</span><span class="token number">0x00007fb93df68000</span> nid<span class="token operator">=</span><span class="token number">0x77cf</span> waiting on condition <span class="token punctuation">[</span><span class="token number">0x00007fb8ff934000</span><span class="token punctuation">]</span>
   <span class="token property">java.lang.Thread.State:</span> TIMED_WAITING <span class="token operator">(</span>parking<span class="token operator">)</span>
	at sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span>Unsafe<span class="token punctuation">.</span>park<span class="token operator">(</span>Native Method<span class="token operator">)</span>
	<span class="token operator">-</span> parking to wait for  <span class="token operator">&lt;</span><span class="token number">0x00000000c5ed5f70</span><span class="token operator">></span> <span class="token operator">(</span>a org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>common<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>EsExecutors<span class="token operator">$</span>ExecutorScalingQueue<span class="token operator">)</span>
	at java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks<span class="token punctuation">.</span>LockSupport<span class="token punctuation">.</span>parkNanos<span class="token operator">(</span>LockSupport<span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">215</span><span class="token operator">)</span>


   <span class="token property">Locked ownable synchronizers:</span>
	<span class="token operator">-</span> None

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token string">"Attach Listener"</span> <span class="token operator">#</span><span class="token number">48</span> daemon prio<span class="token operator">=</span><span class="token number">9</span> os_prio<span class="token operator">=</span><span class="token number">0</span> tid<span class="token operator">=</span><span class="token number">0x00007fb90805b800</span> nid<span class="token operator">=</span><span class="token number">0x1c9f</span> waiting on condition <span class="token punctuation">[</span><span class="token number">0x0000000000000000</span><span class="token punctuation">]</span>
   <span class="token property">java.lang.Thread.State:</span> RUNNABLE

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token string">"VM Thread"</span> os_prio<span class="token operator">=</span><span class="token number">0</span> tid<span class="token operator">=</span><span class="token number">0x00007fb93c0b5000</span> nid<span class="token operator">=</span><span class="token number">0x32ff</span> runnable

<span class="token string">"Gang worker#0 (Parallel GC Threads)"</span> os_prio<span class="token operator">=</span><span class="token number">0</span> tid<span class="token operator">=</span><span class="token number">0x00007fb93c01d000</span> nid<span class="token operator">=</span><span class="token number">0x32fd</span> runnable

<span class="token string">"Concurrent Mark-Sweep GC Thread"</span> os_prio<span class="token operator">=</span><span class="token number">0</span> tid<span class="token operator">=</span><span class="token number">0x00007fb93c040000</span> nid<span class="token operator">=</span><span class="token number">0x32fe</span> runnable

<span class="token string">"VM Periodic Task Thread"</span> os_prio<span class="token operator">=</span><span class="token number">0</span> tid<span class="token operator">=</span><span class="token number">0x00007fb93c103800</span> nid<span class="token operator">=</span><span class="token number">0x3307</span> waiting on condition

<span class="token property">JNI global references:</span> <span class="token number">8827</span>

<span class="token punctuation">[</span>wkq<span class="token operator">@</span>VM_77_25_centos <span class="token operator">~</span><span class="token punctuation">]</span><span class="token operator">$</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<br>
<br>


<h1 id="8-Java监视与管理控制台-JConsole-Java-Monitoring-and-Managerment-Console"><a href="#8-Java监视与管理控制台-JConsole-Java-Monitoring-and-Managerment-Console" class="headerlink" title="(8) Java监视与管理控制台 JConsole (Java Monitoring and Managerment Console)"></a>(8) Java监视与管理控制台 JConsole (Java Monitoring and Managerment Console)</h1><br>
<br>


<h1 id="9-多合一故障处理工具-VisuaIVM-All-in-One-Java-Troubleshooting-Tool"><a href="#9-多合一故障处理工具-VisuaIVM-All-in-One-Java-Troubleshooting-Tool" class="headerlink" title="(9) 多合一故障处理工具 VisuaIVM (All-in-One Java Troubleshooting Tool)"></a>(9) 多合一故障处理工具 VisuaIVM (All-in-One Java Troubleshooting Tool)</h1><blockquote>
<p>VisuaIVM (All-in-One Java Troubleshooting Tool) 是到目前为止随JDK发布的功能最强大的运行监视和故障处理程序。</p>
</blockquote>
<br>
<br>


<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><p>[1] 《深入理解JAVA虚拟机: JVM高级特性与最佳实践》 周志明<br>[2] <a target="_blank" rel="noopener" href="https://my.oschina.net/feichexia/blog/196575">JVM性能调优监控工具jps、jstack、jmap、jhat、jstat、hprof使用详解</a><br>[3] <a target="_blank" rel="noopener" href="https://www.cnblogs.com/tulianghui/p/5914535.html">JAVA JPS 命令详解</a><br>[4] <a target="_blank" rel="noopener" href="https://blog.csdn.net/ouyang111222/article/details/53688986">jstat使用详解（分析JVM的使用情况）</a><br>[5] <a target="_blank" rel="noopener" href="https://www.cnblogs.com/duanxz/p/10240899.html">使用Java监控工具出现 Can’t attach to the process</a><br>[6] <a target="_blank" rel="noopener" href="https://my.oschina.net/javamaster/blog/1833908">JVM系列：jinfo命令详解</a><br>[7] <a target="_blank" rel="noopener" href="https://blog.csdn.net/zhaozheng7758/article/details/8623530">jmap命令详解</a><br>[8] <a target="_blank" rel="noopener" href="https://blog.csdn.net/zhaozheng7758/article/details/8623535">jstack命令详解</a><br>[9] <a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/40520">深入拆解Java虚拟机 - 30 | Java虚拟机的监控及诊断工具（命令行篇）</a><br>[10] <a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/11/tools/monitoring-tools-and-commands.html">oracle monitoring-tools-and-commands</a><br>[11] <a target="_blank" rel="noopener" href="https://time.geekbang.org/column/article/40821">深入拆解Java虚拟机 - 31 | Java虚拟机的监控及诊断工具（GUI篇）</a><br>[12] <a target="_blank" rel="noopener" href="https://visualvm.github.io/index.html">visualvm</a><br>[13] <a target="_blank" rel="noopener" href="https://github.com/AdoptOpenJDK/jitwatch">jitwatch</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/java/" rel="tag"># java</a>
              <a href="/tags/jvm/" rel="tag"># jvm</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/03/20/chrome-notes/" rel="prev" title="chrome-notes">
                  <i class="fa fa-chevron-left"></i> chrome-notes
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/04/06/cache-notes/" rel="next" title="cache笔记">
                  cache笔记 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WKQ</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://unpkg.com/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://unpkg.com/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  


  <script class="next-config" data-name="leancloud_visitors" type="application/json">{"enable":true,"app_id":"Ca876j76FoCQi1SShjT0qC6k-gzGzoHsz","app_key":"IeozLmM20GuvfcslfWgdNXP0","server_url":"http://weikeqin.com","security":true}</script>
  <script src="/js/third-party/statistics/lean-analytics.js"></script>



</body>
</html>
